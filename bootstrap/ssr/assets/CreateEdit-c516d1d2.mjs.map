{"version":3,"file":"CreateEdit-c516d1d2.mjs","sources":["../../../resources/js/pages/Factor/CreateEdit.vue"],"sourcesContent":["<template>\r\n    <Head :title=\"$t(factor ? 'edit_factor' : 'new_factor')\" />\r\n\r\n    <DefaultLayout>\r\n        <template #header>\r\n            <h2 class=\"font-semibold text-xl text-gray-800 leading-tight\">\r\n                {{ $t(factor ? \"edit_factor\" : \"new_factor\") }}\r\n            </h2>\r\n        </template>\r\n\r\n        <div>\r\n            <v-form @submit.prevent=\"submit\">\r\n                <v-container>\r\n                    <v-row>\r\n                        <v-col cols=\"12\" md=\"12\">\r\n                            <v-checkbox v-model=\"form.active\" :label=\"$t('active')\" />\r\n                        </v-col>\r\n                    </v-row>\r\n                    <v-row>\r\n                        <v-col cols=\"12\" md=\"12\">\r\n                            <v-text-field\r\n                                v-model=\"form.name\"\r\n                                required\r\n                                maxlength=\"255\"\r\n                                :label=\"$t('name')\"\r\n                                :error-messages=\"errors.name\"\r\n                            />\r\n                        </v-col>\r\n                    </v-row>\r\n                    <v-row>\r\n                        <v-col cols=\"12\" md=\"12\">\r\n                            <v-textarea\r\n                                v-model=\"form.description\"\r\n                                :label=\"$t('description')\"\r\n                                :error-messages=\"errors.description\"\r\n                            />\r\n                        </v-col>\r\n                    </v-row>\r\n                    <v-row>\r\n                        <v-col cols=\"12\" md=\"12\">\r\n                            <v-data-table :headers=\"headers\" :items=\"form.config\" density=\"compact\">\r\n                                <template #top>\r\n                                    <v-toolbar flat>\r\n                                        <v-toolbar-title>{{ $t(\"entries\") }}</v-toolbar-title>\r\n                                        <v-divider class=\"mx-4\" inset vertical />\r\n                                        <v-spacer />\r\n                                        <v-btn\r\n                                            color=\"primary\"\r\n                                            dark\r\n                                            :disabled=\"getTicketCategories().length === 0\"\r\n                                            @click=\"addEntry\"\r\n                                        >\r\n                                            {{ $t(\"new_entry\") }}\r\n                                        </v-btn>\r\n                                    </v-toolbar>\r\n                                </template>\r\n                                <template #[`item.value`]=\"{ item }\">\r\n                                    <v-autocomplete\r\n                                        v-model=\"item.raw.value\"\r\n                                        :items=\"getTicketCategories(item.raw.value)\"\r\n                                        item-title=\"name\"\r\n                                        item-value=\"uuid\"\r\n                                        variant=\"plain\"\r\n                                        density=\"compact\"\r\n                                        hide-details=\"auto\"\r\n                                    />\r\n                                </template>\r\n                                <template #[`item.initial_weight`]=\"{ item }\">\r\n                                    <v-text-field\r\n                                        v-model.number=\"item.raw.initial_weight\"\r\n                                        type=\"number\"\r\n                                        min=\"0\"\r\n                                        max=\"9999999\"\r\n                                        placeholder=\"0\"\r\n                                        variant=\"plain\"\r\n                                        density=\"compact\"\r\n                                        hide-details=\"auto\"\r\n                                    />\r\n                                </template>\r\n                                <template #[`item.weight_increment`]=\"{ item }\">\r\n                                    <v-text-field\r\n                                        v-model.number=\"item.raw.weight_increment\"\r\n                                        type=\"number\"\r\n                                        min=\"0\"\r\n                                        max=\"99999\"\r\n                                        placeholder=\"0\"\r\n                                        variant=\"plain\"\r\n                                        density=\"compact\"\r\n                                        hide-details=\"auto\"\r\n                                    />\r\n                                </template>\r\n                                <template #[`item.complexity`]=\"{ item }\">\r\n                                    <v-text-field\r\n                                        v-model.number=\"item.raw.complexity\"\r\n                                        type=\"number\"\r\n                                        min=\"0\"\r\n                                        max=\"9999\"\r\n                                        placeholder=\"0\"\r\n                                        variant=\"plain\"\r\n                                        density=\"compact\"\r\n                                        hide-details=\"auto\"\r\n                                    />\r\n                                </template>\r\n                                <template #[`item.delay`]=\"{ item }\">\r\n                                    <v-text-field\r\n                                        v-model.number=\"item.raw.delay\"\r\n                                        type=\"number\"\r\n                                        min=\"0\"\r\n                                        max=\"99999\"\r\n                                        placeholder=\"0\"\r\n                                        variant=\"plain\"\r\n                                        density=\"compact\"\r\n                                        hide-details=\"auto\"\r\n                                    />\r\n                                </template>\r\n                                <template #[`item.actions`]=\"{ item }\">\r\n                                    <v-btn\r\n                                        icon=\"mdi-delete\"\r\n                                        :title=\"$t('remove')\"\r\n                                        size=\"small\"\r\n                                        variant=\"plain\"\r\n                                        @click=\"removeEntry(item.raw.value)\"\r\n                                    />\r\n                                </template>\r\n                            </v-data-table>\r\n                        </v-col>\r\n                    </v-row>\r\n                    <v-row>\r\n                        <v-col cols=\"12\" md=\"12\">\r\n                            <v-btn type=\"submit\" color=\"primary\" class=\"mr-3\" :disabled=\"form.processing\">\r\n                                {{ $t(\"save\") }}\r\n                            </v-btn>\r\n                            <Link :href=\"route('ticket-allocator.factors.index')\" class=\"mr-3\">\r\n                                <v-btn>{{ $t(\"cancel\") }}</v-btn>\r\n                            </Link>\r\n                        </v-col>\r\n                    </v-row>\r\n                </v-container>\r\n            </v-form>\r\n        </div>\r\n    </DefaultLayout>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport DefaultLayout from \"@/layouts/Default.vue\";\r\nimport { Head, Link, useForm } from \"@inertiajs/vue3\";\r\nimport type { Factor, TicketCategory } from \"@/types\";\r\nimport { wTrans } from \"laravel-vue-i18n\";\r\nimport route from \"ziggy-js\";\r\n\r\nconst props = defineProps<{\r\n    factor?: Factor;\r\n    ticketCategories: TicketCategory[];\r\n    errors: Record<string, string>;\r\n}>();\r\n\r\nconst headers = [\r\n    { title: wTrans(\"value\"), key: \"value\" },\r\n    { title: wTrans(\"initial_weight\"), key: \"initial_weight\" },\r\n    { title: wTrans(\"weight_increment\"), key: \"weight_increment\" },\r\n    { title: wTrans(\"complexity\"), key: \"complexity\" },\r\n    { title: wTrans(\"delay\"), key: \"delay\" },\r\n    { title: wTrans(\"actions\"), key: \"actions\", sortable: false },\r\n];\r\n\r\nconst form = useForm({\r\n    active: !props.factor?.deleted_at,\r\n    name: props.factor?.name ?? \"\",\r\n    description: props.factor?.description ?? \"\",\r\n    config: props.factor?.config ?? [],\r\n});\r\n\r\nfunction getTicketCategories(uuid?: string) {\r\n    return props.ticketCategories.filter(\r\n        (ticketCategory) =>\r\n            ticketCategory.uuid === uuid || !form.config.map((item) => item.value).includes(ticketCategory.uuid)\r\n    );\r\n}\r\n\r\nfunction addEntry() {\r\n    form.config.push({\r\n        value: getTicketCategories()[0]?.uuid ?? \"\",\r\n        initial_weight: null,\r\n        weight_increment: null,\r\n        complexity: null,\r\n        delay: null,\r\n    });\r\n}\r\n\r\nfunction removeEntry(id: number | string) {\r\n    form.config = form.config.filter((entry) => entry.value !== id);\r\n}\r\n\r\nfunction submit() {\r\n    props.factor\r\n        ? form.put(route(\"ticket-allocator.factors.update\", props.factor.uuid))\r\n        : form.post(route(\"ticket-allocator.factors.store\"));\r\n}\r\n</script>\r\n"],"names":["_a","route"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA4JA,UAAM,UAAU;AAAA,MACZ,EAAE,OAAO,OAAO,OAAO,GAAG,KAAK,QAAQ;AAAA,MACvC,EAAE,OAAO,OAAO,gBAAgB,GAAG,KAAK,iBAAiB;AAAA,MACzD,EAAE,OAAO,OAAO,kBAAkB,GAAG,KAAK,mBAAmB;AAAA,MAC7D,EAAE,OAAO,OAAO,YAAY,GAAG,KAAK,aAAa;AAAA,MACjD,EAAE,OAAO,OAAO,OAAO,GAAG,KAAK,QAAQ;AAAA,MACvC,EAAE,OAAO,OAAO,SAAS,GAAG,KAAK,WAAW,UAAU,MAAM;AAAA,IAAA;AAGhE,UAAM,OAAO,QAAQ;AAAA,MACjB,QAAQ,GAAC,WAAM,WAAN,mBAAc;AAAA,MACvB,QAAM,WAAM,WAAN,mBAAc,SAAQ;AAAA,MAC5B,eAAa,WAAM,WAAN,mBAAc,gBAAe;AAAA,MAC1C,UAAQ,WAAM,WAAN,mBAAc,WAAU,CAAC;AAAA,IAAA,CACpC;AAED,aAAS,oBAAoB,MAAe;AACxC,aAAO,MAAM,iBAAiB;AAAA,QAC1B,CAAC,mBACG,eAAe,SAAS,QAAQ,CAAC,KAAK,OAAO,IAAI,CAAC,SAAS,KAAK,KAAK,EAAE,SAAS,eAAe,IAAI;AAAA,MAAA;AAAA,IAE/G;AAEA,aAAS,WAAW;;AAChB,WAAK,OAAO,KAAK;AAAA,QACb,SAAOA,MAAA,oBAAsB,EAAA,CAAC,MAAvB,gBAAAA,IAA0B,SAAQ;AAAA,QACzC,gBAAgB;AAAA,QAChB,kBAAkB;AAAA,QAClB,YAAY;AAAA,QACZ,OAAO;AAAA,MAAA,CACV;AAAA,IACL;AAEA,aAAS,YAAY,IAAqB;AACjC,WAAA,SAAS,KAAK,OAAO,OAAO,CAAC,UAAU,MAAM,UAAU,EAAE;AAAA,IAClE;AAEA,aAAS,SAAS;AACd,YAAM,SACA,KAAK,IAAIC,EAAM,mCAAmC,MAAM,OAAO,IAAI,CAAC,IACpE,KAAK,KAAKA,EAAM,gCAAgC,CAAC;AAAA,IAC3D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}