import{a8 as N,aI as m,aJ as S,ac as D,B as e,u as r,ad as a,ak as F,ab as J,aE as j,ag as b,ah as p,as as q,aK as s,_ as z,aL as A,aj as V,aM as I,J as y,aN as K,aO as L}from"./app-e6ba554e.js";import{a as O,P as w}from"./Default.vue_vue_type_script_setup_true_lang-5ddb1583.js";import{V as P}from"./VForm-0d5c60e4.js";import{V as R,a as c,b as f}from"./VRow-e72a1733.js";import{V as Z,a as G}from"./VTextarea-73798128.js";import{V as H,a as Q,b as W}from"./VToolbar-d898d3dd.js";import{V as X}from"./VAutocomplete-dbe654ee.js";const Y={class:"font-semibold text-xl text-gray-800 leading-tight"},re=N({__name:"CreateEdit",props:{factor:null,factorType:null,ticketCategories:null,errors:null},setup(u){var h,_,k,U,x,T;const d=u,$=[{title:m("value"),key:"value"},{title:m("initial_weight"),key:"initial_weight"},{title:m("weight_increment"),key:"weight_increment"},{title:m("complexity"),key:"complexity"},{title:m("delay"),key:"delay"},{title:m("actions"),key:"actions",sortable:!1}],i=S({active:!((h=d.factor)!=null&&h.deleted_at),type:((_=d.factor)==null?void 0:_.type.alias)??((k=d.factorType)==null?void 0:k.alias)??"",name:((U=d.factor)==null?void 0:U.name)??"",description:((x=d.factor)==null?void 0:x.description)??"",config:((T=d.factor)==null?void 0:T.config)??[]});function v(t){return d.ticketCategories.filter(o=>o.uuid===t||!i.config.map(g=>g.value).includes(o.uuid))}function C(){var t;i.config.push({value:((t=v()[0])==null?void 0:t.uuid)??"",initial_weight:null,weight_increment:null,complexity:null,delay:null})}function M(t){i.config=i.config.filter(o=>o.value!==t)}function B(){d.factor?i.put(w("ticket-allocator.factors.update",d.factor.uuid)):i.post(w("ticket-allocator.factors.store"))}return(t,o)=>{const g=L("v-data-table");return J(),D(F,null,[e(r(j),{title:t.$t(u.factor?"edit_factor":"new_factor")},null,8,["title"]),e(O,null,{header:a(()=>[b("h2",Y,p(t.$t(u.factor?"edit_factor":"new_factor")),1)]),default:a(()=>[b("div",null,[e(P,{onSubmit:q(B,["prevent"])},{default:a(()=>[e(R,null,{default:a(()=>[e(c,null,{default:a(()=>[e(f,{cols:"12",md:"12"},{default:a(()=>[e(Z,{modelValue:r(i).active,"onUpdate:modelValue":o[0]||(o[0]=l=>r(i).active=l),label:t.$t("active")},null,8,["modelValue","label"])]),_:1})]),_:1}),e(c,null,{default:a(()=>[e(f,{cols:"12",md:"12"},{default:a(()=>{var l,n;return[e(s,{"model-value":((l=u.factor)==null?void 0:l.type.name)??((n=u.factorType)==null?void 0:n.name),label:t.$t("factor_type"),readonly:""},null,8,["model-value","label"]),z(b("input",{"onUpdate:modelValue":o[1]||(o[1]=E=>r(i).type=E),type:"hidden"},null,512),[[A,r(i).type]])]}),_:1})]),_:1}),e(c,null,{default:a(()=>[e(f,{cols:"12",md:"12"},{default:a(()=>[e(s,{modelValue:r(i).name,"onUpdate:modelValue":o[2]||(o[2]=l=>r(i).name=l),required:"",maxlength:"255",label:t.$t("name"),"error-messages":u.errors.name},null,8,["modelValue","label","error-messages"])]),_:1})]),_:1}),e(c,null,{default:a(()=>[e(f,{cols:"12",md:"12"},{default:a(()=>[e(G,{modelValue:r(i).description,"onUpdate:modelValue":o[3]||(o[3]=l=>r(i).description=l),label:t.$t("description"),"error-messages":u.errors.description},null,8,["modelValue","label","error-messages"])]),_:1})]),_:1}),e(c,null,{default:a(()=>[e(f,{cols:"12",md:"12"},{default:a(()=>[e(g,{headers:$,items:r(i).config,density:"compact"},{top:a(()=>[e(H,{flat:""},{default:a(()=>[e(Q,null,{default:a(()=>[V(p(t.$t("entries")),1)]),_:1}),e(I,{class:"mx-4",inset:"",vertical:""}),e(W),e(y,{color:"primary",dark:"",disabled:v().length===0,onClick:C},{default:a(()=>[V(p(t.$t("new_entry")),1)]),_:1},8,["disabled"])]),_:1})]),["item.value"]:a(({item:l})=>[e(X,{modelValue:l.raw.value,"onUpdate:modelValue":n=>l.raw.value=n,items:v(l.raw.value),"item-title":"name","item-value":"uuid",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue","items"])]),["item.initial_weight"]:a(({item:l})=>[e(s,{modelValue:l.raw.initial_weight,"onUpdate:modelValue":n=>l.raw.initial_weight=n,modelModifiers:{number:!0},type:"number",min:"0",max:"9999999",placeholder:"0",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.weight_increment"]:a(({item:l})=>[e(s,{modelValue:l.raw.weight_increment,"onUpdate:modelValue":n=>l.raw.weight_increment=n,modelModifiers:{number:!0},type:"number",min:"0",max:"99999",placeholder:"0",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.complexity"]:a(({item:l})=>[e(s,{modelValue:l.raw.complexity,"onUpdate:modelValue":n=>l.raw.complexity=n,modelModifiers:{number:!0},type:"number",min:"0",max:"9999",placeholder:"0",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.delay"]:a(({item:l})=>[e(s,{modelValue:l.raw.delay,"onUpdate:modelValue":n=>l.raw.delay=n,modelModifiers:{number:!0},type:"number",min:"0",max:"99999",placeholder:"0",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.actions"]:a(({item:l})=>[e(y,{icon:"mdi-delete",title:t.$t("remove"),size:"small",variant:"plain",onClick:n=>M(l.raw.value)},null,8,["title","onClick"])]),_:2},1032,["items"])]),_:1})]),_:1}),e(c,null,{default:a(()=>[e(f,{cols:"12",md:"12"},{default:a(()=>[e(y,{type:"submit",color:"primary",class:"mr-3",disabled:r(i).processing},{default:a(()=>[V(p(t.$t("save")),1)]),_:1},8,["disabled"]),e(r(K),{href:r(w)("ticket-allocator.factors.index"),class:"mr-3"},{default:a(()=>[e(y,null,{default:a(()=>[V(p(t.$t("cancel")),1)]),_:1})]),_:1},8,["href"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])]),_:1})],64)}}});export{re as default};
//# sourceMappingURL=CreateEdit-d0cffb36.js.map
