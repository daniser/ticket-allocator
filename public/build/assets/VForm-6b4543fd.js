import{aS as G,aT as J,aU as Q,aV as ee,aW as le,aX as ae,aY as te,r as C,ar as R,aZ as ne,a_ as ue,a$ as oe,b0 as se,d as P,w as N,n as O,j as $,b1 as re,k as u,a8 as B,b2 as ie,ay as D,b3 as ce,b4 as K,b5 as ve,V as de,b6 as fe,ak as me,aR as pe,b7 as j,h as he,b8 as Ve,b9 as ke}from"./app-b9d1a9bc.js";function ye(e,i,a){if(i==null)return e;if(Array.isArray(i))throw new Error("Multiple matches is not implemented");return typeof i=="number"&&~i?u(B,null,[u("span",{class:"v-autocomplete__unmask"},[e.substr(0,i)]),u("span",{class:"v-autocomplete__mask"},[e.substr(i,a)]),u("span",{class:"v-autocomplete__unmask"},[e.substr(i+a)])]):e}const Ce=G()({name:"VAutocomplete",props:{search:String,...J({filterKeys:["title"]}),...Q(),...ee(le({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ae({transition:!1})},emits:{"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,i){let{slots:a}=i;const{t:A}=te(),p=C(),c=C(!1),v=C(!0),o=R(e,"menu"),{items:d,transformIn:h,transformOut:f}=ne(e),s=R(e,"search",""),r=R(e,"modelValue",[],l=>h(ue(l)),l=>{const t=f(l);return e.multiple?t:t[0]??null}),V=oe(),{filteredItems:S,getMatches:z}=se(e,d,P(()=>v.value?void 0:s.value)),g=P(()=>r.value.map(l=>d.value.find(t=>e.valueComparator(t.value,l.value))||l)),x=P(()=>e.hideSelected?S.value.filter(l=>!g.value.some(t=>t.value===l.value)):S.value),E=P(()=>g.value.map(l=>l.props.value)),T=C();function H(l){r.value=[],e.openOnClear&&(o.value=!0),s.value=""}function L(){e.hideNoData&&!d.value.length||e.readonly||V!=null&&V.isReadonly.value||(o.value=!0)}function W(l){if(!(e.readonly||V!=null&&V.isReadonly.value)){if(["Enter","ArrowDown","ArrowUp"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"].includes(l.key)&&(o.value=!0),["Escape"].includes(l.key)&&(o.value=!1),["Enter","Escape","Tab"].includes(l.key)&&(v.value=!0),l.key==="ArrowDown"){var t;(t=T.value)==null||t.focus("next")}else if(l.key==="ArrowUp"){var m;(m=T.value)==null||m.focus("prev")}}}function X(l){s.value=l.target.value}function Y(){c.value&&(v.value=!0)}function Z(l){c.value=!0}function q(l){if(l.relatedTarget==null){var t;(t=p.value)==null||t.focus()}}const F=C(!1);function w(l){if(e.multiple){const t=E.value.findIndex(m=>e.valueComparator(m,l.value));if(t===-1)r.value=[...r.value,l],s.value="";else{const m=[...r.value];m.splice(t,1),r.value=m}}else r.value=[l],F.value=!0,a.selection||(s.value=l.title),o.value=!1,v.value=!0,O(()=>F.value=!1)}return N(c,l=>{if(l){var t;F.value=!0,s.value=e.multiple||a.selection?"":String(((t=g.value.at(-1))==null?void 0:t.props.title)??""),v.value=!0,O(()=>F.value=!1)}else o.value=!1,s.value=""}),N(s,l=>{!c.value||F.value||(l&&(o.value=!0),v.value=!l)}),$(()=>{const l=!!(e.chips||a.chip),t=!!(!e.hideNoData||x.value.length||a.prepend||a.append||a["no-data"]),[m]=re(e);return u(pe,D({ref:p},m,{modelValue:s.value,"onUpdate:modelValue":_=>{_==null&&(r.value=[])},validationValue:r.externalValue,dirty:r.value.length>0,onInput:X,class:["v-autocomplete",{"v-autocomplete--active-menu":o.value,"v-autocomplete--chips":!!e.chips,[`v-autocomplete--${e.multiple?"multiple":"single"}`]:!0,"v-autocomplete--selection-slot":!!a.selection}],appendInnerIcon:e.menuIcon,readonly:e.readonly,"onClick:clear":H,"onClick:control":L,"onClick:input":L,onFocus:()=>c.value=!0,onBlur:()=>c.value=!1,onKeydown:W}),{...a,default:()=>{var _,M,U;return u(B,null,[u(ie,D({modelValue:o.value,"onUpdate:modelValue":n=>o.value=n,activator:"parent",contentClass:"v-autocomplete__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Y},e.menuProps),{default:()=>[t&&u(ce,{ref:T,selected:E.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),onFocusin:Z,onFocusout:q},{default:()=>[!x.value.length&&!e.hideNoData&&(((_=a["no-data"])==null?void 0:_.call(a))??u(K,{title:A(e.noDataText)},null)),(M=a["prepend-item"])==null?void 0:M.call(a),x.value.map((n,b)=>{var I;return((I=a.item)==null?void 0:I.call(a,{item:n,index:b,props:D(n.props,{onClick:()=>w(n)})}))??u(K,D({key:b},n.props,{onClick:()=>w(n)}),{prepend:k=>{let{isSelected:y}=k;return e.multiple&&!e.hideSelected?u(ve,{modelValue:y,ripple:!1},null):void 0},title:()=>{var k,y;return v.value?n.title:ye(n.title,(k=z(n))==null?void 0:k.title,((y=s.value)==null?void 0:y.length)??0)}})}),(U=a["append-item"])==null?void 0:U.call(a)]})]}),g.value.map((n,b)=>{function I(y){y.stopPropagation(),y.preventDefault(),w(n)}const k={"onClick:close":I,modelValue:!0,"onUpdate:modelValue":void 0};return u("div",{key:n.value,class:"v-autocomplete__selection"},[l?u(de,{defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>[a.chip?a.chip({item:n,index:b,props:k}):u(fe,k,null)]}):a.selection?a.selection({item:n,index:b}):u("span",{class:"v-autocomplete__selection-text"},[n.title,e.multiple&&b<g.value.length-1&&u("span",{class:"v-autocomplete__selection-comma"},[me(",")])])])})])}})}),j({isFocused:c,isPristine:v,menu:o,search:s,filteredItems:S,select:w},p)}}),ge=he({name:"VForm",props:{...Ve()},emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,i){let{slots:a,emit:A}=i;const p=ke(e),c=C();function v(d){d.preventDefault(),p.reset()}function o(d){const h=d,f=p.validate();h.then=f.then.bind(f),h.catch=f.catch.bind(f),h.finally=f.finally.bind(f),A("submit",h),h.defaultPrevented||f.then(s=>{let{valid:r}=s;if(r){var V;(V=c.value)==null||V.submit()}}),h.preventDefault()}return $(()=>{var d;return u("form",{ref:c,class:"v-form",novalidate:!0,onReset:v,onSubmit:o},[(d=a.default)==null?void 0:d.call(a,p)])}),j(p,c)}});export{ge as V,Ce as a};
//# sourceMappingURL=VForm-6b4543fd.js.map
