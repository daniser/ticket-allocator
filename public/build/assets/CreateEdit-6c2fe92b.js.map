{"version":3,"file":"CreateEdit-6c2fe92b.js","sources":["../../../resources/js/pages/Factor/CreateEdit.vue"],"sourcesContent":["<template>\n    <Head :title=\"trans(factor ? 'edit_factor' : 'new_factor')\" />\n\n    <DefaultLayout>\n        <template #header>\n            <h2 class=\"font-semibold text-xl text-gray-800 leading-tight\">\n                {{ trans(factor ? \"edit_factor\" : \"new_factor\") }}\n            </h2>\n        </template>\n\n        <div>\n            <v-form @submit.prevent=\"submit\">\n                <v-container>\n                    <v-row>\n                        <v-col cols=\"12\" md=\"12\">\n                            <v-checkbox v-model=\"form.active\" :label=\"trans('active')\" />\n                        </v-col>\n                    </v-row>\n                    <v-row>\n                        <v-col cols=\"12\" md=\"12\">\n                            <v-text-field\n                                v-model=\"form.name\"\n                                required\n                                maxlength=\"255\"\n                                :label=\"trans('name')\"\n                                :error-messages=\"errors.name\"\n                            />\n                        </v-col>\n                    </v-row>\n                    <v-row>\n                        <v-col cols=\"12\" md=\"12\">\n                            <v-textarea\n                                v-model=\"form.description\"\n                                :label=\"trans('description')\"\n                                :error-messages=\"errors.description\"\n                            />\n                        </v-col>\n                    </v-row>\n                    <v-row>\n                        <v-col cols=\"12\" md=\"12\">\n                            <v-data-table :headers=\"headers\" :items=\"form.config\" density=\"compact\">\n                                <template #top>\n                                    <v-toolbar flat>\n                                        <v-toolbar-title>{{ trans(\"entries\") }}</v-toolbar-title>\n                                        <v-divider class=\"mx-4\" inset vertical />\n                                        <v-spacer />\n                                        <v-btn\n                                            color=\"primary\"\n                                            dark\n                                            :disabled=\"getTicketCategories().length === 0\"\n                                            @click=\"addEntry\"\n                                        >\n                                            {{ trans(\"new_entry\") }}\n                                        </v-btn>\n                                    </v-toolbar>\n                                </template>\n                                <template #[`item.value`]=\"{ item }\">\n                                    <v-autocomplete\n                                        v-model=\"item.raw.value\"\n                                        :items=\"getTicketCategories(item.raw.value)\"\n                                        item-title=\"name\"\n                                        item-value=\"uuid\"\n                                        variant=\"plain\"\n                                        density=\"compact\"\n                                        hide-details=\"auto\"\n                                    />\n                                </template>\n                                <template #[`item.initial_weight`]=\"{ item }\">\n                                    <v-text-field\n                                        v-model.number=\"item.raw.initial_weight\"\n                                        type=\"number\"\n                                        min=\"0\"\n                                        max=\"9999999\"\n                                        variant=\"plain\"\n                                        density=\"compact\"\n                                        hide-details=\"auto\"\n                                    />\n                                </template>\n                                <template #[`item.weight_increment`]=\"{ item }\">\n                                    <v-text-field\n                                        v-model.number=\"item.raw.weight_increment\"\n                                        type=\"number\"\n                                        min=\"0\"\n                                        max=\"99999\"\n                                        variant=\"plain\"\n                                        density=\"compact\"\n                                        hide-details=\"auto\"\n                                    />\n                                </template>\n                                <template #[`item.complexity`]=\"{ item }\">\n                                    <v-text-field\n                                        v-model.number=\"item.raw.complexity\"\n                                        type=\"number\"\n                                        min=\"0\"\n                                        max=\"9999\"\n                                        variant=\"plain\"\n                                        density=\"compact\"\n                                        hide-details=\"auto\"\n                                    />\n                                </template>\n                                <template #[`item.delay`]=\"{ item }\">\n                                    <v-text-field\n                                        v-model.number=\"item.raw.delay\"\n                                        type=\"number\"\n                                        min=\"0\"\n                                        max=\"99999\"\n                                        variant=\"plain\"\n                                        density=\"compact\"\n                                        hide-details=\"auto\"\n                                    />\n                                </template>\n                                <template #[`item.actions`]=\"{ item }\">\n                                    <v-btn\n                                        icon=\"mdi-delete\"\n                                        :title=\"trans('remove')\"\n                                        size=\"small\"\n                                        variant=\"plain\"\n                                        @click=\"removeEntry(item.raw.value)\"\n                                    />\n                                </template>\n                            </v-data-table>\n                        </v-col>\n                    </v-row>\n                    <v-row>\n                        <v-col cols=\"12\" md=\"12\">\n                            <v-btn type=\"submit\" color=\"primary\" class=\"mr-3\" :disabled=\"form.processing\">\n                                {{ trans(\"save\") }}\n                            </v-btn>\n                            <Link :href=\"route('ticket-allocator.factors.index')\" class=\"mr-3\">\n                                <v-btn>{{ trans(\"cancel\") }}</v-btn>\n                            </Link>\n                        </v-col>\n                    </v-row>\n                </v-container>\n            </v-form>\n        </div>\n    </DefaultLayout>\n</template>\n\n<script setup lang=\"ts\">\nimport DefaultLayout from \"@/layouts/Default.vue\";\nimport { Head, Link, useForm } from \"@inertiajs/vue3\";\nimport type { Factor, TicketCategory } from \"@/types\";\nimport { trans, wTrans } from \"laravel-vue-i18n\";\nimport route from \"ziggy-js\";\n\nconst props = defineProps<{\n    factor?: Factor;\n    ticketCategories: TicketCategory[];\n    errors: Record<string, string>;\n}>();\n\nconst headers = [\n    { title: wTrans(\"value\"), key: \"value\" },\n    { title: wTrans(\"initial_weight\"), key: \"initial_weight\" },\n    { title: wTrans(\"weight_increment\"), key: \"weight_increment\" },\n    { title: wTrans(\"complexity\"), key: \"complexity\" },\n    { title: wTrans(\"delay\"), key: \"delay\" },\n    { title: wTrans(\"actions\"), key: \"actions\", sortable: false },\n];\n\nconst form = useForm({\n    active: !props.factor?.deleted_at,\n    name: props.factor?.name ?? \"\",\n    description: props.factor?.description ?? \"\",\n    config: props.factor?.config ?? [],\n});\n\nfunction getTicketCategories(uuid?: string) {\n    return props.ticketCategories.filter(\n        (ticketCategory) =>\n            ticketCategory.uuid === uuid || !form.config.map((item) => item.value).includes(ticketCategory.uuid)\n    );\n}\n\nfunction addEntry() {\n    form.config.push({\n        value: getTicketCategories()[0]?.uuid ?? \"\",\n        initial_weight: 0,\n        weight_increment: 0,\n        complexity: 0,\n        delay: 0,\n    });\n}\n\nfunction removeEntry(id: number | string) {\n    form.config = form.config.filter((entry) => entry.value !== id);\n}\n\nfunction submit() {\n    props.factor\n        ? form.put(route(\"ticket-allocator.factors.update\", props.factor.uuid))\n        : form.post(route(\"ticket-allocator.factors.store\"));\n}\n</script>\n"],"names":["headers","wTrans","form","useForm","_a","props","_b","_c","_d","getTicketCategories","uuid","ticketCategory","item","addEntry","removeEntry","id","entry","submit","route"],"mappings":"8rBAwJMA,EAAU,CACZ,CAAE,MAAOC,EAAO,OAAO,EAAG,IAAK,OAAQ,EACvC,CAAE,MAAOA,EAAO,gBAAgB,EAAG,IAAK,gBAAiB,EACzD,CAAE,MAAOA,EAAO,kBAAkB,EAAG,IAAK,kBAAmB,EAC7D,CAAE,MAAOA,EAAO,YAAY,EAAG,IAAK,YAAa,EACjD,CAAE,MAAOA,EAAO,OAAO,EAAG,IAAK,OAAQ,EACvC,CAAE,MAAOA,EAAO,SAAS,EAAG,IAAK,UAAW,SAAU,EAAM,CAAA,EAG1DC,EAAOC,EAAQ,CACjB,OAAQ,GAACC,EAAAC,EAAM,SAAN,MAAAD,EAAc,YACvB,OAAME,EAAAD,EAAM,SAAN,YAAAC,EAAc,OAAQ,GAC5B,cAAaC,EAAAF,EAAM,SAAN,YAAAE,EAAc,cAAe,GAC1C,SAAQC,EAAAH,EAAM,SAAN,YAAAG,EAAc,SAAU,CAAC,CAAA,CACpC,EAED,SAASC,EAAoBC,EAAe,CACxC,OAAOL,EAAM,iBAAiB,OACzBM,GACGA,EAAe,OAASD,GAAQ,CAACR,EAAK,OAAO,IAAKU,GAASA,EAAK,KAAK,EAAE,SAASD,EAAe,IAAI,CAAA,CAE/G,CAEA,SAASE,GAAW,OAChBX,EAAK,OAAO,KAAK,CACb,QAAOE,EAAAK,EAAsB,EAAA,CAAC,IAAvB,YAAAL,EAA0B,OAAQ,GACzC,eAAgB,EAChB,iBAAkB,EAClB,WAAY,EACZ,MAAO,CAAA,CACV,CACL,CAEA,SAASU,EAAYC,EAAqB,CACjCb,EAAA,OAASA,EAAK,OAAO,OAAQc,GAAUA,EAAM,QAAUD,CAAE,CAClE,CAEA,SAASE,GAAS,CACdZ,EAAM,OACAH,EAAK,IAAIgB,EAAM,kCAAmCb,EAAM,OAAO,IAAI,CAAC,EACpEH,EAAK,KAAKgB,EAAM,gCAAgC,CAAC,CAC3D"}