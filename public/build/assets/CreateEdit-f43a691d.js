import{ax as S,b6 as u,b7 as E,aB as F,m as e,u as l,aC as a,aK as N,aA as A,aJ as r,b2 as D,aF as C,aG as c,aS as $,b8 as f,aI as b,b9 as q,ae as _,ba as z,bb as G}from"./app-baeee0f0.js";import{a as I,P as v}from"./Default.vue_vue_type_script_setup_true_lang-11bcaa8c.js";import{V as J}from"./VForm-a95ecf71.js";import{V as K,a as p,b as V}from"./VRow-2d5c59e8.js";import{V as P,a as R}from"./VTextarea-5e9692bb.js";import{V as Z,a as j,b as H}from"./VToolbar-058080d1.js";import{V as L}from"./VAutocomplete-3991ad3d.js";const O={class:"font-semibold text-xl text-gray-800 leading-tight"},le=S({__name:"CreateEdit",props:{factor:null,ticketCategories:null,errors:null},setup(s){var w,h,x,k;const d=s,U=[{title:u("value"),key:"value"},{title:u("initial_weight"),key:"initial_weight"},{title:u("weight_increment"),key:"weight_increment"},{title:u("complexity"),key:"complexity"},{title:u("delay"),key:"delay"},{title:u("actions"),key:"actions",sortable:!1}],i=E({active:!((w=d.factor)!=null&&w.deleted_at),name:((h=d.factor)==null?void 0:h.name)??"",description:((x=d.factor)==null?void 0:x.description)??"",config:((k=d.factor)==null?void 0:k.config)??[]});function y(m){return d.ticketCategories.filter(o=>o.uuid===m||!i.config.map(g=>g.value).includes(o.uuid))}function T(){var m;i.config.push({value:((m=y()[0])==null?void 0:m.uuid)??"",initial_weight:0,weight_increment:0,complexity:0,delay:0})}function B(m){i.config=i.config.filter(o=>o.value!==m)}function M(){d.factor?i.put(v("ticket-allocator.factors.update",d.factor.uuid)):i.post(v("ticket-allocator.factors.store"))}return(m,o)=>{const g=G("v-data-table");return A(),F(N,null,[e(l(D),{title:l(r)(s.factor?"edit_factor":"new_factor")},null,8,["title"]),e(I,null,{header:a(()=>[C("h2",O,c(l(r)(s.factor?"edit_factor":"new_factor")),1)]),default:a(()=>[C("div",null,[e(J,{onSubmit:$(M,["prevent"])},{default:a(()=>[e(K,null,{default:a(()=>[e(p,null,{default:a(()=>[e(V,{cols:"12",md:"12"},{default:a(()=>[e(P,{modelValue:l(i).active,"onUpdate:modelValue":o[0]||(o[0]=t=>l(i).active=t),label:l(r)("active")},null,8,["modelValue","label"])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(V,{cols:"12",md:"12"},{default:a(()=>[e(f,{modelValue:l(i).name,"onUpdate:modelValue":o[1]||(o[1]=t=>l(i).name=t),required:"",maxlength:"255",label:l(r)("name"),"error-messages":s.errors.name},null,8,["modelValue","label","error-messages"])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(V,{cols:"12",md:"12"},{default:a(()=>[e(R,{modelValue:l(i).description,"onUpdate:modelValue":o[2]||(o[2]=t=>l(i).description=t),label:l(r)("description"),"error-messages":s.errors.description},null,8,["modelValue","label","error-messages"])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(V,{cols:"12",md:"12"},{default:a(()=>[e(g,{headers:U,items:l(i).config,density:"compact"},{top:a(()=>[e(Z,{flat:""},{default:a(()=>[e(j,null,{default:a(()=>[b(c(l(r)("entries")),1)]),_:1}),e(q,{class:"mx-4",inset:"",vertical:""}),e(H),e(_,{color:"primary",dark:"",disabled:y().length===0,onClick:T},{default:a(()=>[b(c(l(r)("new_entry")),1)]),_:1},8,["disabled"])]),_:1})]),["item.value"]:a(({item:t})=>[e(L,{modelValue:t.raw.value,"onUpdate:modelValue":n=>t.raw.value=n,items:y(t.raw.value),"item-title":"name","item-value":"uuid",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue","items"])]),["item.initial_weight"]:a(({item:t})=>[e(f,{modelValue:t.raw.initial_weight,"onUpdate:modelValue":n=>t.raw.initial_weight=n,modelModifiers:{number:!0},type:"number",min:"0",max:"9999999",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.weight_increment"]:a(({item:t})=>[e(f,{modelValue:t.raw.weight_increment,"onUpdate:modelValue":n=>t.raw.weight_increment=n,modelModifiers:{number:!0},type:"number",min:"0",max:"99999",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.complexity"]:a(({item:t})=>[e(f,{modelValue:t.raw.complexity,"onUpdate:modelValue":n=>t.raw.complexity=n,modelModifiers:{number:!0},type:"number",min:"0",max:"9999",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.delay"]:a(({item:t})=>[e(f,{modelValue:t.raw.delay,"onUpdate:modelValue":n=>t.raw.delay=n,modelModifiers:{number:!0},type:"number",min:"0",max:"99999",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.actions"]:a(({item:t})=>[e(_,{icon:"mdi-delete",title:l(r)("remove"),size:"small",variant:"plain",onClick:n=>B(t.raw.value)},null,8,["title","onClick"])]),_:2},1032,["items"])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(V,{cols:"12",md:"12"},{default:a(()=>[e(_,{type:"submit",color:"primary",class:"mr-3",disabled:l(i).processing},{default:a(()=>[b(c(l(r)("save")),1)]),_:1},8,["disabled"]),e(l(z),{href:l(v)("ticket-allocator.factors.index"),class:"mr-3"},{default:a(()=>[e(_,null,{default:a(()=>[b(c(l(r)("cancel")),1)]),_:1})]),_:1},8,["href"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])]),_:1})],64)}}});export{le as default};
//# sourceMappingURL=CreateEdit-f43a691d.js.map
