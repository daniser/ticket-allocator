import{m as Q,aX as W,aY as ee,aZ as le,a_ as ae,a$ as te,b0 as ne,r as V,aq as R,d as C,b1 as ue,b2 as oe,b3 as se,w as E,n as N,j as ie,aF as U,k as u,a9 as K,b4 as re,aw as w,b5 as ce,b6 as O,aL as ve,b7 as de,t as fe,al as me,aT as pe,b8 as he}from"./app-da4cf41a.js";function Ve(e,r,a){if(r==null)return e;if(Array.isArray(r))throw new Error("Multiple matches is not implemented");return typeof r=="number"&&~r?u(K,null,[u("span",{class:"v-autocomplete__unmask"},[e.substr(0,r)]),u("span",{class:"v-autocomplete__mask"},[e.substr(r,a)]),u("span",{class:"v-autocomplete__unmask"},[e.substr(r+a)])]):e}const ke=Q()({name:"VAutocomplete",props:{search:String,...W({filterKeys:["title"]}),...ee(),...le(ae({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...te({transition:!1})},emits:{"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,r){let{slots:a}=r;const{t:$}=ne(),A=V(),m=V(!1),d=V(!0),S=V(),P=R(e,"menu"),o=C({get:()=>P.value,set:l=>{var t;P.value&&!l&&((t=S.value)!=null&&t.Î¨openChildren)||(P.value=l)}}),{items:x,transformIn:z,transformOut:B}=ue(e),s=R(e,"search",""),c=R(e,"modelValue",[],l=>z(he(l)),l=>{const t=B(l);return e.multiple?t:t[0]??null}),p=oe(),{filteredItems:D,getMatches:j}=se(e,x,C(()=>d.value?void 0:s.value)),y=C(()=>c.value.map(l=>x.value.find(t=>e.valueComparator(t.value,l.value))||l)),T=C(()=>e.hideSelected?D.value.filter(l=>!y.value.some(t=>t.value===l.value)):D.value),L=C(()=>y.value.map(l=>l.props.value)),M=V();function q(l){e.openOnClear&&(o.value=!0),s.value=""}function H(){e.hideNoData&&!x.value.length||e.readonly||p!=null&&p.isReadonly.value||(o.value=!0)}function X(l){var t,v;e.readonly||p!=null&&p.isReadonly.value||(["Enter","ArrowDown","ArrowUp"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"].includes(l.key)&&(o.value=!0),["Escape"].includes(l.key)&&(o.value=!1),["Enter","Escape","Tab"].includes(l.key)&&(d.value=!0),l.key==="ArrowDown"?(t=M.value)==null||t.focus("next"):l.key==="ArrowUp"&&((v=M.value)==null||v.focus("prev")))}function Y(l){s.value=l.target.value}function Z(){m.value&&(d.value=!0)}function G(l){m.value=!0}function J(l){var t;l.relatedTarget==null&&((t=A.value)==null||t.focus())}const k=V(!1);function b(l){if(e.multiple){const t=L.value.findIndex(v=>e.valueComparator(v,l.value));if(t===-1)c.value=[...c.value,l],s.value="";else{const v=[...c.value];v.splice(t,1),c.value=v}}else c.value=[l],k.value=!0,a.selection||(s.value=l.title),o.value=!1,d.value=!0,N(()=>k.value=!1)}return E(m,l=>{var t;l?(k.value=!0,s.value=e.multiple||a.selection?"":String(((t=y.value.at(-1))==null?void 0:t.props.title)??""),d.value=!0,N(()=>k.value=!1)):(o.value=!1,s.value="")}),E(s,l=>{!m.value||k.value||(l&&(o.value=!0),d.value=!l)}),ie(()=>{const l=!!(e.chips||a.chip),t=!!(!e.hideNoData||T.value.length||a.prepend||a.append||a["no-data"]),[v]=U.filterProps(e);return u(U,w({ref:A},v,{modelValue:s.value,"onUpdate:modelValue":n=>{n==null&&(c.value=[])},validationValue:c.externalValue,dirty:c.value.length>0,onInput:Y,class:["v-autocomplete",{"v-autocomplete--active-menu":o.value,"v-autocomplete--chips":!!e.chips,[`v-autocomplete--${e.multiple?"multiple":"single"}`]:!0,"v-autocomplete--selection-slot":!!a.selection}],appendInnerIcon:e.menuIcon,readonly:e.readonly,"onClick:clear":q,"onMousedown:control":H,onFocus:()=>m.value=!0,onBlur:()=>m.value=!1,onKeydown:X}),{...a,default:()=>u(K,null,[u(re,w({ref:S,modelValue:o.value,"onUpdate:modelValue":n=>o.value=n,activator:"parent",contentClass:"v-autocomplete__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Z},e.menuProps),{default:()=>[t&&u(ce,{ref:M,selected:L.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),onFocusin:G,onFocusout:J},{default:()=>{var n,h,_;return[!T.value.length&&!e.hideNoData&&(((n=a["no-data"])==null?void 0:n.call(a))??u(O,{title:$(e.noDataText)},null)),(h=a["prepend-item"])==null?void 0:h.call(a),T.value.map((i,g)=>{var f;return((f=a.item)==null?void 0:f.call(a,{item:i,index:g,props:w(i.props,{onClick:()=>b(i)})}))??u(O,w({key:g},i.props,{onClick:()=>b(i)}),{prepend:F=>{let{isSelected:I}=F;return e.multiple&&!e.hideSelected?u(ve,{modelValue:I,ripple:!1},null):void 0},title:()=>{var F,I;return d.value?i.title:Ve(i.title,(F=j(i))==null?void 0:F.title,((I=s.value)==null?void 0:I.length)??0)}})}),(_=a["append-item"])==null?void 0:_.call(a)]}})]}),y.value.map((n,h)=>{var g;function _(f){f.stopPropagation(),f.preventDefault(),b(n)}const i={"onClick:close":_,modelValue:!0,"onUpdate:modelValue":void 0};return u("div",{key:n.value,class:"v-autocomplete__selection"},[l?a.chip?u(fe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>{var f;return[(f=a.chip)==null?void 0:f.call(a,{item:n,index:h,props:i})]}}):u(de,w({key:"chip",closable:e.closableChips,size:"small",text:n.title},i),null):((g=a.selection)==null?void 0:g.call(a,{item:n,index:h}))??u("span",{class:"v-autocomplete__selection-text"},[n.title,e.multiple&&h<y.value.length-1&&u("span",{class:"v-autocomplete__selection-comma"},[me(",")])])])})])})}),pe({isFocused:m,isPristine:d,menu:o,search:s,filteredItems:D,select:b},A)}});export{ke as V};
//# sourceMappingURL=VAutocomplete-e97cb19e.js.map
