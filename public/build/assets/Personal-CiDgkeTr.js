import{_ as S}from"./Default.vue_vue_type_script_setup_true_lang-D9_jt1Nx.js";import{O as x,L as b,M as U,f as l,Q as O,P as o,R as r,F as k,$ as T,T as $,U as A,_ as y,a0 as D,aU as E,a2 as F,aa as M,ab as H,i,ac as q,S as u,a1 as L,X as g,Y as R,a6 as z,W as G}from"./app-B6_O37Wa.js";import{M as Q,a as W,c as B,f as X,C as Y,g as n,h as Z,j as J,T as K,V as ee}from"./OperatorRepository-CBQ76677.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as te}from"./TransitionGroup-BZBuDYwu.js";import{V as ae}from"./VContainer-DvW6W1l5.js";import{V as oe,a as se}from"./VRow-CQLcbYPk.js";import{V as ne}from"./VTable-Caof9Emx.js";import"./scopeId-BgwUXDgU.js";import"./VGrid-CXMRMfsw.js";import"./VInput-BClGD85j.js";import"./VSelectionControl-D72Al_Sh.js";const le={timestamp:d=>{const s=x(d);return s.isBefore(Date.now(),"day")?`${s.format("L LT")} (${s.fromNow()})`:`${s.format("LT")} (${s.fromNow()})`}},re=["innerHTML"],ie=b({__name:"PersonalTicket",props:{ticket:{},columns:{}},setup(d){U(t=>({"158a04f6":_.value.delay,"3dd12d7e":_.value.duration}));const s=d,c=new Q({linkify:!0}).use(W),m=B(),a=l(()=>O().props.options),v=l(()=>a.value[`${m.value}_threshold`]),p=l(()=>s.ticket[m.value]),h=l(()=>p.value>v.value),_=l(()=>({delay:-p.value+"s",duration:v.value+"s"}));function V(t,f,e=""){const[w,...I]=f.split("|"),C=E(t,w,e);return C===e?C:I.reduce((j,N)=>le[N](j),C)}return(t,f)=>(o(),r("tr",{class:D(["ticket",{overflow:h.value}])},[(o(!0),r(k,null,T(t.columns,([,e])=>(o(),r("td",{key:e},[e==="meta.icon"?(o(),$(A,{key:0,icon:V(t.ticket,e,"mdi-help"),color:"white"},null,8,["icon"])):(o(),r("span",{key:1,class:"text-white",innerHTML:y(c).renderInline(V(t.ticket,e,"-"))},null,8,re))]))),128))],2))}}),ue=P(ie,[["__scopeId","data-v-41c5eddc"]]),ce={class:"font-semibold text-xl text-gray-800 leading-tight"},de=b({__name:"Personal",props:{operator:{},columns:{}},setup(d){const s=d,c=B(),m=l(()=>L(J)),a=l(()=>L(K)),v=X(Z),p=l(()=>m.value.with("tickets",t=>t.with("category").orderBy(c.value,"desc")).first());F(()=>{v.listen(Y.PropsInvalidated,()=>M.reload()).listen(n.Created,a.value.create).listen(n.Closed,a.value.close).listen(n.Bound,a.value.bind).listen(n.Accepted,a.value.accept).listen(n.Unbound,a.value.unbind).listen(n.CategoryChanged,a.value.changeCategory).listen(n.MetaValueSet,a.value.setMetaValue).listen(n.MetaValuesMerged,a.value.mergeMetaValues).listen(n.MetricsAdjusted,a.value.adjustMetrics)});function h(){m.value.save(s.operator)}const _=M.on("navigate",h),V=M.on("success",h);return H(()=>{_(),V()}),(t,f)=>(o(),r(k,null,[i(y(q),{title:t.$t("personal")},null,8,["title"]),i(S,null,{header:u(()=>[g("h2",ce,R(t.$t("personal")),1)]),default:u(()=>[g("div",null,[i(ae,{fluid:""},{default:u(()=>[i(oe,null,{default:u(()=>[i(se,{offset:"10",cols:"2"},{default:u(()=>[i(ee,{modelValue:y(c),"onUpdate:modelValue":f[0]||(f[0]=e=>z(c)?c.value=e:null),"false-value":"weight","true-value":"duration","prepend-icon":"mdi-weight","append-icon":"mdi-clock",class:"d-flex justify-end"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),p.value?(o(),$(ne,{key:0,"fixed-header":"",density:"comfortable",class:"personal-monitor"},{default:u(()=>[g("thead",null,[g("tr",null,[(o(!0),r(k,null,T(t.columns,([e,w])=>(o(),r("th",{key:w},R(e),1))),128))])]),i(y(te),{tag:"tbody",name:"ticket-pool"},{default:u(()=>[(o(!0),r(k,null,T(p.value.tickets,e=>(o(),$(ue,{key:e.uuid,ticket:e,columns:t.columns},null,8,["ticket","columns"]))),128))]),_:1})]),_:1})):G("",!0)])]),_:1})],64))}}),Me=P(de,[["__scopeId","data-v-d9853744"]]);export{Me as default};
//# sourceMappingURL=Personal-CiDgkeTr.js.map
