var Ee=Object.defineProperty;var Ie=(e,t,r)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var S=(e,t,r)=>(Ie(e,typeof t!="symbol"?t+"":t,r),r);import{r as w,x,a2 as Te,aE as je,X as Ne,u as ve,aF as Ae,A as Fe,W as ye,e as _e,aG as xe,b as z,y as De,aH as J}from"./app-9ac6c90e.js";var te;const R=typeof window<"u",he=e=>typeof e=="function",Ce=e=>typeof e=="string",re=()=>+Date.now(),K=()=>{};R&&((te=window==null?void 0:window.navigator)!=null&&te.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function $(e){return typeof e=="function"?e():ve(e)}function we(e,t){function r(...n){return new Promise((o,a)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(o).catch(a)})}return r}const ge=e=>e();function Le(e,t=!0,r=!0,n=!1){let o=0,a,i=!0,u=K,c;const d=()=>{a&&(clearTimeout(a),a=void 0,u(),u=K)};return s=>{const f=$(e),y=Date.now()-o,v=()=>c=s();if(d(),f<=0)return o=Date.now(),v();if(y>f&&(r||!i))o=Date.now(),v();else if(t)return new Promise((p,_)=>{u=n?_:p,a=setTimeout(()=>{o=Date.now(),i=!0,p(v()),d()},f-y)});return!r&&!a&&(a=setTimeout(()=>i=!0,f)),i=!1,c}}function Me(e=ge){const t=w(!0);function r(){t.value=!1}function n(){t.value=!0}return{isActive:t,pause:r,resume:n,eventFilter:(...a)=>{t.value&&e(...a)}}}function ne(e,t=!1,r="Timeout"){return new Promise((n,o)=>{setTimeout(t?()=>o(r):n,e)})}function Re(e){return e}function B(e){return je()?(Ne(e),!0):!1}function U(e){let t=0,r,n;const o=()=>{t-=1,n&&t<=0&&(n.stop(),r=void 0,n=void 0)};return(...a)=>(t+=1,r||(n=Te(!0),r=n.run(()=>e(...a))),B(o),r)}function Be(e,t=200,r=!1,n=!0,o=!1){return we(Le(t,r,n,o),e)}function Dt(e,t=200,r=!0,n=!0){if(t<=0)return e;const o=w(e.value),a=Be(()=>{o.value=e.value},t,r,n);return x(e,()=>a()),o}function We(e,t=!0){Ae()?Fe(e):t?e():ye(e)}function Y(e,t=!1){function r(s,{flush:f="sync",deep:y=!1,timeout:v,throwOnTimeout:p}={}){let _=null;const M=[new Promise(N=>{_=x(e,I=>{s(I)!==t&&(_==null||_(),N(I))},{flush:f,deep:y,immediate:!0})})];return v!=null&&M.push(ne(v,p).then(()=>$(e)).finally(()=>_==null?void 0:_())),Promise.race(M)}function n(s,f){if(!_e(s))return r(I=>I===s,f);const{flush:y="sync",deep:v=!1,timeout:p,throwOnTimeout:_}=f??{};let P=null;const N=[new Promise(I=>{P=x([e,s],([H,Q])=>{t!==(H===Q)&&(P==null||P(),I(H))},{flush:y,deep:v,immediate:!0})})];return p!=null&&N.push(ne(p,_).then(()=>$(e)).finally(()=>(P==null||P(),$(e)))),Promise.race(N)}function o(s){return r(f=>Boolean(f),s)}function a(s){return n(null,s)}function i(s){return n(void 0,s)}function u(s){return r(Number.isNaN,s)}function c(s,f){return r(y=>{const v=Array.from(y);return v.includes(s)||v.includes($(s))},f)}function d(s){return l(1,s)}function l(s=1,f){let y=-1;return r(()=>(y+=1,y>=s),f)}return Array.isArray($(e))?{toMatch:r,toContains:c,changed:d,changedTimes:l,get not(){return Y(e,!t)}}:{toMatch:r,toBe:n,toBeTruthy:o,toBeNull:a,toBeNaN:u,toBeUndefined:i,changed:d,changedTimes:l,get not(){return Y(e,!t)}}}function oe(e){return Y(e)}function Ve(e,t=1e3,r={}){const{immediate:n=!0,immediateCallback:o=!1}=r;let a=null;const i=w(!1);function u(){a&&(clearInterval(a),a=null)}function c(){i.value=!1,u()}function d(){ve(t)<=0||(i.value=!0,o&&e(),u(),a=setInterval(e,$(t)))}if(n&&R&&d(),_e(t)||he(t)){const l=x(t,()=>{i.value&&R&&d()});B(l)}return B(c),{isActive:i,pause:c,resume:d}}var ae=Object.getOwnPropertySymbols,He=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable,qe=(e,t)=>{var r={};for(var n in e)He.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&ae)for(var n of ae(e))t.indexOf(n)<0&&Qe.call(e,n)&&(r[n]=e[n]);return r};function Je(e,t,r={}){const n=r,{eventFilter:o=ge}=n,a=qe(n,["eventFilter"]);return x(e,we(o,t),a)}var Ue=Object.defineProperty,Xe=Object.defineProperties,ze=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable,ie=(e,t,r)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ke=(e,t)=>{for(var r in t||(t={}))Oe.call(t,r)&&ie(e,r,t[r]);if(q)for(var r of q(t))Pe.call(t,r)&&ie(e,r,t[r]);return e},Ye=(e,t)=>Xe(e,ze(t)),ke=(e,t)=>{var r={};for(var n in e)Oe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&q)for(var n of q(e))t.indexOf(n)<0&&Pe.call(e,n)&&(r[n]=e[n]);return r};function Ge(e,t,r={}){const n=r,{eventFilter:o}=n,a=ke(n,["eventFilter"]),{eventFilter:i,pause:u,resume:c,isActive:d}=Me(o);return{stop:Je(e,t,Ye(Ke({},a),{eventFilter:i})),pause:u,resume:c,isActive:d}}function k(e){var t;const r=$(e);return(t=r==null?void 0:r.$el)!=null?t:r}const D=R?window:void 0,Ze=R?window.document:void 0;function T(...e){let t,r,n,o;if(Ce(e[0])||Array.isArray(e[0])?([r,n,o]=e,t=D):[t,r,n,o]=e,!t)return K;Array.isArray(r)||(r=[r]),Array.isArray(n)||(n=[n]);const a=[],i=()=>{a.forEach(l=>l()),a.length=0},u=(l,s,f)=>(l.addEventListener(s,f,o),()=>l.removeEventListener(s,f,o)),c=x(()=>k(t),l=>{i(),l&&a.push(...r.flatMap(s=>n.map(f=>u(l,s,f))))},{immediate:!0,flush:"post"}),d=()=>{c(),i()};return B(d),d}function et(e,t=!1){const r=w(),n=()=>r.value=Boolean(e());return n(),We(n,t),r}const G=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Z="__vueuse_ssr_handlers__";G[Z]=G[Z]||{};const tt=G[Z];function rt(e,t){return tt[e]||t}function nt(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}var ot=Object.defineProperty,se=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable,ue=(e,t,r)=>t in e?ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,le=(e,t)=>{for(var r in t||(t={}))at.call(t,r)&&ue(e,r,t[r]);if(se)for(var r of se(t))it.call(t,r)&&ue(e,r,t[r]);return e};const st={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}};function ut(e,t,r,n={}){var o;const{flush:a="pre",deep:i=!0,listenToStorageChanges:u=!0,writeDefaults:c=!0,mergeDefaults:d=!1,shallow:l,window:s=D,eventFilter:f,onError:y=m=>{console.error(m)}}=n,v=(l?xe:w)(t);if(!r)try{r=rt("getDefaultStorage",()=>{var m;return(m=D)==null?void 0:m.localStorage})()}catch(m){y(m)}if(!r)return v;const p=$(t),_=nt(p),P=(o=n.serializer)!=null?o:st[_],{pause:M,resume:N}=Ge(v,()=>I(v.value),{flush:a,deep:i,eventFilter:f});return s&&u&&T(s,"storage",Q),Q(),v;function I(m){try{if(m==null)r.removeItem(e);else{const h=P.write(m),A=r.getItem(e);A!==h&&(r.setItem(e,h),s&&(s==null||s.dispatchEvent(new StorageEvent("storage",{key:e,oldValue:A,newValue:h,storageArea:r}))))}}catch(h){y(h)}}function H(m){const h=m?m.newValue:r.getItem(e);if(h==null)return c&&p!==null&&r.setItem(e,P.write(p)),p;if(!m&&d){const A=P.read(h);return he(d)?d(A,p):_==="object"&&!Array.isArray(A)?le(le({},p),A):A}else return typeof h!="string"?h:P.read(h)}function Q(m){if(!(m&&m.storageArea!==r)){if(m&&m.key==null){v.value=p;return}if(!(m&&m.key!==e)){M();try{v.value=H(m)}catch(h){y(h)}finally{m?ye(N):N()}}}}}function lt(e,t={}){const{immediate:r=!0,window:n=D}=t,o=w(!1);let a=0,i=null;function u(l){if(!o.value||!n)return;const s=l-a;e({delta:s,timestamp:l}),a=l,i=n.requestAnimationFrame(u)}function c(){!o.value&&n&&(o.value=!0,i=n.requestAnimationFrame(u))}function d(){o.value=!1,i!=null&&n&&(n.cancelAnimationFrame(i),i=null)}return r&&c(),B(d),{isActive:o,pause:d,resume:c}}function ee(e,t,r={}){const{window:n=D}=r;return ut(e,t,n==null?void 0:n.localStorage,r)}function Ct(e={}){const{type:t="page",touch:r=!0,resetOnTouchEnds:n=!1,initialValue:o={x:0,y:0},window:a=D,eventFilter:i}=e,u=w(o.x),c=w(o.y),d=w(null),l=p=>{t==="page"?(u.value=p.pageX,c.value=p.pageY):t==="client"?(u.value=p.clientX,c.value=p.clientY):t==="movement"&&(u.value=p.movementX,c.value=p.movementY),d.value="mouse"},s=()=>{u.value=o.x,c.value=o.y},f=p=>{if(p.touches.length>0){const _=p.touches[0];t==="page"?(u.value=_.pageX,c.value=_.pageY):t==="client"&&(u.value=_.clientX,c.value=_.clientY),d.value="touch"}},y=p=>i===void 0?l(p):i(()=>l(p),{}),v=p=>i===void 0?f(p):i(()=>f(p),{});return a&&(T(a,"mousemove",y,{passive:!0}),T(a,"dragover",y,{passive:!0}),r&&t!=="movement"&&(T(a,"touchstart",v,{passive:!0}),T(a,"touchmove",v,{passive:!0}),n&&T(a,"touchend",s,{passive:!0}))),{x:u,y:c,sourceType:d}}function Lt(e,t={}){const{document:r=Ze,pointerLockOptions:n}=t,o=et(()=>r&&"pointerLockElement"in r),a=w(),i=w();let u;o.value&&(T(r,"pointerlockchange",()=>{var l;const s=(l=r.pointerLockElement)!=null?l:a.value;u&&s===u&&(a.value=r.pointerLockElement,a.value||(u=i.value=null))}),T(r,"pointerlockerror",()=>{var l;const s=(l=r.pointerLockElement)!=null?l:a.value;if(u&&s===u){const f=r.pointerLockElement?"release":"acquire";throw new Error(`Failed to ${f} pointer lock.`)}}));async function c(l,s){var f;if(!o.value)throw new Error("Pointer Lock API is not supported by your browser.");if(i.value=l instanceof Event?l.currentTarget:null,u=l instanceof Event?(f=k(e))!=null?f:i.value:k(l),!u)throw new Error("Target element undefined.");return u.requestPointerLock(s??n),await oe(a).toBe(u)}async function d(){return a.value?(r.exitPointerLock(),await oe(a).toBeNull(),!0):!1}return{isSupported:o,element:a,triggerElement:i,lock:c,unlock:d}}var ce;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(ce||(ce={}));var ct=Object.defineProperty,fe=Object.getOwnPropertySymbols,ft=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,pe=(e,t,r)=>t in e?ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dt=(e,t)=>{for(var r in t||(t={}))ft.call(t,r)&&pe(e,r,t[r]);if(fe)for(var r of fe(t))pt.call(t,r)&&pe(e,r,t[r]);return e};function mt(e={}){const{controls:t=!1,offset:r=0,immediate:n=!0,interval:o="requestAnimationFrame",callback:a}=e,i=w(re()+r),u=()=>i.value=re()+r,c=a?()=>{u(),a(i.value)}:u,d=o==="requestAnimationFrame"?lt(c,{immediate:n}):Ve(c,o,{immediate:n});return t?dt({timestamp:i},d):i}var vt=Object.defineProperty,de=Object.getOwnPropertySymbols,yt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable,me=(e,t,r)=>t in e?vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ht=(e,t)=>{for(var r in t||(t={}))yt.call(t,r)&&me(e,r,t[r]);if(de)for(var r of de(t))_t.call(t,r)&&me(e,r,t[r]);return e};const wt={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};ht({linear:Re},wt);const Mt=U(()=>{const e=ee("ticket-allocator.options",[]),t=z(()=>e.value.includes("hide-empty")),r=z(()=>e.value.includes("alt-info")),n=z(()=>e.value.includes("unlocked"));return De({all:e,hideEmpty:t,altInfo:r,unlocked:n})}),Rt=U(()=>ee("ticket-allocator.display-mode","weight")),Bt=U(()=>ee("ticket-allocator.operator-sorting","asc")),gt=U(()=>mt({interval:1e3}));function X(e){return(t,r)=>{const n=t.$self();n.setRegistry(r,()=>n.attr(e))}}function W(e,t={}){return(r,n)=>{const o=r.$self();o.setRegistry(n,()=>{const a=o.string(e);return t.notNullable&&a.notNullable(),a})}}function L(e,t={}){return(r,n)=>{const o=r.$self();o.setRegistry(n,()=>{const a=o.number(e);return t.notNullable&&a.notNullable(),a})}}function be(e,t={}){return(r,n)=>{const o=r.$self();o.setRegistry(n,()=>{const a=o.boolean(e);return t.notNullable&&a.notNullable(),a})}}function V(){return(e,t)=>{const r=e.$self();r.setRegistry(t,()=>r.uid())}}function Ot(e,t,r){return(n,o)=>{const a=n.$self();a.setRegistry(o,()=>a.belongsTo(e(),t,r))}}function Se(e,t,r,n,o,a){return(i,u)=>{const c=i.$self();c.setRegistry(u,()=>c.belongsToMany(e(),t(),r,n,o,a))}}function Pt(e,t,r){return(n,o)=>{const a=n.$self();a.setRegistry(o,()=>a.hasMany(e(),t,r))}}function bt(e){return(t,r)=>{t.$self().setFieldDeleteMode(r,e)}}var St=Object.defineProperty,$t=Object.getOwnPropertyDescriptor,$e=(e,t,r,n)=>{for(var o=n>1?void 0:n?$t(t,r):t,a=e.length-1,i;a>=0;a--)(i=e[a])&&(o=(n?i(t,r,o):i(o))||o);return n&&o&&St(t,r,o),o};class C extends J{}S(C,"entity","teamOperator"),S(C,"primaryKey",["team_uuid","operator_uuid"]);$e([V()],C.prototype,"team_uuid",2);$e([V()],C.prototype,"operator_uuid",2);var Et=Object.defineProperty,It=Object.getOwnPropertyDescriptor,F=(e,t,r,n)=>{for(var o=n>1?void 0:n?It(t,r):t,a=e.length-1,i;a>=0;a--)(i=e[a])&&(o=(n?i(t,r,o):i(o))||o);return n&&o&&Et(t,r,o),o};class b extends J{}S(b,"entity","operatorTeams"),S(b,"primaryKey","uuid");F([V()],b.prototype,"uuid",2);F([W("")],b.prototype,"name",2);F([W("")],b.prototype,"description",2);F([X()],b.prototype,"created_at",2);F([X()],b.prototype,"updated_at",2);F([X()],b.prototype,"deleted_at",2);F([Se(()=>g,()=>C,"team_uuid","operator_uuid")],b.prototype,"operators",2);var Tt=Object.defineProperty,jt=Object.getOwnPropertyDescriptor,j=(e,t,r,n)=>{for(var o=n>1?void 0:n?jt(t,r):t,a=e.length-1,i;a>=0;a--)(i=e[a])&&(o=(n?i(t,r,o):i(o))||o);return n&&o&&Tt(t,r,o),o};class g extends J{get ticket_count(){return this.tickets.length}get free_slots(){return this.ticket_limit!==null?Math.max(0,this.ticket_limit-this.ticket_count):null}get total_complexity(){return this.tickets.reduce((t,{complexity:r})=>t+r,0)}get free_complexity(){return this.complexity_limit!==null?Math.max(0,this.complexity_limit-this.total_complexity):null}}S(g,"entity","operators"),S(g,"primaryKey","uuid");j([V()],g.prototype,"uuid",2);j([W("")],g.prototype,"name",2);j([be(!1)],g.prototype,"online",2);j([be(!1)],g.prototype,"ready",2);j([L(null)],g.prototype,"ticket_limit",2);j([L(null)],g.prototype,"complexity_limit",2);j([Se(()=>b,()=>C,"operator_uuid","team_uuid")],g.prototype,"teams",2);j([Pt(()=>O,"handler_uuid"),bt("set null")],g.prototype,"tickets",2);var Nt=Object.defineProperty,At=Object.getOwnPropertyDescriptor,E=(e,t,r,n)=>{for(var o=n>1?void 0:n?At(t,r):t,a=e.length-1,i;a>=0;a--)(i=e[a])&&(o=(n?i(t,r,o):i(o))||o);return n&&o&&Nt(t,r,o),o};class O extends J{get duration(){return Math.round((gt().value-new Date(this.created_at).getTime())/1e3)}get weight(){return this.initial_weight+this.weight_increment*this.duration}}S(O,"entity","tickets"),S(O,"primaryKey","uuid");E([V()],O.prototype,"uuid",2);E([W("")],O.prototype,"category_uuid",2);E([W(null)],O.prototype,"handler_uuid",2);E([L(0)],O.prototype,"initial_weight",2);E([L(0)],O.prototype,"weight_increment",2);E([L(0)],O.prototype,"complexity",2);E([L(0)],O.prototype,"delay",2);E([X()],O.prototype,"created_at",2);E([Ot(()=>g,"handler_uuid")],O.prototype,"handler",2);export{g as O,O as T,Rt as a,Lt as b,Ct as c,Mt as d,Bt as e,b as f,R as i,Dt as r,T as u};
