{"version":3,"file":"Index-upJ4lCaM.js","sources":["../../../node_modules/vuetify/lib/components/VDialog/VDialog.mjs","../../../resources/js/pages/Factor/Index.vue"],"sourcesContent":["import { mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\";\n// Styles\nimport \"./VDialog.css\";\n\n// Components\nimport { VDialogTransition } from \"../transitions/index.mjs\";\nimport { VDefaultsProvider } from \"../VDefaultsProvider/index.mjs\";\nimport { VOverlay } from \"../VOverlay/index.mjs\";\nimport { makeVOverlayProps } from \"../VOverlay/VOverlay.mjs\"; // Composables\nimport { forwardRefs } from \"../../composables/forwardRefs.mjs\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.mjs\";\nimport { useScopeId } from \"../../composables/scopeId.mjs\"; // Utilities\nimport { computed, mergeProps, nextTick, ref, watch } from 'vue';\nimport { focusableChildren, genericComponent, IN_BROWSER, propsFactory, useRender } from \"../../util/index.mjs\"; // Types\nexport const makeVDialogProps = propsFactory({\n  fullscreen: Boolean,\n  retainFocus: {\n    type: Boolean,\n    default: true\n  },\n  scrollable: Boolean,\n  ...makeVOverlayProps({\n    origin: 'center center',\n    scrollStrategy: 'block',\n    transition: {\n      component: VDialogTransition\n    },\n    zIndex: 2400\n  })\n}, 'VDialog');\nexport const VDialog = genericComponent()({\n  name: 'VDialog',\n  props: makeVDialogProps(),\n  emits: {\n    'update:modelValue': value => true\n  },\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const isActive = useProxiedModel(props, 'modelValue');\n    const {\n      scopeId\n    } = useScopeId();\n    const overlay = ref();\n    function onFocusin(e) {\n      const before = e.relatedTarget;\n      const after = e.target;\n      if (before !== after && overlay.value?.contentEl &&\n      // We're the topmost dialog\n      overlay.value?.globalTop &&\n      // It isn't the document or the dialog body\n      ![document, overlay.value.contentEl].includes(after) &&\n      // It isn't inside the dialog body\n      !overlay.value.contentEl.contains(after)) {\n        const focusable = focusableChildren(overlay.value.contentEl);\n        if (!focusable.length) return;\n        const firstElement = focusable[0];\n        const lastElement = focusable[focusable.length - 1];\n        if (before === firstElement) {\n          lastElement.focus();\n        } else {\n          firstElement.focus();\n        }\n      }\n    }\n    if (IN_BROWSER) {\n      watch(() => isActive.value && props.retainFocus, val => {\n        val ? document.addEventListener('focusin', onFocusin) : document.removeEventListener('focusin', onFocusin);\n      }, {\n        immediate: true\n      });\n    }\n    watch(isActive, async val => {\n      await nextTick();\n      if (val) {\n        overlay.value.contentEl?.focus({\n          preventScroll: true\n        });\n      } else {\n        overlay.value.activatorEl?.focus({\n          preventScroll: true\n        });\n      }\n    });\n    const activatorProps = computed(() => mergeProps({\n      'aria-haspopup': 'dialog',\n      'aria-expanded': String(isActive.value)\n    }, props.activatorProps));\n    useRender(() => {\n      const overlayProps = VOverlay.filterProps(props);\n      return _createVNode(VOverlay, _mergeProps({\n        \"ref\": overlay,\n        \"class\": ['v-dialog', {\n          'v-dialog--fullscreen': props.fullscreen,\n          'v-dialog--scrollable': props.scrollable\n        }, props.class],\n        \"style\": props.style\n      }, overlayProps, {\n        \"modelValue\": isActive.value,\n        \"onUpdate:modelValue\": $event => isActive.value = $event,\n        \"aria-modal\": \"true\",\n        \"activatorProps\": activatorProps.value,\n        \"role\": \"dialog\"\n      }, scopeId), {\n        activator: slots.activator,\n        default: function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n          return _createVNode(VDefaultsProvider, {\n            \"root\": \"VDialog\"\n          }, {\n            default: () => [slots.default?.(...args)]\n          });\n        }\n      });\n    });\n    return forwardRefs({}, overlay);\n  }\n});\n//# sourceMappingURL=VDialog.mjs.map","<template>\n    <Head :title=\"$t('factors')\" />\n\n    <DefaultLayout>\n        <template #header>\n            <h2 class=\"font-semibold text-xl text-gray-800 leading-tight\">{{ $t(\"factors\") }}</h2>\n        </template>\n\n        <div>\n            <v-data-table :headers=\"headers\" :items=\"factors\">\n                <template #top>\n                    <v-toolbar flat>\n                        <v-toolbar-title>{{ $t(\"factors\") }}</v-toolbar-title>\n                        <v-divider class=\"mx-4\" inset vertical />\n                        <v-spacer />\n                        <v-dialog v-model=\"dialog\" max-width=\"500px\">\n                            <template #activator=\"{ props }\">\n                                <v-btn color=\"primary\" dark v-bind=\"props\">{{ $t(\"new_factor\") }}</v-btn>\n                            </template>\n                            <v-card>\n                                <v-card-title>\n                                    <span class=\"text-h5\">{{ $t(\"choose_factor_type\") }}</span>\n                                </v-card-title>\n                                <v-card-text>\n                                    <v-container>\n                                        <v-row>\n                                            <v-col cols=\"12\" md=\"12\">\n                                                <v-select\n                                                    v-model=\"factorType\"\n                                                    :label=\"$t('factor_type')\"\n                                                    :items=\"factorDictionary\"\n                                                    item-title=\"name\"\n                                                    item-value=\"alias\"\n                                                />\n                                            </v-col>\n                                        </v-row>\n                                    </v-container>\n                                </v-card-text>\n                                <v-card-actions>\n                                    <v-spacer />\n                                    <v-btn color=\"primary\" dark @click=\"close\">{{ $t(\"cancel\") }}</v-btn>\n                                    <v-btn\n                                        :key=\"factorType\"\n                                        :to=\"route('ticket-allocator.factors.create', { type: factorType })\"\n                                        :disabled=\"!factorType\"\n                                        color=\"primary\"\n                                        dark\n                                        @click=\"close\"\n                                    >\n                                        {{ $t(\"create\") }}\n                                    </v-btn>\n                                </v-card-actions>\n                            </v-card>\n                        </v-dialog>\n                    </v-toolbar>\n                </template>\n                <template #[`item.active`]=\"{ item }\">\n                    <Link\n                        as=\"span\"\n                        :href=\"route('ticket-allocator.factors.update', item.uuid)\"\n                        method=\"patch\"\n                        :data=\"{ active: !!item.deleted_at }\"\n                    >\n                        <v-checkbox-btn :model-value=\"!item.deleted_at\" />\n                    </Link>\n                </template>\n                <template #[`item.type.name`]=\"{ item }\">\n                    <span :class=\"{ italic: item.type.excluded }\">{{ item.type.name }}</span>\n                </template>\n                <template #[`item.name`]=\"{ item }\">\n                    <span :class=\"{ italic: item.type.excluded && !item.display_name }\">\n                        {{ item.name }}\n                    </span>\n                </template>\n                <template #[`item.actions`]=\"{ item }\">\n                    <v-btn\n                        :to=\"route('ticket-allocator.factors.edit', item.uuid)\"\n                        icon=\"mdi-pencil\"\n                        :title=\"$t('edit')\"\n                        size=\"small\"\n                        variant=\"plain\"\n                    />\n                    <v-btn-ex\n                        :to=\"route('ticket-allocator.factors.raise-priority', item.uuid)\"\n                        method=\"put\"\n                        icon=\"mdi-arrow-up-thick\"\n                        :title=\"$t('raise_priority')\"\n                        size=\"small\"\n                        variant=\"plain\"\n                    />\n                    <v-btn-ex\n                        :to=\"route('ticket-allocator.factors.lower-priority', item.uuid)\"\n                        method=\"put\"\n                        icon=\"mdi-arrow-down-thick\"\n                        :title=\"$t('lower_priority')\"\n                        size=\"small\"\n                        variant=\"plain\"\n                    />\n                    <v-btn-ex\n                        :to=\"route('ticket-allocator.factors.destroy', item.uuid)\"\n                        method=\"delete\"\n                        icon=\"mdi-delete\"\n                        :title=\"$t('remove')\"\n                        size=\"small\"\n                        variant=\"plain\"\n                    />\n                </template>\n            </v-data-table>\n        </div>\n    </DefaultLayout>\n</template>\n\n<script setup lang=\"ts\">\nimport DefaultLayout from \"@/layouts/Default.vue\";\nimport { ref, computed } from \"vue\";\nimport { Head, Link } from \"@inertiajs/vue3\";\nimport type { Factor, FactorType } from \"@/types\";\nimport { useI18n } from \"vue-i18n\";\nimport route from \"ziggy-js\";\n\ndefineProps<{\n    factors: Factor[];\n    factorDictionary: FactorType[];\n}>();\n\nconst { t } = useI18n();\n\nconst headers = computed(() => [\n    { title: t(\"active\"), key: \"active\", sortable: false },\n    { title: t(\"type\"), key: \"type.name\", sortable: false },\n    { title: t(\"name\"), key: \"name\", sortable: false },\n    { title: t(\"description\"), key: \"description\", sortable: false },\n    { title: t(\"actions\"), key: \"actions\", sortable: false },\n]);\n\nconst dialog = ref();\nconst factorType = ref();\n\nfunction close() {\n    dialog.value = null;\n}\n</script>\n"],"names":["makeVDialogProps","propsFactory","makeVOverlayProps","VDialogTransition","VDialog","genericComponent","value","props","_ref","slots","isActive","useProxiedModel","scopeId","useScopeId","overlay","ref","onFocusin","e","before","after","_a","_b","focusable","focusableChildren","firstElement","lastElement","IN_BROWSER","watch","val","nextTick","activatorProps","computed","mergeProps","useRender","overlayProps","VOverlay","_createVNode","_mergeProps","$event","_len","args","_key","VDefaultsProvider","forwardRefs","t","useI18n","headers","dialog","factorType","close"],"mappings":"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","x_google_ignoreList":[0]}