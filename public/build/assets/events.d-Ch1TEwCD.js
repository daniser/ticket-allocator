var Ne=Object.defineProperty;var Te=(e,n,t)=>n in e?Ne(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var y=(e,n,t)=>Te(e,typeof n!="symbol"?n+"":n,t);import{V as Re}from"./VGrid-DntHE9og.js";import{p as Be,g as Le,D as me,aE as je,r as E,ak as Ie,f as H,aL as We,j as Ue,aM as qe,i as P,C as he,F as He,al as ze,W as Je,aJ as Ke,aW as Xe,aX as Ye,aY as Ge,aZ as Qe,$ as Ze,a3 as Se,y as ne,a_ as ke,w as X,a7 as Ce,a$ as Me,s as et,ah as tt,aO as nt,ab as rt,aa as ot,b0 as it,b1 as at,b2 as K}from"./app-DiUsk6-n.js";import{m as st,u as ut,b as ye}from"./VTextField-CeDlu0Jq.js";import{a as lt,b as ve}from"./VCheckboxBtn-D8UOSSiR.js";const ct=Be({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...st(),...lt()},"VSwitch"),Gt=Le()({name:"VSwitch",inheritAttrs:!1,props:ct(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,n){let{attrs:t,slots:o}=n;const r=me(e,"indeterminate"),i=me(e,"modelValue"),{loaderClasses:a}=je(e),{isFocused:d,focus:u,blur:l}=ut(e),c=E(),s=Ie&&window.matchMedia("(forced-colors: active)").matches,m=H(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),h=We(),b=H(()=>e.id||`switch-${h}`);function S(){r.value&&(r.value=!1)}function v(w){var C,x;w.stopPropagation(),w.preventDefault(),(x=(C=c.value)==null?void 0:C.input)==null||x.click()}return Ue(()=>{const[w,C]=qe(t),x=ye.filterProps(e),A=ve.filterProps(e);return P(ye,he({class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":r.value},a.value,e.class]},w,x,{modelValue:i.value,"onUpdate:modelValue":f=>i.value=f,id:b.value,focused:d.value,style:e.style}),{...o,default:f=>{let{id:F,messagesId:oe,isDisabled:q,isReadonly:ie,isValid:p}=f;const g={model:i,isValid:p};return P(ve,he({ref:c},A,{modelValue:i.value,"onUpdate:modelValue":[k=>i.value=k,S],id:F.value,"aria-describedby":oe.value,type:"checkbox","aria-checked":r.value?"mixed":void 0,disabled:q.value,readonly:ie.value,onFocus:u,onBlur:l},C),{...o,default:k=>{let{backgroundColorClasses:ae,backgroundColorStyles:R}=k;return P("div",{class:["v-switch__track",s?void 0:ae.value],style:R.value,onClick:v},[o["track-true"]&&P("div",{key:"prepend",class:"v-switch__track-true"},[o["track-true"](g)]),o["track-false"]&&P("div",{key:"append",class:"v-switch__track-false"},[o["track-false"](g)])])},input:k=>{let{inputNode:ae,icon:R,backgroundColorClasses:Oe,backgroundColorStyles:De}=k;return P(He,null,[ae,P("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":R||e.loading},e.inset||s?void 0:Oe.value],style:e.inset?void 0:De.value},[o.thumb?P(ze,{defaults:{VIcon:{icon:R,size:"x-small"}}},{default:()=>[o.thumb({...g,icon:R})]}):P(Re,null,{default:()=>[e.loading?P(Ke,{name:"v-switch",active:!0,color:p.value===!1?void 0:m.value},{default:se=>o.loader?o.loader(se):P(Xe,{active:se.isActive,color:se.color,indeterminate:!0,size:"16",width:"2"},null)}):R&&P(Je,{key:String(R),icon:R,size:"x-small"},null)]})])])}})}})}),{}}});function Y(e){return Ge()?(Qe(e),!0):!1}function ce(e){let n=0,t,o;const r=()=>{n-=1,o&&n<=0&&(o.stop(),t=void 0,o=void 0)};return(...i)=>(n+=1,o||(o=Ye(!0),t=o.run(()=>e(...i))),Y(r),t)}function N(e){return typeof e=="function"?e():Ze(e)}const re=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const dt=Object.prototype.toString,ft=e=>dt.call(e)==="[object Object]",ge=()=>+Date.now(),pt=()=>{};function mt(e,n){function t(...o){return new Promise((r,i)=>{Promise.resolve(e(()=>n.apply(this,o),{fn:n,thisArg:this,args:o})).then(r).catch(i)})}return t}const xe=e=>e();function ht(e=xe){const n=E(!0);function t(){n.value=!1}function o(){n.value=!0}const r=(...i)=>{n.value&&e(...i)};return{isActive:ke(n),pause:t,resume:o,eventFilter:r}}function we(e,n=!1,t="Timeout"){return new Promise((o,r)=>{setTimeout(n?()=>r(t):o,e)})}function yt(e){return Me()}function vt(e,n,t={}){const{eventFilter:o=xe,...r}=t;return X(e,mt(o,n),r)}function gt(e,n,t={}){const{eventFilter:o,...r}=t,{eventFilter:i,pause:a,resume:d,isActive:u}=ht(o);return{stop:vt(e,n,{...r,eventFilter:i}),pause:a,resume:d,isActive:u}}function wt(e,n=!0,t){yt()?Se(e,t):n?e():ne(e)}function ue(e,n=!1){function t(s,{flush:m="sync",deep:h=!1,timeout:b,throwOnTimeout:S}={}){let v=null;const C=[new Promise(x=>{v=X(e,A=>{s(A)!==n&&(v?v():ne(()=>v==null?void 0:v()),x(A))},{flush:m,deep:h,immediate:!0})})];return b!=null&&C.push(we(b,S).then(()=>N(e)).finally(()=>v==null?void 0:v())),Promise.race(C)}function o(s,m){if(!Ce(s))return t(A=>A===s,m);const{flush:h="sync",deep:b=!1,timeout:S,throwOnTimeout:v}=m??{};let w=null;const x=[new Promise(A=>{w=X([e,s],([f,F])=>{n!==(f===F)&&(w?w():ne(()=>w==null?void 0:w()),A(f))},{flush:h,deep:b,immediate:!0})})];return S!=null&&x.push(we(S,v).then(()=>N(e)).finally(()=>(w==null||w(),N(e)))),Promise.race(x)}function r(s){return t(m=>!!m,s)}function i(s){return o(null,s)}function a(s){return o(void 0,s)}function d(s){return t(Number.isNaN,s)}function u(s,m){return t(h=>{const b=Array.from(h);return b.includes(s)||b.includes(N(s))},m)}function l(s){return c(1,s)}function c(s=1,m){let h=-1;return t(()=>(h+=1,h>=s),m)}return Array.isArray(N(e))?{toMatch:t,toContains:u,changed:l,changedTimes:c,get not(){return ue(e,!n)}}:{toMatch:t,toBe:o,toBeTruthy:r,toBeNull:i,toBeNaN:d,toBeUndefined:a,changed:l,changedTimes:c,get not(){return ue(e,!n)}}}function _e(e){return ue(e)}function _t(e,n=1e3,t={}){const{immediate:o=!0,immediateCallback:r=!1}=t;let i=null;const a=E(!1);function d(){i&&(clearInterval(i),i=null)}function u(){a.value=!1,d()}function l(){const c=N(n);c<=0||(a.value=!0,r&&e(),d(),i=setInterval(e,c))}if(o&&re&&l(),Ce(n)||typeof n=="function"){const c=X(n,()=>{a.value&&re&&l()});Y(c)}return Y(u),{isActive:a,pause:u,resume:l}}const z=re?window:void 0,bt=re?window.document:void 0;function le(e){var n;const t=N(e);return(n=t==null?void 0:t.$el)!=null?n:t}function B(...e){let n,t,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,o,r]=e,n=z):[n,t,o,r]=e,!n)return pt;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const i=[],a=()=>{i.forEach(c=>c()),i.length=0},d=(c,s,m,h)=>(c.addEventListener(s,m,h),()=>c.removeEventListener(s,m,h)),u=X(()=>[le(n),N(r)],([c,s])=>{if(a(),!c)return;const m=ft(s)?{...s}:s;i.push(...t.flatMap(h=>o.map(b=>d(c,h,b,m))))},{immediate:!0,flush:"post"}),l=()=>{u(),a()};return Y(l),l}function St(){const e=E(!1),n=Me();return n&&Se(()=>{e.value=!0},n),e}function kt(e){const n=St();return H(()=>(n.value,!!e()))}function Ct(e,n={}){const{immediate:t=!0,fpsLimit:o=void 0,window:r=z}=n,i=E(!1),a=o?1e3/o:null;let d=0,u=null;function l(m){if(!i.value||!r)return;d||(d=m);const h=m-d;if(a&&h<a){u=r.requestAnimationFrame(l);return}d=m,e({delta:h,timestamp:m}),u=r.requestAnimationFrame(l)}function c(){!i.value&&r&&(i.value=!0,d=0,u=r.requestAnimationFrame(l))}function s(){i.value=!1,u!=null&&r&&(r.cancelAnimationFrame(u),u=null)}return t&&c(),Y(s),{isActive:ke(i),pause:s,resume:c}}const Q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Z="__vueuse_ssr_handlers__",Mt=xt();function xt(){return Z in Q||(Q[Z]=Q[Z]||{}),Q[Z]}function At(e,n){return Mt[e]||n}function Pt(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Et={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},be="vueuse-storage";function Vt(e,n,t,o={}){var r;const{flush:i="pre",deep:a=!0,listenToStorageChanges:d=!0,writeDefaults:u=!0,mergeDefaults:l=!1,shallow:c,window:s=z,eventFilter:m,onError:h=p=>{console.error(p)},initOnMounted:b}=o,S=(c?et:E)(typeof n=="function"?n():n);if(!t)try{t=At("getDefaultStorage",()=>{var p;return(p=z)==null?void 0:p.localStorage})()}catch(p){h(p)}if(!t)return S;const v=N(n),w=Pt(v),C=(r=o.serializer)!=null?r:Et[w],{pause:x,resume:A}=gt(S,()=>F(S.value),{flush:i,deep:a,eventFilter:m});s&&d&&wt(()=>{t instanceof Storage?B(s,"storage",q):B(s,be,ie),b&&q()}),b||q();function f(p,g){if(s){const k={key:e,oldValue:p,newValue:g,storageArea:t};s.dispatchEvent(t instanceof Storage?new StorageEvent("storage",k):new CustomEvent(be,{detail:k}))}}function F(p){try{const g=t.getItem(e);if(p==null)f(g,null),t.removeItem(e);else{const k=C.write(p);g!==k&&(t.setItem(e,k),f(g,k))}}catch(g){h(g)}}function oe(p){const g=p?p.newValue:t.getItem(e);if(g==null)return u&&v!=null&&t.setItem(e,C.write(v)),v;if(!p&&l){const k=C.read(g);return typeof l=="function"?l(k,v):w==="object"&&!Array.isArray(k)?{...v,...k}:k}else return typeof g!="string"?g:C.read(g)}function q(p){if(!(p&&p.storageArea!==t)){if(p&&p.key==null){S.value=v;return}if(!(p&&p.key!==e)){x();try{(p==null?void 0:p.newValue)!==C.write(S.value)&&(S.value=oe(p))}catch(g){h(g)}finally{p?ne(A):A()}}}}function ie(p){q(p.detail)}return S}function Ae(e,n,t={}){const{window:o=z}=t;return Vt(e,n,o==null?void 0:o.localStorage,t)}const $t={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof Touch?null:[e.movementX,e.movementY]};function Qt(e={}){const{type:n="page",touch:t=!0,resetOnTouchEnds:o=!1,initialValue:r={x:0,y:0},window:i=z,target:a=i,scroll:d=!0,eventFilter:u}=e;let l=null;const c=E(r.x),s=E(r.y),m=E(null),h=typeof n=="function"?n:$t[n],b=f=>{const F=h(f);l=f,F&&([c.value,s.value]=F,m.value="mouse")},S=f=>{if(f.touches.length>0){const F=h(f.touches[0]);F&&([c.value,s.value]=F,m.value="touch")}},v=()=>{if(!l||!i)return;const f=h(l);l instanceof MouseEvent&&f&&(c.value=f[0]+i.scrollX,s.value=f[1]+i.scrollY)},w=()=>{c.value=r.x,s.value=r.y},C=u?f=>u(()=>b(f),{}):f=>b(f),x=u?f=>u(()=>S(f),{}):f=>S(f),A=u?()=>u(()=>v(),{}):()=>v();if(a){const f={passive:!0};B(a,["mousemove","dragover"],C,f),t&&n!=="movement"&&(B(a,["touchstart","touchmove"],x,f),o&&B(a,"touchend",w,f)),d&&n==="page"&&B(i,"scroll",A,{passive:!0})}return{x:c,y:s,sourceType:m}}function Zt(e,n={}){const{document:t=bt}=n,o=kt(()=>t&&"pointerLockElement"in t),r=E(),i=E();let a;o.value&&(B(t,"pointerlockchange",()=>{var l;const c=(l=t.pointerLockElement)!=null?l:r.value;a&&c===a&&(r.value=t.pointerLockElement,r.value||(a=i.value=null))}),B(t,"pointerlockerror",()=>{var l;const c=(l=t.pointerLockElement)!=null?l:r.value;if(a&&c===a){const s=t.pointerLockElement?"release":"acquire";throw new Error(`Failed to ${s} pointer lock.`)}}));async function d(l){var c;if(!o.value)throw new Error("Pointer Lock API is not supported by your browser.");if(i.value=l instanceof Event?l.currentTarget:null,a=l instanceof Event?(c=le(e))!=null?c:i.value:le(l),!a)throw new Error("Target element undefined.");return a.requestPointerLock(),await _e(r).toBe(a)}async function u(){return r.value?(t.exitPointerLock(),await _e(r).toBeNull(),!0):!1}return{isSupported:o,element:r,triggerElement:i,lock:d,unlock:u}}function Ft(e={}){const{controls:n=!1,offset:t=0,immediate:o=!0,interval:r="requestAnimationFrame",callback:i}=e,a=E(ge()+t),d=()=>a.value=ge()+t,u=i?()=>{d(),i(a.value)}:d,l=r==="requestAnimationFrame"?Ct(u,{immediate:o}):_t(u,r,{immediate:o});return n?{timestamp:a,...l}:a}function en(e){const n=window.Echo.channel(e);return tt(()=>{n.listenToAll((t,o)=>{console.log(t,o)})}),nt(()=>{window.Echo.leaveChannel(e)}),n}const tn=ce(()=>{const e=Ae("ticket-allocator.options",[]),n=H(()=>e.value.includes("hide-empty")),t=H(()=>e.value.includes("alt-info")),o=H(()=>e.value.includes("unlocked"));return rt({all:e,hideEmpty:n,altInfo:t,unlocked:o})}),nn=ce(()=>Ae("ticket-allocator.display-mode","weight")),Ot=ce(()=>Ft({interval:1e3}));class Dt extends it{increment(n){return this.incrementOrDecrement(n,!0)}decrement(n){return this.incrementOrDecrement(n,!1)}incrementOrDecrement(n,t){const o=this.get(!1);if(o.length===0)return[];const r=o.map(i=>{const a=i.$getAttributes();for(const u in n)Object.prototype.hasOwnProperty.call(a,u)&&typeof a[u]=="number"&&(t?a[u]+=n[u]:a[u]-=n[u]);const d=this.hydrate(a,{action:"update",operation:"set"});return i.$self().updating(i,n)===!1?i:(d.$self().updated(d),d)});return this.commit("update",this.compile(r)),r}}class Nt extends ot{query(){return new Dt(this.database,this.getModel(),this.queryCache,this.hydratedDataCache,this.pinia)}}function $(e){return(n,t)=>{const o=n.$self();o.setRegistry(t,()=>o.attr(e))}}function I(e,n={}){return(t,o)=>{const r=t.$self();r.setRegistry(o,()=>{const i=r.string(e);return n.notNullable&&i.notNullable(),i})}}function W(e,n={}){return(t,o)=>{const r=t.$self();r.setRegistry(o,()=>{const i=r.number(e);return n.notNullable&&i.notNullable(),i})}}function Pe(e,n={}){return(t,o)=>{const r=t.$self();r.setRegistry(o,()=>{const i=r.boolean(e);return n.notNullable&&i.notNullable(),i})}}function L(e){return(n,t)=>{const o=n.$self();o.setRegistry(t,()=>o.uid(e))}}function Ee(e,n,t){return(o,r)=>{const i=o.$self();i.setRegistry(r,()=>i.belongsTo(e(),n,t))}}function de(e,n,t,o,r,i){return(a,d)=>{const u=a.$self();u.setRegistry(d,()=>u.belongsToMany(e(),n(),t,o,r,i))}}function Ve(e,n,t){return(o,r)=>{const i=o.$self();i.setRegistry(r,()=>i.hasMany(e(),n,t))}}function Tt(e){return(n,t)=>{n.$self().setFieldDeleteMode(t,e)}}function fe(e){return(n,t)=>{n.$self().setCast(t,e())}}class pe extends at{constructor(n){super(n)}get(n){return n===null?null:new Date(n)}set(n){return n===null?null:(typeof n=="string"?new Date(Date.parse(n)):n).toISOString()}}var Rt=Object.defineProperty,$e=(e,n,t,o)=>{for(var r=void 0,i=e.length-1,a;i>=0;i--)(a=e[i])&&(r=a(n,t,r)||r);return r&&Rt(n,t,r),r};class J extends K{}y(J,"entity","teamOperator"),y(J,"primaryKey",["team_uuid","operator_uuid"]);$e([L()],J.prototype,"team_uuid");$e([L()],J.prototype,"operator_uuid");var Bt=Object.defineProperty,T=(e,n,t,o)=>{for(var r=void 0,i=e.length-1,a;i>=0;i--)(a=e[i])&&(r=a(n,t,r)||r);return r&&Bt(n,t,r),r},ee;let O=(ee=class extends K{get ticket_count(){return this.tickets.length}get free_slots(){return this.ticket_limit!==null?Math.max(0,this.ticket_limit-this.ticket_count):null}get total_complexity(){return this.tickets.reduce((n,{complexity:t})=>n+t,0)}get free_complexity(){return this.complexity_limit!==null?Math.max(0,this.complexity_limit-this.total_complexity):null}},y(ee,"entity","operators"),y(ee,"primaryKey","uuid"),ee);T([L()],O.prototype,"uuid");T([$()],O.prototype,"user_id");T([I("")],O.prototype,"name");T([Pe(!1)],O.prototype,"online");T([Pe(!1)],O.prototype,"ready");T([W(null)],O.prototype,"ticket_limit");T([W(null)],O.prototype,"complexity_limit");T([de(()=>V,()=>J,"operator_uuid","team_uuid")],O.prototype,"teams");T([Ve(()=>_,"handler_uuid"),Tt("set null")],O.prototype,"tickets");var Lt=Object.defineProperty,j=(e,n,t,o)=>{for(var r=void 0,i=e.length-1,a;i>=0;i--)(a=e[i])&&(r=a(n,t,r)||r);return r&&Lt(n,t,r),r};class V extends K{}y(V,"entity","operatorTeams"),y(V,"primaryKey","uuid");j([L()],V.prototype,"uuid");j([I("")],V.prototype,"name");j([I("")],V.prototype,"description");j([$()],V.prototype,"matching");j([$()],V.prototype,"created_at");j([$()],V.prototype,"updated_at");j([$()],V.prototype,"deleted_at");j([de(()=>O,()=>J,"team_uuid","operator_uuid")],V.prototype,"operators");var jt=Object.defineProperty,Fe=(e,n,t,o)=>{for(var r=void 0,i=e.length-1,a;i>=0;i--)(a=e[i])&&(r=a(n,t,r)||r);return r&&jt(n,t,r),r};class G extends K{}y(G,"entity","teamCategory"),y(G,"primaryKey",["team_uuid","category_uuid"]);Fe([L()],G.prototype,"team_uuid");Fe([L()],G.prototype,"category_uuid");var It=Object.defineProperty,U=(e,n,t,o)=>{for(var r=void 0,i=e.length-1,a;i>=0;i--)(a=e[i])&&(r=a(n,t,r)||r);return r&&It(n,t,r),r};class D extends K{}y(D,"entity","ticketCategories"),y(D,"primaryKey","uuid");U([L()],D.prototype,"uuid");U([I("")],D.prototype,"name");U([I("")],D.prototype,"short");U([$()],D.prototype,"created_at");U([$()],D.prototype,"updated_at");U([de(()=>V,()=>G,"category_uuid","team_uuid")],D.prototype,"teams");U([Ve(()=>_,"category_uuid")],D.prototype,"tickets");var Wt=Object.defineProperty,M=(e,n,t,o)=>{for(var r=void 0,i=e.length-1,a;i>=0;i--)(a=e[i])&&(r=a(n,t,r)||r);return r&&Wt(n,t,r),r},te;let _=(te=class extends K{get duration(){return Math.round((Ot().value-this.created_at.getTime())/1e3)}get weight(){return this.initial_weight+this.weight_increment*this.duration}},y(te,"entity","tickets"),y(te,"primaryKey","uuid"),te);M([L()],_.prototype,"uuid");M([I("")],_.prototype,"category_uuid");M([I(null)],_.prototype,"handler_uuid");M([$()],_.prototype,"meta");M([$()],_.prototype,"metrics");M([W(0)],_.prototype,"initial_weight");M([W(0)],_.prototype,"weight_increment");M([W(0)],_.prototype,"complexity");M([W(0)],_.prototype,"delay");M([W(0)],_.prototype,"reservation");M([fe(()=>pe),$()],_.prototype,"created_at");M([fe(()=>pe),$(null)],_.prototype,"bound_at");M([fe(()=>pe),$(null)],_.prototype,"accepted_at");M([Ee(()=>D,"category_uuid")],_.prototype,"category");M([Ee(()=>O,"handler_uuid")],_.prototype,"handler");class an extends Nt{constructor(){super(...arguments);y(this,"use",_);y(this,"create",t=>{this.save({uuid:t.uuid,category_uuid:t.categoryUuid,handler_uuid:t.operatorUuid,meta:t.meta,created_at:new Date().toISOString(),bound_at:t.operatorUuid?new Date().toISOString():null})});y(this,"close",({uuid:t})=>{this.destroy(t)});y(this,"bind",({uuid:t,operatorUuid:o,meta:r})=>{var a;r={...((a=this.find(t))==null?void 0:a.meta)??{},...r},this.where("uuid",t).update({handler_uuid:o,meta:r,bound_at:new Date().toISOString(),accepted_at:null})});y(this,"accept",({uuid:t})=>{this.where("uuid",t).update({accepted_at:new Date().toISOString()})});y(this,"unbind",({uuid:t})=>{this.where("uuid",t).update({handler_uuid:null,bound_at:null,accepted_at:null})});y(this,"changeCategory",({uuid:t,categoryUuid:o,meta:r})=>{var a;r={...((a=this.find(t))==null?void 0:a.meta)??{},...r},this.where("uuid",t).update({category_uuid:o,meta:r})});y(this,"setMetaValue",({uuid:t,key:o,value:r})=>{var a;const i=((a=this.find(t))==null?void 0:a.meta)??{};i[o]=r,this.where("uuid",t).update({meta:i})});y(this,"mergeMetaValues",({uuid:t,meta:o})=>{var i;o={...((i=this.find(t))==null?void 0:i.meta)??{},...o},this.where("uuid",t).update({meta:o})});y(this,"adjustMetrics",({uuid:t,factorUuid:o,adjustments:r})=>{var a,d,u,l,c,s;const i=((a=this.find(t))==null?void 0:a.metrics)??{};i[o]=r,this.where("uuid",t).update({metrics:i,initial_weight:Math.max(0,(((d=this.find(t))==null?void 0:d.initial_weight)??0)+r.initial_weight),weight_increment:Math.max(0,(((u=this.find(t))==null?void 0:u.weight_increment)??0)+r.weight_increment),complexity:Math.max(0,(((l=this.find(t))==null?void 0:l.complexity)??0)+r.complexity),delay:Math.max(0,(((c=this.find(t))==null?void 0:c.delay)??0)+r.delay),reservation:Math.max(0,(((s=this.find(t))==null?void 0:s.reservation)??0)+r.reservation)})})}unbound(){return this.where("handler_uuid",null)}bound(t){return this.where("handler_uuid",t)}}const sn="ticket-allocator";var Ut=(e=>(e.PropsInvalidated=".props-invalidated",e))(Ut||{}),qt=(e=>(e.Commented=".operator.commented",e.ComplexityLimitAdjusted=".operator.complexity-limit-adjusted",e.Enrolled=".operator.enrolled",e.JoinedTeam=".operator.joined-team",e.LeftTeam=".operator.left-team",e.SetTeams=".operator.set-teams",e.NameChanged=".operator.name-changed",e.NotReady=".operator.not-ready",e.Offline=".operator.offline",e.Online=".operator.online",e.Ready=".operator.ready",e.Resigned=".operator.resigned",e.TicketLimitAdjusted=".operator.ticket-limit-adjusted",e))(qt||{}),Ht=(e=>(e.Bound=".ticket.bound",e.Accepted=".ticket.accepted",e.CategoryChanged=".ticket.category-changed",e.MetaValueSet=".ticket.meta-value-set",e.MetaValuesMerged=".ticket.meta-values-merged",e.MetricsAdjusted=".ticket.metrics-adjusted",e.Closed=".ticket.closed",e.Created=".ticket.created",e.Unbound=".ticket.unbound",e))(Ht||{});export{Ut as C,O,an as T,Gt as V,tn as a,nn as b,Zt as c,Qt as d,en as e,qt as f,Ht as g,sn as h,re as i,D as j,B as u};
//# sourceMappingURL=events.d-Ch1TEwCD.js.map
