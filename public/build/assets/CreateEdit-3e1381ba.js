import{aw as M,b5 as s,b6 as F,aA as S,m as e,u as l,aB as a,aJ as N,az as z,aI as n,b1 as A,aE as k,aF as c,aR as D,b7 as f,aH as _,b8 as R,ad as b,b9 as $,ba as q}from"./app-5e5f697d.js";import{a as H,P as y}from"./Default.vue_vue_type_script_setup_true_lang-f5dafd48.js";import{V as I}from"./VForm-385dbf5c.js";import{V as J,a as p,b as V}from"./VRow-f62ac9ab.js";import{V as P,a as Z}from"./VTextarea-16fa186b.js";import{V as j,a as G,b as K}from"./VToolbar-101256cd.js";import{V as L}from"./VAutocomplete-6c9e2685.js";const O={class:"font-semibold text-xl text-gray-800 leading-tight"},le=M({__name:"CreateEdit",props:{factor:null,ticketCategories:null,errors:null},setup(u){var w,h,v,x;const d=u,C=[{title:s("value"),key:"value"},{title:s("initial_weight"),key:"initial_weight"},{title:s("weight_increment"),key:"weight_increment"},{title:s("complexity"),key:"complexity"},{title:s("delay"),key:"delay"},{title:s("actions"),key:"actions",sortable:!1}],o=F({active:!((w=d.factor)!=null&&w.deleted_at),name:((h=d.factor)==null?void 0:h.name)??"",description:((v=d.factor)==null?void 0:v.description)??"",config:((x=d.factor)==null?void 0:x.config)??[]});function g(){return d.ticketCategories.filter(m=>!o.config.map(r=>r.value).includes(m.uuid))}function U(){var m;o.config.push({value:((m=g()[0])==null?void 0:m.uuid)??"",initial_weight:0,weight_increment:0,complexity:0,delay:0})}function T(m){console.log(m)}function B(){d.factor?o.put(y("ticket-allocator.factors.update",d.factor.uuid)):o.post(y("ticket-allocator.factors.store"))}return(m,r)=>{const E=q("v-data-table");return z(),S(N,null,[e(l(A),{title:l(n)(u.factor?"edit_factor":"new_factor")},null,8,["title"]),e(H,null,{header:a(()=>[k("h2",O,c(l(n)(u.factor?"edit_factor":"new_factor")),1)]),default:a(()=>[k("div",null,[e(I,{onSubmit:D(B,["prevent"])},{default:a(()=>[e(J,null,{default:a(()=>[e(p,null,{default:a(()=>[e(V,{cols:"12",md:"12"},{default:a(()=>[e(P,{modelValue:l(o).active,"onUpdate:modelValue":r[0]||(r[0]=t=>l(o).active=t),label:l(n)("active")},null,8,["modelValue","label"])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(V,{cols:"12",md:"12"},{default:a(()=>[e(f,{modelValue:l(o).name,"onUpdate:modelValue":r[1]||(r[1]=t=>l(o).name=t),required:"",maxlength:"255",label:l(n)("name"),"error-messages":u.errors.name},null,8,["modelValue","label","error-messages"])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(V,{cols:"12",md:"12"},{default:a(()=>[e(Z,{modelValue:l(o).description,"onUpdate:modelValue":r[2]||(r[2]=t=>l(o).description=t),label:l(n)("description"),"error-messages":u.errors.description},null,8,["modelValue","label","error-messages"])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(V,{cols:"12",md:"12"},{default:a(()=>[e(E,{headers:C,items:l(o).config,density:"compact"},{top:a(()=>[e(j,{flat:""},{default:a(()=>[e(G,null,{default:a(()=>[_(c(l(n)("entries")),1)]),_:1}),e(R,{class:"mx-4",inset:"",vertical:""}),e(K),e(b,{color:"primary",dark:"",onClick:U},{default:a(()=>[_(c(l(n)("new_entry")),1)]),_:1})]),_:1})]),["item.value"]:a(({item:t})=>[e(L,{modelValue:t.raw.value,"onUpdate:modelValue":i=>t.raw.value=i,items:g(),"item-title":"name","item-value":"uuid",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue","items"])]),["item.initial_weight"]:a(({item:t})=>[e(f,{modelValue:t.raw.initial_weight,"onUpdate:modelValue":i=>t.raw.initial_weight=i,modelModifiers:{number:!0},type:"number",min:"0",max:"9999999",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.weight_increment"]:a(({item:t})=>[e(f,{modelValue:t.raw.weight_increment,"onUpdate:modelValue":i=>t.raw.weight_increment=i,modelModifiers:{number:!0},type:"number",min:"0",max:"99999",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.complexity"]:a(({item:t})=>[e(f,{modelValue:t.raw.complexity,"onUpdate:modelValue":i=>t.raw.complexity=i,modelModifiers:{number:!0},type:"number",min:"0",max:"9999",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.delay"]:a(({item:t})=>[e(f,{modelValue:t.raw.delay,"onUpdate:modelValue":i=>t.raw.delay=i,modelModifiers:{number:!0},type:"number",min:"0",max:"99999",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.actions"]:a(({item:t})=>[e(b,{icon:"mdi-delete",title:l(n)("remove"),size:"small",variant:"plain",onClick:i=>T(t)},null,8,["title","onClick"])]),_:2},1032,["items"])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(V,{cols:"12",md:"12"},{default:a(()=>[e(b,{type:"submit",color:"primary",class:"mr-3",disabled:l(o).processing},{default:a(()=>[_(c(l(n)("save")),1)]),_:1},8,["disabled"]),e(l($),{href:l(y)("ticket-allocator.factors.index"),class:"mr-3"},{default:a(()=>[e(b,null,{default:a(()=>[_(c(l(n)("cancel")),1)]),_:1})]),_:1},8,["href"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])]),_:1})],64)}}});export{le as default};
//# sourceMappingURL=CreateEdit-3e1381ba.js.map
