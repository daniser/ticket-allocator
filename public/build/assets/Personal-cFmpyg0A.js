import{_ as P}from"./Default.vue_vue_type_script_setup_true_lang-CGGcRZ0Z.js";import{T as S}from"./TransitionGroup-xDI51NFL.js";import{L as j,f as c,N as x,a2 as N,aa as f,ab as U,R as s,i as n,_ as i,ac as $,S as l,F as p,a1 as v,P as e,X as m,Y as y,a6 as A,T as M,$ as h,U as E,aU as w,W as F}from"./app-Ch62ayHM.js";import{c as D,f as H,M as O,a as G,C as W,g as a,h as X,j as Y,T as Z,k as q,V as z}from"./OperatorRepository-BWJIp6Nj.js";import{V as J}from"./VContainer-DRceIZXb.js";import{V as K,a as Q}from"./VRow-ChLXKHQo.js";import{V as ee}from"./VTable-BffRu20T.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./scopeId-BonRG5r5.js";import"./VGrid-DZi2vrC2.js";import"./VInput-mc00EMnO.js";import"./VSelectionControl-1FZ9ANXw.js";const ae={class:"font-semibold text-xl text-gray-800 leading-tight"},se=["innerHTML"],oe=j({__name:"Personal",props:{operator:{},ticketCategories:{},ticketColumns:{}},setup(R){const g=R,u=D(),C=c(()=>v(Y)),t=c(()=>v(Z)),T=c(()=>v(q)),b=H(X);x();const B=new O({linkify:!0}).use(G),V=c(()=>C.value.with("tickets",r=>r.with("category").orderBy(u.value,"desc")).first());N(()=>{b.listen(W.PropsInvalidated,()=>f.reload()).listen(a.Created,t.value.create).listen(a.Closed,t.value.close).listen(a.Bound,t.value.bind).listen(a.Accepted,t.value.accept).listen(a.Unbound,t.value.unbind).listen(a.CategoryChanged,t.value.changeCategory).listen(a.MetaValueSet,t.value.setMetaValue).listen(a.MetaValuesMerged,t.value.mergeMetaValues).listen(a.MetricsAdjusted,t.value.adjustMetrics)});function k(){C.value.save(g.operator),T.value.fresh(g.ticketCategories)}const I=f.on("navigate",k),L=f.on("success",k);return U(()=>{I(),L()}),(r,_)=>(e(),s(p,null,[n(i($),{title:r.$t("personal")},null,8,["title"]),n(P,null,{header:l(()=>[m("h2",ae,y(r.$t("personal")),1)]),default:l(()=>[m("div",null,[n(J,{fluid:""},{default:l(()=>[n(K,null,{default:l(()=>[n(Q,{offset:"10",cols:"2"},{default:l(()=>[n(z,{modelValue:i(u),"onUpdate:modelValue":_[0]||(_[0]=o=>A(u)?u.value=o:null),"false-value":"weight","true-value":"duration","prepend-icon":"mdi-weight","append-icon":"mdi-clock",class:"d-flex justify-end"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),V.value?(e(),M(ee,{key:0,"fixed-header":"",density:"comfortable",class:"personal-monitor"},{default:l(()=>[m("thead",null,[m("tr",null,[(e(!0),s(p,null,h(r.ticketColumns,({title:o})=>(e(),s("th",null,y(o),1))),256))])]),n(i(S),{tag:"tbody",name:"ticket-pool"},{default:l(()=>[(e(!0),s(p,null,h(V.value.tickets,o=>(e(),s("tr",{key:o.uuid},[(e(!0),s(p,null,h(r.ticketColumns,({key:d})=>(e(),s("td",{key:d},[d==="meta.icon"?(e(),M(E,{key:0,icon:i(w)(o,d,"mdi-help")},null,8,["icon"])):(e(),s("span",{key:1,innerHTML:i(B).renderInline(i(w)(o,d,"-"))},null,8,se))]))),128))]))),128))]),_:1})]),_:1})):F("",!0)])]),_:1})],64))}}),ge=te(oe,[["__scopeId","data-v-4a3227d1"]]);export{ge as default};
//# sourceMappingURL=Personal-cFmpyg0A.js.map
