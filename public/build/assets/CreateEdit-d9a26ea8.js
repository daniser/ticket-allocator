import{a8 as E,aK as u,aL as S,c as D,ac as F,B as e,u as n,ad as a,ak as A,ab as j,aG as z,ag as b,ah as f,au as G,aM as s,_ as J,aN as K,aj as V,aO as L,J as y,aP as O,aQ as P}from"./app-e8404545.js";import{a as Q,A as w}from"./Default.vue_vue_type_script_setup_true_lang-cb7f8306.js";import{V as R}from"./VForm-a8123a2c.js";import{V as Z,a as m,b as c}from"./VRow-5d50a517.js";import{V as q,a as H}from"./VTextarea-8a9ecf83.js";import{V as I,a as W,b as X}from"./VToolbar-f2c56ab5.js";import{V as Y}from"./VAutocomplete-258f9eda.js";const ee={class:"font-semibold text-xl text-gray-800 leading-tight"},de=E({__name:"CreateEdit",props:{factor:null,factorType:null,ticketCategories:null,errors:null},setup(p){var _,k,T,U,x,$;const r=p,C=[{title:u("value"),key:"value"},{title:u("initial_weight"),key:"initial_weight"},{title:u("weight_increment"),key:"weight_increment"},{title:u("complexity"),key:"complexity"},{title:u("delay"),key:"delay"},{title:u("actions"),key:"actions",sortable:!1}],o=S({active:!((_=r.factor)!=null&&_.deleted_at),type:((k=r.factor)==null?void 0:k.type.alias)??((T=r.factorType)==null?void 0:T.alias)??"",name:((U=r.factor)==null?void 0:U.display_name)??"",description:((x=r.factor)==null?void 0:x.description)??"",config:(($=r.factor)==null?void 0:$.config)??[]}),g=D(()=>{var t,i;return((t=r.factor)==null?void 0:t.type.name)??((i=r.factorType)==null?void 0:i.name)??""});function v(t){return r.ticketCategories.filter(i=>i.uuid===t||!o.config.map(h=>h.value).includes(i.uuid))}function M(){var t;o.config.push({value:((t=v()[0])==null?void 0:t.uuid)??"",initial_weight:null,weight_increment:null,complexity:null,delay:null})}function B(t){o.config=o.config.filter(i=>i.value!==t)}function N(){r.factor?o.put(w("ticket-allocator.factors.update",r.factor.uuid)):o.post(w("ticket-allocator.factors.store"))}return(t,i)=>{const h=P("v-data-table");return j(),F(A,null,[e(n(z),{title:t.$t(p.factor?"edit_factor":"new_factor")},null,8,["title"]),e(Q,null,{header:a(()=>[b("h2",ee,f(t.$t(p.factor?"edit_factor":"new_factor")),1)]),default:a(()=>[b("div",null,[e(R,{onSubmit:G(N,["prevent"])},{default:a(()=>[e(Z,null,{default:a(()=>[e(m,null,{default:a(()=>[e(c,{cols:"12",md:"12"},{default:a(()=>[e(q,{modelValue:n(o).active,"onUpdate:modelValue":i[0]||(i[0]=l=>n(o).active=l),label:t.$t("active")},null,8,["modelValue","label"])]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(c,{cols:"12",md:"12"},{default:a(()=>[e(s,{"model-value":n(g),label:t.$t("factor_type"),readonly:""},null,8,["model-value","label"]),J(b("input",{"onUpdate:modelValue":i[1]||(i[1]=l=>n(o).type=l),type:"hidden"},null,512),[[K,n(o).type]])]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(c,{cols:"12",md:"12"},{default:a(()=>[e(s,{modelValue:n(o).name,"onUpdate:modelValue":i[2]||(i[2]=l=>n(o).name=l),maxlength:"255",label:t.$t("name"),placeholder:n(g),"persistent-placeholder":!!n(g).length,"error-messages":p.errors.name},null,8,["modelValue","label","placeholder","persistent-placeholder","error-messages"])]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(c,{cols:"12",md:"12"},{default:a(()=>[e(H,{modelValue:n(o).description,"onUpdate:modelValue":i[3]||(i[3]=l=>n(o).description=l),label:t.$t("description"),"error-messages":p.errors.description},null,8,["modelValue","label","error-messages"])]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(c,{cols:"12",md:"12"},{default:a(()=>[e(h,{headers:C,items:n(o).config,density:"compact"},{top:a(()=>[e(I,{flat:""},{default:a(()=>[e(W,null,{default:a(()=>[V(f(t.$t("entries")),1)]),_:1}),e(L,{class:"mx-4",inset:"",vertical:""}),e(X),e(y,{color:"primary",dark:"",disabled:v().length===0,onClick:M},{default:a(()=>[V(f(t.$t("new_entry")),1)]),_:1},8,["disabled"])]),_:1})]),["item.value"]:a(({item:l})=>[e(Y,{modelValue:l.raw.value,"onUpdate:modelValue":d=>l.raw.value=d,items:v(l.raw.value),"item-title":"name","item-value":"uuid",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue","items"])]),["item.initial_weight"]:a(({item:l})=>[e(s,{modelValue:l.raw.initial_weight,"onUpdate:modelValue":d=>l.raw.initial_weight=d,modelModifiers:{number:!0},type:"number",min:"0",max:"9999999",placeholder:"0",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.weight_increment"]:a(({item:l})=>[e(s,{modelValue:l.raw.weight_increment,"onUpdate:modelValue":d=>l.raw.weight_increment=d,modelModifiers:{number:!0},type:"number",min:"0",max:"99999",placeholder:"0",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.complexity"]:a(({item:l})=>[e(s,{modelValue:l.raw.complexity,"onUpdate:modelValue":d=>l.raw.complexity=d,modelModifiers:{number:!0},type:"number",min:"0",max:"9999",placeholder:"0",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.delay"]:a(({item:l})=>[e(s,{modelValue:l.raw.delay,"onUpdate:modelValue":d=>l.raw.delay=d,modelModifiers:{number:!0},type:"number",min:"0",max:"99999",placeholder:"0",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.actions"]:a(({item:l})=>[e(y,{icon:"mdi-delete",title:t.$t("remove"),size:"small",variant:"plain",onClick:d=>B(l.raw.value)},null,8,["title","onClick"])]),_:2},1032,["items"])]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(c,{cols:"12",md:"12"},{default:a(()=>[e(y,{type:"submit",color:"primary",class:"mr-3",disabled:n(o).processing},{default:a(()=>[V(f(t.$t("save")),1)]),_:1},8,["disabled"]),e(n(O),{href:n(w)("ticket-allocator.factors.index"),class:"mr-3"},{default:a(()=>[e(y,null,{default:a(()=>[V(f(t.$t("cancel")),1)]),_:1})]),_:1},8,["href"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])]),_:1})],64)}}});export{de as default};
//# sourceMappingURL=CreateEdit-d9a26ea8.js.map
