var Ne=Object.defineProperty;var Te=(e,t,r)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var w=(e,t,r)=>(Te(e,typeof t!="symbol"?t+"":t,r),r);import{r as P,a4 as B,aJ as xe,aK as De,aL as Fe,W as Ce,aM as Le,a5 as Me,aN as we,ab as ge,aH as Oe,aO as Re,E as Z,aA as Be,aP as Q}from"./app-992f8e8f.js";var ae;const J=typeof window<"u",Pe=e=>typeof e=="function",We=e=>typeof e=="string",ie=()=>+Date.now(),k=()=>{};J&&((ae=window==null?void 0:window.navigator)!=null&&ae.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function A(e){return typeof e=="function"?e():Ce(e)}function be(e,t){function r(...n){return new Promise((o,a)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(o).catch(a)})}return r}const $e=e=>e();function Ve(e,t=!0,r=!0,n=!1){let o=0,a,i=!0,u=k,c;const d=()=>{a&&(clearTimeout(a),a=void 0,u(),u=k)};return s=>{const p=A(e),v=Date.now()-o,y=()=>c=s();if(d(),p<=0)return o=Date.now(),y();if(v>p&&(r||!i))o=Date.now(),y();else if(t)return new Promise((f,_)=>{u=n?_:f,a=setTimeout(()=>{o=Date.now(),i=!0,f(y()),d()},p-v)});return!r&&!a&&(a=setTimeout(()=>i=!0,p)),i=!1,c}}function He(e=$e){const t=P(!0);function r(){t.value=!1}function n(){t.value=!0}const o=(...a)=>{t.value&&e(...a)};return{isActive:Oe(t),pause:r,resume:n,eventFilter:o}}function se(e,t=!1,r="Timeout"){return new Promise((n,o)=>{setTimeout(t?()=>o(r):n,e)})}function Qe(e){return e}function q(e){return De()?(Fe(e),!0):!1}function Y(e){let t=0,r,n;const o=()=>{t-=1,n&&t<=0&&(n.stop(),r=void 0,n=void 0)};return(...a)=>(t+=1,r||(n=xe(!0),r=n.run(()=>e(...a))),q(o),r)}function Ke(e,t=200,r=!1,n=!0,o=!1){return be(Ve(t,r,n,o),e)}function Qt(e,t=200,r=!0,n=!0){if(t<=0)return e;const o=P(e.value),a=Ke(()=>{o.value=e.value},t,r,n);return B(e,()=>a()),o}function Je(e,t=!0){Le()?Me(e):t?e():we(e)}function ee(e,t=!1){function r(s,{flush:p="sync",deep:v=!1,timeout:y,throwOnTimeout:f}={}){let _=null;const K=[new Promise(C=>{_=B(e,N=>{s(N)!==t&&(_==null||_(),C(N))},{flush:p,deep:v,immediate:!0})})];return y!=null&&K.push(se(y,f).then(()=>A(e)).finally(()=>_==null?void 0:_())),Promise.race(K)}function n(s,p){if(!ge(s))return r(N=>N===s,p);const{flush:v="sync",deep:y=!1,timeout:f,throwOnTimeout:_}=p??{};let S=null;const C=[new Promise(N=>{S=B([e,s],([U,z])=>{t!==(U===z)&&(S==null||S(),N(U))},{flush:v,deep:y,immediate:!0})})];return f!=null&&C.push(se(f,_).then(()=>A(e)).finally(()=>(S==null||S(),A(e)))),Promise.race(C)}function o(s){return r(p=>Boolean(p),s)}function a(s){return n(null,s)}function i(s){return n(void 0,s)}function u(s){return r(Number.isNaN,s)}function c(s,p){return r(v=>{const y=Array.from(v);return y.includes(s)||y.includes(A(s))},p)}function d(s){return l(1,s)}function l(s=1,p){let v=-1;return r(()=>(v+=1,v>=s),p)}return Array.isArray(A(e))?{toMatch:r,toContains:c,changed:d,changedTimes:l,get not(){return ee(e,!t)}}:{toMatch:r,toBe:n,toBeTruthy:o,toBeNull:a,toBeNaN:u,toBeUndefined:i,changed:d,changedTimes:l,get not(){return ee(e,!t)}}}function ue(e){return ee(e)}function qe(e,t=1e3,r={}){const{immediate:n=!0,immediateCallback:o=!1}=r;let a=null;const i=P(!1);function u(){a&&(clearInterval(a),a=null)}function c(){i.value=!1,u()}function d(){const l=A(t);l<=0||(i.value=!0,o&&e(),u(),a=setInterval(e,l))}if(n&&J&&d(),ge(t)||Pe(t)){const l=B(t,()=>{i.value&&J&&d()});q(l)}return q(c),{isActive:i,pause:c,resume:d}}var le=Object.getOwnPropertySymbols,Ue=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,Xe=(e,t)=>{var r={};for(var n in e)Ue.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&le)for(var n of le(e))t.indexOf(n)<0&&ze.call(e,n)&&(r[n]=e[n]);return r};function Ye(e,t,r={}){const n=r,{eventFilter:o=$e}=n,a=Xe(n,["eventFilter"]);return B(e,be(o,t),a)}var Ge=Object.defineProperty,Ze=Object.defineProperties,ke=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,ce=(e,t,r)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,et=(e,t)=>{for(var r in t||(t={}))Se.call(t,r)&&ce(e,r,t[r]);if(X)for(var r of X(t))Ee.call(t,r)&&ce(e,r,t[r]);return e},tt=(e,t)=>Ze(e,ke(t)),rt=(e,t)=>{var r={};for(var n in e)Se.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&X)for(var n of X(e))t.indexOf(n)<0&&Ee.call(e,n)&&(r[n]=e[n]);return r};function nt(e,t,r={}){const n=r,{eventFilter:o}=n,a=rt(n,["eventFilter"]),{eventFilter:i,pause:u,resume:c,isActive:d}=He(o);return{stop:Ye(e,t,tt(et({},a),{eventFilter:i})),pause:u,resume:c,isActive:d}}function te(e){var t;const r=A(e);return(t=r==null?void 0:r.$el)!=null?t:r}const W=J?window:void 0,ot=J?window.document:void 0;function T(...e){let t,r,n,o;if(We(e[0])||Array.isArray(e[0])?([r,n,o]=e,t=W):[t,r,n,o]=e,!t)return k;Array.isArray(r)||(r=[r]),Array.isArray(n)||(n=[n]);const a=[],i=()=>{a.forEach(l=>l()),a.length=0},u=(l,s,p)=>(l.addEventListener(s,p,o),()=>l.removeEventListener(s,p,o)),c=B(()=>te(t),l=>{i(),l&&a.push(...r.flatMap(s=>n.map(p=>u(l,s,p))))},{immediate:!0,flush:"post"}),d=()=>{c(),i()};return q(d),d}function at(e,t=!1){const r=P(),n=()=>r.value=Boolean(e());return n(),Je(n,t),r}const re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ne="__vueuse_ssr_handlers__";re[ne]=re[ne]||{};const it=re[ne];function st(e,t){return it[e]||t}function ut(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}var lt=Object.defineProperty,pe=Object.getOwnPropertySymbols,ct=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,fe=(e,t,r)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,de=(e,t)=>{for(var r in t||(t={}))ct.call(t,r)&&fe(e,r,t[r]);if(pe)for(var r of pe(t))pt.call(t,r)&&fe(e,r,t[r]);return e};const ft={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}};function dt(e,t,r,n={}){var o;const{flush:a="pre",deep:i=!0,listenToStorageChanges:u=!0,writeDefaults:c=!0,mergeDefaults:d=!1,shallow:l,window:s=W,eventFilter:p,onError:v=m=>{console.error(m)}}=n,y=(l?Re:P)(t);if(!r)try{r=st("getDefaultStorage",()=>{var m;return(m=W)==null?void 0:m.localStorage})()}catch(m){v(m)}if(!r)return y;const f=A(t),_=ut(f),S=(o=n.serializer)!=null?o:ft[_],{pause:K,resume:C}=nt(y,()=>N(y.value),{flush:a,deep:i,eventFilter:p});return s&&u&&T(s,"storage",z),z(),y;function N(m){try{if(m==null)r.removeItem(e);else{const h=S.write(m),L=r.getItem(e);L!==h&&(r.setItem(e,h),s&&(s==null||s.dispatchEvent(new StorageEvent("storage",{key:e,oldValue:L,newValue:h,storageArea:r}))))}}catch(h){v(h)}}function U(m){const h=m?m.newValue:r.getItem(e);if(h==null)return c&&f!==null&&r.setItem(e,S.write(f)),f;if(!m&&d){const L=S.read(h);return Pe(d)?d(L,f):_==="object"&&!Array.isArray(L)?de(de({},f),L):L}else return typeof h!="string"?h:S.read(h)}function z(m){if(!(m&&m.storageArea!==r)){if(m&&m.key==null){y.value=f;return}if(!(m&&m.key!==e)){K();try{y.value=U(m)}catch(h){v(h)}finally{m?we(C):C()}}}}}function mt(e,t={}){const{immediate:r=!0,window:n=W}=t,o=P(!1);let a=0,i=null;function u(l){if(!o.value||!n)return;const s=l-a;e({delta:s,timestamp:l}),a=l,i=n.requestAnimationFrame(u)}function c(){!o.value&&n&&(o.value=!0,i=n.requestAnimationFrame(u))}function d(){o.value=!1,i!=null&&n&&(n.cancelAnimationFrame(i),i=null)}return r&&c(),q(d),{isActive:Oe(o),pause:d,resume:c}}function oe(e,t,r={}){const{window:n=W}=r;return dt(e,t,n==null?void 0:n.localStorage,r)}function Kt(e={}){const{type:t="page",touch:r=!0,resetOnTouchEnds:n=!1,initialValue:o={x:0,y:0},window:a=W,eventFilter:i}=e,u=P(o.x),c=P(o.y),d=P(null),l=f=>{t==="page"?(u.value=f.pageX,c.value=f.pageY):t==="client"?(u.value=f.clientX,c.value=f.clientY):t==="movement"&&(u.value=f.movementX,c.value=f.movementY),d.value="mouse"},s=()=>{u.value=o.x,c.value=o.y},p=f=>{if(f.touches.length>0){const _=f.touches[0];t==="page"?(u.value=_.pageX,c.value=_.pageY):t==="client"&&(u.value=_.clientX,c.value=_.clientY),d.value="touch"}},v=f=>i===void 0?l(f):i(()=>l(f),{}),y=f=>i===void 0?p(f):i(()=>p(f),{});return a&&(T(a,"mousemove",v,{passive:!0}),T(a,"dragover",v,{passive:!0}),r&&t!=="movement"&&(T(a,"touchstart",y,{passive:!0}),T(a,"touchmove",y,{passive:!0}),n&&T(a,"touchend",s,{passive:!0}))),{x:u,y:c,sourceType:d}}function Jt(e,t={}){const{document:r=ot,pointerLockOptions:n}=t,o=at(()=>r&&"pointerLockElement"in r),a=P(),i=P();let u;o.value&&(T(r,"pointerlockchange",()=>{var l;const s=(l=r.pointerLockElement)!=null?l:a.value;u&&s===u&&(a.value=r.pointerLockElement,a.value||(u=i.value=null))}),T(r,"pointerlockerror",()=>{var l;const s=(l=r.pointerLockElement)!=null?l:a.value;if(u&&s===u){const p=r.pointerLockElement?"release":"acquire";throw new Error(`Failed to ${p} pointer lock.`)}}));async function c(l,s){var p;if(!o.value)throw new Error("Pointer Lock API is not supported by your browser.");if(i.value=l instanceof Event?l.currentTarget:null,u=l instanceof Event?(p=te(e))!=null?p:i.value:te(l),!u)throw new Error("Target element undefined.");return u.requestPointerLock(s??n),await ue(a).toBe(u)}async function d(){return a.value?(r.exitPointerLock(),await ue(a).toBeNull(),!0):!1}return{isSupported:o,element:a,triggerElement:i,lock:c,unlock:d}}var me;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(me||(me={}));var yt=Object.defineProperty,ye=Object.getOwnPropertySymbols,vt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable,ve=(e,t,r)=>t in e?yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ht=(e,t)=>{for(var r in t||(t={}))vt.call(t,r)&&ve(e,r,t[r]);if(ye)for(var r of ye(t))_t.call(t,r)&&ve(e,r,t[r]);return e};function wt(e={}){const{controls:t=!1,offset:r=0,immediate:n=!0,interval:o="requestAnimationFrame",callback:a}=e,i=P(ie()+r),u=()=>i.value=ie()+r,c=a?()=>{u(),a(i.value)}:u,d=o==="requestAnimationFrame"?mt(c,{immediate:n}):qe(c,o,{immediate:n});return t?ht({timestamp:i},d):i}var gt=Object.defineProperty,_e=Object.getOwnPropertySymbols,Ot=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable,he=(e,t,r)=>t in e?gt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bt=(e,t)=>{for(var r in t||(t={}))Ot.call(t,r)&&he(e,r,t[r]);if(_e)for(var r of _e(t))Pt.call(t,r)&&he(e,r,t[r]);return e};const $t={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};bt({linear:Qe},$t);const qt=Y(()=>{const e=oe("ticket-allocator.options",[]),t=Z(()=>e.value.includes("hide-empty")),r=Z(()=>e.value.includes("alt-info")),n=Z(()=>e.value.includes("unlocked"));return Be({all:e,hideEmpty:t,altInfo:r,unlocked:n})}),Ut=Y(()=>oe("ticket-allocator.display-mode","weight")),zt=Y(()=>oe("ticket-allocator.operator-sorting","asc")),St=Y(()=>wt({interval:1e3}));function M(e){return(t,r)=>{const n=t.$self();n.setRegistry(r,()=>n.attr(e))}}function R(e,t={}){return(r,n)=>{const o=r.$self();o.setRegistry(n,()=>{const a=o.string(e);return t.notNullable&&a.notNullable(),a})}}function E(e,t={}){return(r,n)=>{const o=r.$self();o.setRegistry(n,()=>{const a=o.number(e);return t.notNullable&&a.notNullable(),a})}}function je(e,t={}){return(r,n)=>{const o=r.$self();o.setRegistry(n,()=>{const a=o.boolean(e);return t.notNullable&&a.notNullable(),a})}}function x(){return(e,t)=>{const r=e.$self();r.setRegistry(t,()=>r.uid())}}function Et(e,t,r){return(n,o)=>{const a=n.$self();a.setRegistry(o,()=>a.belongsTo(e(),t,r))}}function G(e,t,r,n,o,a){return(i,u)=>{const c=i.$self();c.setRegistry(u,()=>c.belongsToMany(e(),t(),r,n,o,a))}}function jt(e,t,r){return(n,o)=>{const a=n.$self();a.setRegistry(o,()=>a.hasMany(e(),t,r))}}function It(e){return(t,r)=>{t.$self().setFieldDeleteMode(r,e)}}var At=Object.defineProperty,Nt=Object.getOwnPropertyDescriptor,Ie=(e,t,r,n)=>{for(var o=n>1?void 0:n?Nt(t,r):t,a=e.length-1,i;a>=0;a--)(i=e[a])&&(o=(n?i(t,r,o):i(o))||o);return n&&o&&At(t,r,o),o};class V extends Q{}w(V,"entity","teamOperator"),w(V,"primaryKey",["team_uuid","operator_uuid"]);Ie([x()],V.prototype,"team_uuid",2);Ie([x()],V.prototype,"operator_uuid",2);var Tt=Object.defineProperty,xt=Object.getOwnPropertyDescriptor,Ae=(e,t,r,n)=>{for(var o=n>1?void 0:n?xt(t,r):t,a=e.length-1,i;a>=0;a--)(i=e[a])&&(o=(n?i(t,r,o):i(o))||o);return n&&o&&Tt(t,r,o),o};class H extends Q{}w(H,"entity","teamCategory"),w(H,"primaryKey",["team_uuid","category_uuid"]);Ae([x()],H.prototype,"team_uuid",2);Ae([x()],H.prototype,"category_uuid",2);var Dt=Object.defineProperty,Ft=Object.getOwnPropertyDescriptor,j=(e,t,r,n)=>{for(var o=n>1?void 0:n?Ft(t,r):t,a=e.length-1,i;a>=0;a--)(i=e[a])&&(o=(n?i(t,r,o):i(o))||o);return n&&o&&Dt(t,r,o),o};class g extends Q{}w(g,"entity","ticketCategories"),w(g,"primaryKey","uuid");j([x()],g.prototype,"uuid",2);j([R("")],g.prototype,"name",2);j([R("")],g.prototype,"short",2);j([E(0)],g.prototype,"initial_weight",2);j([E(0)],g.prototype,"weight_increment",2);j([E(0)],g.prototype,"complexity",2);j([E(0)],g.prototype,"delay",2);j([M()],g.prototype,"created_at",2);j([M()],g.prototype,"updated_at",2);j([G(()=>b,()=>H,"category_uuid","team_uuid")],g.prototype,"teams",2);var Ct=Object.defineProperty,Lt=Object.getOwnPropertyDescriptor,D=(e,t,r,n)=>{for(var o=n>1?void 0:n?Lt(t,r):t,a=e.length-1,i;a>=0;a--)(i=e[a])&&(o=(n?i(t,r,o):i(o))||o);return n&&o&&Ct(t,r,o),o};class b extends Q{}w(b,"entity","operatorTeams"),w(b,"primaryKey","uuid");D([x()],b.prototype,"uuid",2);D([R("")],b.prototype,"name",2);D([R("")],b.prototype,"description",2);D([M()],b.prototype,"created_at",2);D([M()],b.prototype,"updated_at",2);D([M()],b.prototype,"deleted_at",2);D([G(()=>$,()=>V,"team_uuid","operator_uuid")],b.prototype,"operators",2);D([G(()=>g,()=>H,"team_uuid","category_uuid")],b.prototype,"ticketCategories",2);var Mt=Object.defineProperty,Rt=Object.getOwnPropertyDescriptor,F=(e,t,r,n)=>{for(var o=n>1?void 0:n?Rt(t,r):t,a=e.length-1,i;a>=0;a--)(i=e[a])&&(o=(n?i(t,r,o):i(o))||o);return n&&o&&Mt(t,r,o),o};class $ extends Q{get ticket_count(){return this.tickets.length}get free_slots(){return this.ticket_limit!==null?Math.max(0,this.ticket_limit-this.ticket_count):null}get total_complexity(){return this.tickets.reduce((t,{complexity:r})=>t+r,0)}get free_complexity(){return this.complexity_limit!==null?Math.max(0,this.complexity_limit-this.total_complexity):null}}w($,"entity","operators"),w($,"primaryKey","uuid");F([x()],$.prototype,"uuid",2);F([R("")],$.prototype,"name",2);F([je(!1)],$.prototype,"online",2);F([je(!1)],$.prototype,"ready",2);F([E(null)],$.prototype,"ticket_limit",2);F([E(null)],$.prototype,"complexity_limit",2);F([G(()=>b,()=>V,"operator_uuid","team_uuid")],$.prototype,"teams",2);F([jt(()=>O,"handler_uuid"),It("set null")],$.prototype,"tickets",2);var Bt=Object.defineProperty,Wt=Object.getOwnPropertyDescriptor,I=(e,t,r,n)=>{for(var o=n>1?void 0:n?Wt(t,r):t,a=e.length-1,i;a>=0;a--)(i=e[a])&&(o=(n?i(t,r,o):i(o))||o);return n&&o&&Bt(t,r,o),o};class O extends Q{get duration(){return Math.round((St().value-new Date(this.created_at).getTime())/1e3)}get weight(){return this.initial_weight+this.weight_increment*this.duration}}w(O,"entity","tickets"),w(O,"primaryKey","uuid");I([x()],O.prototype,"uuid",2);I([R("")],O.prototype,"category_uuid",2);I([R(null)],O.prototype,"handler_uuid",2);I([M()],O.prototype,"meta",2);I([E(0)],O.prototype,"initial_weight",2);I([E(0)],O.prototype,"weight_increment",2);I([E(0)],O.prototype,"complexity",2);I([E(0)],O.prototype,"delay",2);I([M()],O.prototype,"created_at",2);I([Et(()=>$,"handler_uuid")],O.prototype,"handler",2);export{$ as O,O as T,Ut as a,Jt as b,Kt as c,qt as d,zt as e,b as f,J as i,Qt as r,T as u};
//# sourceMappingURL=Ticket-915e6290.js.map
