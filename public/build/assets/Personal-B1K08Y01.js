import{S,O as B,P as x,f as l,R as D,T as a,U as r,F as _,a2 as $,X as k,Y as O,a1 as w,a3 as U,b7 as A,a4 as L,a6 as E,af as T,ag as F,i as c,ah as H,W as u,aa as Z,a5 as b,_ as g,$ as R,ab as q,Z as z}from"./app-MMbirL_Y.js";import{M as G,a as Q,c as P,f as W,C as X,g as n,h as Y,j as J,T as K,V as ee}from"./OperatorRepository-CYEzZmou.js";import{T as te}from"./TransitionGroup-BapazAvx.js";import{V as ae,a as oe}from"./VRow-D89EXIox.js";import{V as se}from"./VContainer-DI1Oyank.js";import{V as ne}from"./VTable-DmWYlUvF.js";import"./VInput-DDyAvved.js";import"./VSelectionControl-BqekPyFq.js";/* empty css              */const le={timestamp:d=>{const s=S(d);return s.isBefore(Date.now(),"day")?`${s.format("L LT")} (${s.fromNow()})`:`${s.format("LT")} (${s.fromNow()})`}},re=["innerHTML"],ue=B({__name:"PersonalTicket",props:{ticket:{},columns:{}},setup(d){x(e=>({"158a04f6":y.value.delay,"3dd12d7e":y.value.duration}));const s=d,i=new G({linkify:!0}).use(Q),m=P(),o=l(()=>D().props.options),v=l(()=>o.value[`${m.value}_threshold`]),p=l(()=>s.ticket[m.value]),h=l(()=>p.value>v.value),y=l(()=>({delay:-p.value+"s",duration:v.value+"s"}));function V(e,f,t=""){const[C,...I]=f.split("|"),M=A(e,C,t);return M===t?M:I.reduce((j,N)=>le[N](j),M)}return(e,f)=>(a(),r("tr",{class:U(["ticket",{overflow:h.value}])},[(a(!0),r(_,null,$(e.columns,([,t])=>(a(),r("td",{key:t},[t==="meta.icon"?(a(),k(O,{key:0,icon:V(e.ticket,t,"mdi-help"),color:"white"},null,8,["icon"])):(a(),r("span",{key:1,class:"text-white",innerHTML:w(i).renderInline(V(e.ticket,t,"-"))},null,8,re))]))),128))],2))}}),ie=L(ue,[["__scopeId","data-v-41c5eddc"]]),ce={class:"font-semibold text-xl text-gray-800 leading-tight"},de=B({__name:"Personal",props:{layout:{default:"default"},operator:{},columns:{}},setup(d){const s=d,i=P(),m=l(()=>b(J)),o=l(()=>b(K)),v=W(Y),p=l(()=>m.value.with("tickets",e=>e.with("category").orderBy(i.value,"desc")).first());E(()=>{v.listen(X.PropsInvalidated,()=>T.reload()).listen(n.Created,o.value.create).listen(n.Closed,o.value.close).listen(n.Bound,o.value.bind).listen(n.Accepted,o.value.accept).listen(n.Unbound,o.value.unbind).listen(n.CategoryChanged,o.value.changeCategory).listen(n.MetaValueSet,o.value.setMetaValue).listen(n.MetaValuesMerged,o.value.mergeMetaValues).listen(n.MetricsAdjusted,o.value.adjustMetrics)});function h(){m.value.save(s.operator)}const y=T.on("navigate",h),V=T.on("success",h);return F(()=>{y(),V()}),(e,f)=>(a(),r(_,null,[c(w(H),{title:e.$t("personal")},null,8,["title"]),(a(),k(Z(`${e.layout}-layout`),null,{header:u(()=>[g("h2",ce,R(e.$t("personal")),1)]),default:u(()=>[g("div",null,[c(se,{fluid:""},{default:u(()=>[c(ae,null,{default:u(()=>[c(oe,{offset:"10",cols:"2"},{default:u(()=>[c(ee,{modelValue:w(i),"onUpdate:modelValue":f[0]||(f[0]=t=>q(i)?i.value=t:null),"false-value":"weight","true-value":"duration","prepend-icon":"mdi-weight","append-icon":"mdi-clock",class:"d-flex justify-end"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),p.value?(a(),k(ne,{key:0,"fixed-header":"",density:"comfortable",class:"personal-monitor"},{default:u(()=>[g("thead",null,[g("tr",null,[(a(!0),r(_,null,$(e.columns,([t,C])=>(a(),r("th",{key:C},R(t),1))),128))])]),c(w(te),{tag:"tbody",name:"ticket-pool"},{default:u(()=>[(a(!0),r(_,null,$(p.value.tickets,t=>(a(),k(ie,{key:t.uuid,ticket:t,columns:e.columns},null,8,["ticket","columns"]))),128))]),_:1})]),_:1})):z("",!0)])]),_:1}))],64))}}),ke=L(de,[["__scopeId","data-v-55af8d04"]]);export{ke as default};
//# sourceMappingURL=Personal-B1K08Y01.js.map
