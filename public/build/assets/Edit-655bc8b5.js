import{aQ as ie,aR as se,aS as re,aT as ce,aU as de,aV as ve,aW as fe,r as b,ah as q,aX as me,aY as pe,aZ as ge,a_ as he,E as D,a1 as R,aN as Q,u as Y,a$ as Ve,c as l,a3 as O,b0 as xe,ao as B,b1 as be,b2 as J,b3 as ke,V as ye,b4 as Ce,a9 as Z,b5 as le,b6 as j,d as ne,b7 as Fe,b8 as _e,b9 as we,af as Ie,ba as Pe,ai as Se,a2 as De,bb as Ae,ak as Te,al as Re,bc as Be,bd as Ne,F as ee,G as Ue,be as Ee,bf as $e,aq as He,bg as Me,aC as Oe,bh as ze,K as Ge,aA as Le,P as Ke,W as X,Q as M,O as qe,ar as Qe,T as ue,a7 as We,Z as te,aI as Xe}from"./app-245f26ec.js";import{a as Ze}from"./Default.vue_vue_type_script_setup_true_lang-d112a111.js";import{u as Ye}from"./useOperatorTeamApi-f005c82c.js";import{P as je}from"./index.m-3c027150.js";function Je(e,c,t){if(c==null)return e;if(Array.isArray(c))throw new Error("Multiple matches is not implemented");return typeof c=="number"&&~c?l(O,null,[l("span",{class:"v-autocomplete__unmask"},[e.substr(0,c)]),l("span",{class:"v-autocomplete__mask"},[e.substr(c,t)]),l("span",{class:"v-autocomplete__unmask"},[e.substr(c+t)])]):e}const ae=ie()({name:"VAutocomplete",props:{search:String,...se({filterKeys:["title"]}),...re(),...ce(de({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ve({transition:!1})},emits:{"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,c){let{slots:t}=c;const{t:A}=fe(),d=b(),n=b(!1),o=b(!0),s=q(e,"menu"),{items:g,transformIn:k,transformOut:V}=me(e),v=q(e,"search",""),f=q(e,"modelValue",[],a=>k(pe(a)),a=>{const i=V(a);return e.multiple?i:i[0]??null}),h=ge(),{filteredItems:N,getMatches:U}=he(e,g,D(()=>o.value?void 0:v.value)),w=D(()=>f.value.map(a=>g.value.find(i=>e.valueComparator(i.value,a.value))||a)),z=D(()=>e.hideSelected?N.value.filter(a=>!w.value.some(i=>i.value===a.value)):N.value),E=D(()=>w.value.map(a=>a.props.value)),G=b();function W(a){f.value=[],e.openOnClear&&(s.value=!0),v.value=""}function K(){e.hideNoData&&!g.value.length||e.readonly||h!=null&&h.isReadonly.value||(s.value=!0)}function I(a){if(!(e.readonly||h!=null&&h.isReadonly.value)){if(["Enter","ArrowDown"].includes(a.key)&&(s.value=!0),["Escape"].includes(a.key)&&(s.value=!1),["Enter","Escape","Tab"].includes(a.key)&&(o.value=!0),a.key==="ArrowDown"){var i;a.preventDefault(),(i=G.value)==null||i.focus("next")}else if(a.key==="ArrowUp"){var p;a.preventDefault(),(p=G.value)==null||p.focus("prev")}}}function P(a){v.value=a.target.value}function $(){n.value&&(o.value=!0)}function u(a){n.value=!0}function y(a){if(a.relatedTarget==null){var i;(i=d.value)==null||i.focus()}}const m=b(!1);function x(a){if(e.multiple){const i=E.value.findIndex(p=>e.valueComparator(p,a.value));if(i===-1)f.value=[...f.value,a],v.value="";else{const p=[...f.value];p.splice(i,1),f.value=p}}else f.value=[a],m.value=!0,t.selection||(v.value=a.title),s.value=!1,o.value=!0,Q(()=>m.value=!1)}return R(n,a=>{if(a){var i;m.value=!0,v.value=e.multiple||t.selection?"":String(((i=w.value.at(-1))==null?void 0:i.props.title)??""),o.value=!0,Q(()=>m.value=!1)}else s.value=!1,v.value=""}),R(v,a=>{!n.value||m.value||(a&&(s.value=!0),o.value=!a)}),Y(()=>{const a=!!(e.chips||t.chip),i=!!(!e.hideNoData||z.value.length||t.prepend||t.append||t["no-data"]),[p]=Ve(e);return l(le,B({ref:d},p,{modelValue:v.value,"onUpdate:modelValue":C=>{C==null&&(f.value=[])},validationValue:f.externalValue,dirty:f.value.length>0,onInput:P,class:["v-autocomplete",{"v-autocomplete--active-menu":s.value,"v-autocomplete--chips":!!e.chips,[`v-autocomplete--${e.multiple?"multiple":"single"}`]:!0,"v-autocomplete--selection-slot":!!t.selection}],appendInnerIcon:e.menuIcon,readonly:e.readonly,"onClick:clear":W,"onClick:control":K,"onClick:input":K,onFocus:()=>n.value=!0,onBlur:()=>n.value=!1,onKeydown:I}),{...t,default:()=>{var C,T,L;return l(O,null,[l(xe,B({modelValue:s.value,"onUpdate:modelValue":r=>s.value=r,activator:"parent",contentClass:"v-autocomplete__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:$},e.menuProps),{default:()=>[i&&l(be,{ref:G,selected:E.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:r=>r.preventDefault(),onFocusin:u,onFocusout:y},{default:()=>[!z.value.length&&!e.hideNoData&&(((C=t["no-data"])==null?void 0:C.call(t))??l(J,{title:A(e.noDataText)},null)),(T=t["prepend-item"])==null?void 0:T.call(t),z.value.map((r,S)=>{var H;return((H=t.item)==null?void 0:H.call(t,{item:r,index:S,props:B(r.props,{onClick:()=>x(r)})}))??l(J,B({key:S},r.props,{onClick:()=>x(r)}),{prepend:F=>{let{isSelected:_}=F;return e.multiple&&!e.hideSelected?l(ke,{modelValue:_,ripple:!1},null):void 0},title:()=>{var F,_;return o.value?r.title:Je(r.title,(F=U(r))==null?void 0:F.title,((_=v.value)==null?void 0:_.length)??0)}})}),(L=t["append-item"])==null?void 0:L.call(t)]})]}),w.value.map((r,S)=>{function H(_){_.stopPropagation(),_.preventDefault(),x(r)}const F={"onClick:close":H,modelValue:!0,"onUpdate:modelValue":void 0};return l("div",{key:r.value,class:"v-autocomplete__selection"},[a?l(ye,{defaults:{VChip:{closable:e.closableChips,size:"small",text:r.title}}},{default:()=>[t.chip?t.chip({item:r,index:S,props:F}):l(Ce,F,null)]}):t.selection?t.selection({item:r,index:S}):l("span",{class:"v-autocomplete__selection-text"},[r.title,e.multiple&&S<w.value.length-1&&l("span",{class:"v-autocomplete__selection-comma"},[Z(",")])])])})])}})}),j({isFocused:n,isPristine:o,menu:s,search:v,filteredItems:N,select:x},d)}}),et=ne({name:"VForm",props:{...Fe()},emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,c){let{slots:t,emit:A}=c;const d=_e(e),n=b();function o(g){g.preventDefault(),d.reset()}function s(g){const k=g,V=d.validate();k.then=V.then.bind(V),k.catch=V.catch.bind(V),k.finally=V.finally.bind(V),A("submit",k),k.defaultPrevented||V.then(v=>{let{valid:f}=v;if(f){var h;(h=n.value)==null||h.submit()}}),k.preventDefault()}return Y(()=>{var g;return l("form",{ref:n,class:"v-form",novalidate:!0,onReset:o,onSubmit:s},[(g=t.default)==null?void 0:g.call(t,d)])}),j(d,n)}});const tt=ne({name:"VTextarea",directives:{Intersect:we},inheritAttrs:!1,props:{autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,hint:String,persistentHint:Boolean,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,...Ie(),...Pe()},emits:{"click:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,c){let{attrs:t,emit:A,slots:d}=c;const n=q(e,"modelValue"),{isFocused:o,focus:s,blur:g}=Se(e),k=D(()=>typeof e.counterValue=="function"?e.counterValue(n.value):(n.value||"").toString().length),V=D(()=>{if(t.maxlength)return t.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function v(u,y){var m,x;!e.autofocus||!u||(m=y[0].target)==null||(x=m.focus)==null||x.call(m)}const f=b(),h=b(),N=b(""),U=b(),w=D(()=>o.value||e.persistentPlaceholder),z=D(()=>e.messages.length?e.messages:w.value||e.persistentHint?e.hint:"");function E(){if(U.value!==document.activeElement){var u;(u=U.value)==null||u.focus()}o.value||s()}function G(u){E(),A("click:control",u)}function W(u){u.stopPropagation(),E(),Q(()=>{n.value="",Me(e["onClick:clear"],u)})}function K(u){n.value=u.target.value}const I=b();function P(){e.autoGrow&&Q(()=>{if(!I.value||!h.value)return;const u=getComputedStyle(I.value),y=getComputedStyle(h.value.$el),m=parseFloat(u.getPropertyValue("--v-field-padding-top"))+parseFloat(u.getPropertyValue("--v-input-padding-top"))+parseFloat(u.getPropertyValue("--v-field-padding-bottom")),x=I.value.scrollHeight,a=parseFloat(u.lineHeight),i=Math.max(parseFloat(e.rows)*a+m,parseFloat(y.getPropertyValue("--v-input-control-height"))),p=parseFloat(e.maxRows)*a+m||1/0;N.value=Oe(ze(x??0,i,p))})}De(P),R(n,P),R(()=>e.rows,P),R(()=>e.maxRows,P),R(()=>e.density,P);let $;return R(I,u=>{if(u)$=new ResizeObserver(P),$.observe(I.value);else{var y;(y=$)==null||y.disconnect()}}),Ae(()=>{var u;(u=$)==null||u.disconnect()}),Y(()=>{const u=!!(d.counter||e.counter||e.counterValue),y=!!(u||d.details),[m,x]=Te(t),[{modelValue:a,...i}]=Re(e),[p]=Be(e);return l(He,B({ref:f,modelValue:n.value,"onUpdate:modelValue":C=>n.value=C,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--flush-details":["plain","underlined"].includes(e.variant)}],"onClick:prepend":e["onClick:prepend"],"onClick:append":e["onClick:append"]},m,i,{focused:o.value,messages:z.value}),{...d,default:C=>{let{isDisabled:T,isDirty:L,isReadonly:r,isValid:S}=C;return l(Ne,B({ref:h,style:{"--v-textarea-control-height":N.value},"onClick:control":G,"onClick:clear":W,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},p,{active:w.value||L.value,dirty:L.value||e.dirty,focused:o.value,error:S.value===!1}),{...d,default:H=>{let{props:{class:F,..._}}=H;return l(O,null,[e.prefix&&l("span",{class:"v-text-field__prefix"},[e.prefix]),ee(l("textarea",B({ref:U,class:F,value:n.value,onInput:K,autofocus:e.autofocus,readonly:r.value,disabled:T.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:E,onBlur:g},_,x),null),[[Ue("intersect"),{handler:v},null,{once:!0}]]),e.autoGrow&&ee(l("textarea",{class:[F,"v-textarea__sizer"],"onUpdate:modelValue":oe=>n.value=oe,ref:I,readonly:!0,"aria-hidden":"true"},null),[[Ee,n.value]]),e.suffix&&l("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:y?C=>{var T;return l(O,null,[(T=d.details)==null?void 0:T.call(d,C),u&&l(O,null,[l("span",null,null),l($e,{active:e.persistentCounter||o.value,value:k.value,max:V.value},d.counter)])])}:void 0})}),j({},f,h,U)}}),at=ue("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Edit team",-1),it=Ge({__name:"Edit",props:{team:null,operators:null,ticketCategories:null},setup(e){const c=e,t=Le({name:c.team.name,description:c.team.description,operators:c.team.operators.map(n=>n.uuid),ticket_categories:c.team.ticket_categories.map(n=>n.uuid)}),A=Ye();async function d(){const n=await A.update(c.team.uuid,t);console.log(n)}return(n,o)=>(qe(),Ke(O,null,[l(X(Qe),{title:"Edit team"}),l(Ze,null,{header:M(()=>[at]),default:M(()=>[ue("div",null,[l(et,{onSubmit:We(d,["prevent"])},{default:M(()=>[l(le,{modelValue:t.name,"onUpdate:modelValue":o[0]||(o[0]=s=>t.name=s),label:"Name"},null,8,["modelValue"]),l(tt,{modelValue:t.description,"onUpdate:modelValue":o[1]||(o[1]=s=>t.description=s),label:"Description"},null,8,["modelValue"]),l(ae,{modelValue:t.operators,"onUpdate:modelValue":o[2]||(o[2]=s=>t.operators=s),multiple:"",clearable:"",chips:"","closable-chips":"",label:"Operators",items:e.operators,"item-title":"name","item-value":"uuid"},null,8,["modelValue","items"]),l(ae,{modelValue:t.ticket_categories,"onUpdate:modelValue":o[3]||(o[3]=s=>t.ticket_categories=s),multiple:"",clearable:"",chips:"","closable-chips":"",label:"Ticket categories",items:e.ticketCategories,"item-title":"name","item-value":"uuid"},null,8,["modelValue","items"]),l(te,{type:"submit",color:"primary",class:"mr-3"},{default:M(()=>[Z("Save")]),_:1}),l(X(Xe),{href:X(je)("ticket-allocator.teams.index")},{default:M(()=>[l(te,{class:"mr-3"},{default:M(()=>[Z("Cancel")]),_:1})]),_:1},8,["href"])]),_:1},8,["onSubmit"])])]),_:1})],64))}});export{it as default};
//# sourceMappingURL=Edit-655bc8b5.js.map
