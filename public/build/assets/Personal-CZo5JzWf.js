import{S,O as B,P as D,f as l,R as O,T as a,U as r,F as _,a2 as b,X as k,Y as U,a1 as C,a3 as x,b7 as A,a4 as L,a6 as E,af as T,ag as F,i as c,ah as H,W as u,aa as Z,a5 as $,_ as g,$ as R,ab as q,Z as z}from"./app-D-OuKB0U.js";import{M as G,a as Q,c as P,f as W,C as X,g as n,h as Y,j as J,T as K,V as ee}from"./OperatorRepository-ctJM_GtD.js";import{T as te}from"./TransitionGroup-CNQu6WHe.js";import{V as ae,a as oe}from"./VRow-B_41SZM6.js";import{V as se}from"./VContainer-CoIPepmf.js";import{V as ne}from"./VTable-BuHGwgWn.js";import"./VInput-BvWibShK.js";import"./VSelectionControl-BmzHwt9U.js";/* empty css              */const le={timestamp:d=>{const s=S(d);return s.isBefore(Date.now(),"day")?`${s.format("L LT")} (${s.fromNow()})`:`${s.format("LT")} (${s.fromNow()})`}},re=["innerHTML"],ue=B({__name:"PersonalTicket",props:{ticket:{},columns:{}},setup(d){D(e=>({f435b580:y.value.delay,"44ec2692":y.value.duration}));const s=d,i=new G({linkify:!0}).use(Q),p=P(),o=l(()=>O().props.options),v=l(()=>o.value[`${p.value}_threshold`]),m=l(()=>s.ticket[p.value]),h=l(()=>m.value>v.value),y=l(()=>({delay:-m.value+"s",duration:v.value+"s"}));function V(e,f,t=""){const[w,...I]=f.split("|"),M=A(e,w,t);return M===t?M:I.reduce((j,N)=>le[N](j),M)}return(e,f)=>(a(),r("tr",{class:x(["personal-ticket",{overflow:h.value}])},[(a(!0),r(_,null,b(e.columns,([,t])=>(a(),r("td",{key:t},[t==="meta.icon"?(a(),k(U,{key:0,icon:V(e.ticket,t,"mdi-help"),color:"white"},null,8,["icon"])):(a(),r("span",{key:1,innerHTML:C(i).renderInline(V(e.ticket,t,"-"))},null,8,re))]))),128))],2))}}),ie=L(ue,[["__scopeId","data-v-fbe5f805"]]),ce={class:"font-semibold text-xl text-gray-800 leading-tight"},de=B({__name:"Personal",props:{layout:{default:"default"},operator:{},columns:{}},setup(d){const s=d,i=P(),p=l(()=>$(J)),o=l(()=>$(K)),v=W(Y),m=l(()=>p.value.with("tickets",e=>e.with("category").orderBy(i.value,"desc")).first());E(()=>{v.listen(X.PropsInvalidated,()=>T.reload()).listen(n.Created,o.value.create).listen(n.Closed,o.value.close).listen(n.Bound,o.value.bind).listen(n.Accepted,o.value.accept).listen(n.Unbound,o.value.unbind).listen(n.CategoryChanged,o.value.changeCategory).listen(n.MetaValueSet,o.value.setMetaValue).listen(n.MetaValuesMerged,o.value.mergeMetaValues).listen(n.MetricsAdjusted,o.value.adjustMetrics)});function h(){p.value.save(s.operator)}const y=T.on("navigate",h),V=T.on("success",h);return F(()=>{y(),V()}),(e,f)=>(a(),r(_,null,[c(C(H),{title:e.$t("personal")},null,8,["title"]),(a(),k(Z(`${e.layout}-layout`),null,{header:u(()=>[g("h2",ce,R(e.$t("personal")),1)]),default:u(()=>[g("div",null,[c(se,{fluid:""},{default:u(()=>[c(ae,null,{default:u(()=>[c(oe,{offset:"10",cols:"2"},{default:u(()=>[c(ee,{modelValue:C(i),"onUpdate:modelValue":f[0]||(f[0]=t=>q(i)?i.value=t:null),"false-value":"weight","true-value":"duration","prepend-icon":"mdi-weight","append-icon":"mdi-clock",class:"d-flex justify-end"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),m.value?(a(),k(ne,{key:0,"fixed-header":"",density:"compact",class:"personal-monitor"},{default:u(()=>[g("thead",null,[g("tr",null,[(a(!0),r(_,null,b(e.columns,([t,w])=>(a(),r("th",{key:w},R(t),1))),128))])]),c(C(te),{tag:"tbody",name:"ticket-pool"},{default:u(()=>[(a(!0),r(_,null,b(m.value.tickets,t=>(a(),k(ie,{key:t.uuid,ticket:t,columns:e.columns},null,8,["ticket","columns"]))),128))]),_:1})]),_:1})):z("",!0)])]),_:1}))],64))}}),ke=L(de,[["__scopeId","data-v-b72fb397"]]);export{ke as default};
//# sourceMappingURL=Personal-CZo5JzWf.js.map
