import{_ as L}from"./Default.vue_vue_type_script_setup_true_lang-CIJLHCTD.js";import{L as P,M as S,f as s,Q as j,P as t,R as o,F as k,$ as M,T as w,_ as p,aU as T,U as x,a0 as U,a2 as N,aa as C,ab as A,i as r,ac as E,S as i,a1 as b,X as V,Y as R,a6 as F,W as O}from"./app-C-CRUwbe.js";import{M as D,a as H,c as B,f as z,C as G,g as a,h as Q,j as W,T as X,V as Y}from"./OperatorRepository-OXcPx-YE.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as Z}from"./TransitionGroup-BI5mMc16.js";import{V as q}from"./VContainer-DMJFOg54.js";import{V as J,a as K}from"./VRow-CnDalTRZ.js";import{V as ee}from"./VTable-DfPHwhuq.js";import"./scopeId-BORCVAFh.js";import"./VGrid-HAxxLD0V.js";import"./VInput-CaeWZt5i.js";import"./VSelectionControl-1KYC8ffO.js";const te=["innerHTML"],ae=P({__name:"PersonalTicket",props:{ticket:{},columns:{}},setup(g){S(c=>({"67a8c2c2":_.value.delay,"488047f5":_.value.duration}));const y=g,u=new D({linkify:!0}).use(H),m=B(),e=s(()=>j().props.options),v=s(()=>e.value[`${m.value}_threshold`]),f=s(()=>y.ticket[m.value]),h=s(()=>f.value>v.value),_=s(()=>({delay:-f.value+"s",duration:v.value+"s"}));return(c,n)=>(t(),o("tr",{class:U(["ticket",{overflow:h.value}])},[(t(!0),o(k,null,M(c.columns,([,l])=>(t(),o("td",{key:l},[l==="meta.icon"?(t(),w(x,{key:0,icon:p(T)(c.ticket,l,"mdi-help"),color:"white"},null,8,["icon"])):(t(),o("span",{key:1,class:"text-white",innerHTML:p(u).renderInline(p(T)(c.ticket,l,"-"))},null,8,te))]))),128))],2))}}),se=I(ae,[["__scopeId","data-v-a782e479"]]),oe={class:"font-semibold text-xl text-gray-800 leading-tight"},ne=P({__name:"Personal",props:{operator:{},columns:{}},setup(g){const y=g,u=B(),m=s(()=>b(W)),e=s(()=>b(X)),v=z(Q),f=s(()=>m.value.with("tickets",n=>n.with("category").orderBy(u.value,"desc")).first());N(()=>{v.listen(G.PropsInvalidated,()=>C.reload()).listen(a.Created,e.value.create).listen(a.Closed,e.value.close).listen(a.Bound,e.value.bind).listen(a.Accepted,e.value.accept).listen(a.Unbound,e.value.unbind).listen(a.CategoryChanged,e.value.changeCategory).listen(a.MetaValueSet,e.value.setMetaValue).listen(a.MetaValuesMerged,e.value.mergeMetaValues).listen(a.MetricsAdjusted,e.value.adjustMetrics)});function h(){m.value.save(y.operator)}const _=C.on("navigate",h),c=C.on("success",h);return A(()=>{_(),c()}),(n,l)=>(t(),o(k,null,[r(p(E),{title:n.$t("personal")},null,8,["title"]),r(L,null,{header:i(()=>[V("h2",oe,R(n.$t("personal")),1)]),default:i(()=>[V("div",null,[r(q,{fluid:""},{default:i(()=>[r(J,null,{default:i(()=>[r(K,{offset:"10",cols:"2"},{default:i(()=>[r(Y,{modelValue:p(u),"onUpdate:modelValue":l[0]||(l[0]=d=>F(u)?u.value=d:null),"false-value":"weight","true-value":"duration","prepend-icon":"mdi-weight","append-icon":"mdi-clock",class:"d-flex justify-end"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),f.value?(t(),w(ee,{key:0,"fixed-header":"",density:"comfortable",class:"personal-monitor"},{default:i(()=>[V("thead",null,[V("tr",null,[(t(!0),o(k,null,M(n.columns,([d,$])=>(t(),o("th",{key:$},R(d),1))),128))])]),r(p(Z),{tag:"tbody",name:"ticket-pool"},{default:i(()=>[(t(!0),o(k,null,M(f.value.tickets,d=>(t(),w(se,{key:d.uuid,ticket:d,columns:n.columns},null,8,["ticket","columns"]))),128))]),_:1})]),_:1})):O("",!0)])]),_:1})],64))}}),Ve=I(ne,[["__scopeId","data-v-4dfe1ea0"]]);export{Ve as default};
//# sourceMappingURL=Personal-CxCKjBtg.js.map
