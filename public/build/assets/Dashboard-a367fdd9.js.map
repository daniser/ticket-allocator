{"version":3,"file":"Dashboard-a367fdd9.js","sources":["../../../resources/js/composables/useDragAndDrop.ts","../../../resources/js/composables/useDropZone.ts","../../../node_modules/vuetify/lib/components/VCard/VCardActions.mjs","../../../node_modules/vuetify/lib/components/VCard/VCardSubtitle.mjs","../../../node_modules/vuetify/lib/components/VCard/VCardTitle.mjs","../../../node_modules/vuetify/lib/components/VCard/VCardItem.mjs","../../../node_modules/vuetify/lib/components/VCard/VCardText.mjs","../../../node_modules/vuetify/lib/components/VCard/VCard.mjs","../../../resources/js/Components/Ticket.vue","../../../resources/js/repositories/index.ts","../../../resources/js/repositories/TicketRepository.ts","../../../resources/js/Components/TicketPool.vue","../../../resources/js/api/useSupervisorApi.ts","../../../resources/js/Components/TicketRow.vue","../../../resources/js/Components/OperatorRow.vue","../../../resources/js/events.d.ts","../../../node_modules/pinia-orm/dist/helpers.mjs","../../../resources/js/repositories/OperatorRepository.ts","../../../node_modules/vuetify/lib/components/VGrid/VContainer.mjs","../../../node_modules/vuetify/lib/components/VGrid/VCol.mjs","../../../node_modules/vuetify/lib/components/VGrid/VRow.mjs","../../../node_modules/vuetify/lib/components/VSwitch/VSwitch.mjs","../../../resources/js/Pages/Dashboard.vue"],"sourcesContent":["import { ref } from \"vue\";\r\nimport type { MaybeComputedRef } from \"@vueuse/core\";\r\nimport { useEventListener } from \"@vueuse/core\";\r\n\r\nexport type DragStartHandler = (element: HTMLElement, dataTransfer: DataTransfer | null) => void;\r\n\r\nexport function useDragAndDrop(\r\n    target: MaybeComputedRef<HTMLElement | null | undefined>,\r\n    onDragStart?: DragStartHandler | string\r\n) {\r\n    const element = ref<HTMLElement | null | undefined>();\r\n\r\n    useEventListener<DragEvent>(target, \"dragstart\", (event) => {\r\n        element.value = event.target as HTMLElement;\r\n\r\n        if (typeof onDragStart === \"string\") {\r\n            const entry = onDragStart;\r\n            onDragStart = (element, dataTransfer) => {\r\n                dataTransfer?.setData(\"text/plain\", element.dataset[entry] ?? \"\");\r\n            };\r\n        }\r\n\r\n        onDragStart?.(element.value, event.dataTransfer);\r\n    });\r\n\r\n    useEventListener<DragEvent>(target, \"dragend\", () => {\r\n        element.value = null;\r\n    });\r\n\r\n    return {\r\n        element,\r\n    };\r\n}\r\n\r\nexport type UseDragAndDropReturn = ReturnType<typeof useDragAndDrop>;\r\n","import { ref } from \"vue\";\nimport type { MaybeComputedRef } from \"@vueuse/core\";\nimport { isClient, useEventListener } from \"@vueuse/core\";\n\n// export type DropHandler = <T extends DataTransfer | File[] = DataTransfer>(arg: T | null) => void\nexport type DropHandler = (arg: File[] | DataTransfer | null) => void;\nexport type FileDropHandler = (arg: File[] | null) => void;\nexport type DataDropHandler = (arg: DataTransfer | null) => void;\n\nexport function useDropZone(\n    target: MaybeComputedRef<HTMLElement | null | undefined>,\n    onDrop?: DataDropHandler,\n    filesOnly = true\n) {\n    const isOverDropZone = ref(false);\n    let counter = 0;\n\n    if (isClient) {\n        useEventListener<DragEvent>(target, \"dragenter\", (event) => {\n            event.preventDefault();\n            counter++;\n            isOverDropZone.value = true;\n        });\n        useEventListener<DragEvent>(target, \"dragover\", (event) => {\n            event.preventDefault();\n        });\n        useEventListener<DragEvent>(target, \"dragleave\", (event) => {\n            event.preventDefault();\n            counter--;\n            if (counter === 0) isOverDropZone.value = false;\n        });\n        useEventListener<DragEvent>(target, \"drop\", (event) => {\n            event.preventDefault();\n            counter = 0;\n            isOverDropZone.value = false;\n            if (onDrop) {\n                if (filesOnly) {\n                    const files = Array.from(event.dataTransfer?.files ?? []);\n                    const onFileDrop = onDrop as FileDropHandler;\n                    onFileDrop(files.length === 0 ? null : files);\n                } else {\n                    const onDataDrop = onDrop as DataDropHandler;\n                    onDataDrop(event.dataTransfer);\n                }\n            }\n        });\n    }\n\n    return {\n        isOverDropZone,\n    };\n}\n\nexport type UseDropZoneReturn = ReturnType<typeof useDropZone>;\n","import { createVNode as _createVNode } from \"vue\";\n// Composables\nimport { provideDefaults } from \"../../composables/defaults.mjs\"; // Utility\nimport { defineComponent, useRender } from \"../../util/index.mjs\";\nexport const VCardActions = defineComponent({\n  name: 'VCardActions',\n  setup(_, _ref) {\n    let {\n      slots\n    } = _ref;\n    provideDefaults({\n      VBtn: {\n        variant: 'text'\n      }\n    });\n    useRender(() => {\n      var _slots$default;\n      return _createVNode(\"div\", {\n        \"class\": \"v-card-actions\"\n      }, [(_slots$default = slots.default) == null ? void 0 : _slots$default.call(slots)]);\n    });\n    return {};\n  }\n});\n//# sourceMappingURL=VCardActions.mjs.map","import { createSimpleFunctional } from \"../../util/index.mjs\";\nexport const VCardSubtitle = createSimpleFunctional('v-card-subtitle');\n//# sourceMappingURL=VCardSubtitle.mjs.map","import { createSimpleFunctional } from \"../../util/index.mjs\";\nexport const VCardTitle = createSimpleFunctional('v-card-title');\n//# sourceMappingURL=VCardTitle.mjs.map","import { createVNode as _createVNode } from \"vue\";\n// Components\nimport { VAvatar } from \"../VAvatar/index.mjs\";\nimport { VCardSubtitle } from \"./VCardSubtitle.mjs\";\nimport { VCardTitle } from \"./VCardTitle.mjs\";\nimport { VDefaultsProvider } from \"../VDefaultsProvider/index.mjs\"; // Composables\nimport { IconValue } from \"../../composables/icons.mjs\";\nimport { makeDensityProps } from \"../../composables/density.mjs\"; // Utility\nimport { defineComponent, useRender } from \"../../util/index.mjs\";\nexport const VCardItem = defineComponent({\n  name: 'VCardItem',\n  props: {\n    appendAvatar: String,\n    appendIcon: IconValue,\n    prependAvatar: String,\n    prependIcon: IconValue,\n    subtitle: String,\n    title: String,\n    ...makeDensityProps()\n  },\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    useRender(() => {\n      var _slots$prepend, _slots$title, _slots$subtitle, _slots$default, _slots$append;\n      const hasPrepend = !!(props.prependAvatar || props.prependIcon || slots.prepend);\n      const hasAppend = !!(props.appendAvatar || props.appendIcon || slots.append);\n      const hasTitle = !!(props.title || slots.title);\n      const hasSubtitle = !!(props.subtitle || slots.subtitle);\n      return _createVNode(\"div\", {\n        \"class\": \"v-card-item\"\n      }, [hasPrepend && _createVNode(VDefaultsProvider, {\n        \"key\": \"prepend\",\n        \"defaults\": {\n          VAvatar: {\n            density: props.density,\n            icon: props.prependIcon,\n            image: props.prependAvatar\n          },\n          VIcon: {\n            density: props.density,\n            icon: props.prependIcon\n          }\n        }\n      }, {\n        default: () => [_createVNode(\"div\", {\n          \"class\": \"v-card-item__prepend\"\n        }, [((_slots$prepend = slots.prepend) == null ? void 0 : _slots$prepend.call(slots)) ?? _createVNode(VAvatar, null, null)])]\n      }), _createVNode(\"div\", {\n        \"class\": \"v-card-item__content\"\n      }, [hasTitle && _createVNode(VCardTitle, {\n        \"key\": \"title\"\n      }, {\n        default: () => [((_slots$title = slots.title) == null ? void 0 : _slots$title.call(slots)) ?? props.title]\n      }), hasSubtitle && _createVNode(VCardSubtitle, {\n        \"key\": \"subtitle\"\n      }, {\n        default: () => [((_slots$subtitle = slots.subtitle) == null ? void 0 : _slots$subtitle.call(slots)) ?? props.subtitle]\n      }), (_slots$default = slots.default) == null ? void 0 : _slots$default.call(slots)]), hasAppend && _createVNode(VDefaultsProvider, {\n        \"key\": \"append\",\n        \"defaults\": {\n          VAvatar: {\n            density: props.density,\n            icon: props.appendIcon,\n            image: props.appendAvatar\n          },\n          VIcon: {\n            density: props.density,\n            icon: props.appendIcon\n          }\n        }\n      }, {\n        default: () => [_createVNode(\"div\", {\n          \"class\": \"v-card-item__append\"\n        }, [((_slots$append = slots.append) == null ? void 0 : _slots$append.call(slots)) ?? _createVNode(VAvatar, null, null)])]\n      })]);\n    });\n    return {};\n  }\n});\n//# sourceMappingURL=VCardItem.mjs.map","import { createSimpleFunctional } from \"../../util/index.mjs\";\nexport const VCardText = createSimpleFunctional('v-card-text');\n//# sourceMappingURL=VCardText.mjs.map","import { withDirectives as _withDirectives, resolveDirective as _resolveDirective, createVNode as _createVNode } from \"vue\";\n/* eslint-disable complexity */\n\n// Styles\nimport \"./VCard.css\";\n\n// Components\nimport { VCardActions } from \"./VCardActions.mjs\";\nimport { VCardItem } from \"./VCardItem.mjs\";\nimport { VCardText } from \"./VCardText.mjs\";\nimport { VDefaultsProvider } from \"../VDefaultsProvider/index.mjs\";\nimport { VImg } from \"../VImg/index.mjs\"; // Directives\nimport { Ripple } from \"../../directives/ripple/index.mjs\"; // Composables\nimport { genOverlays, makeVariantProps, useVariant } from \"../../composables/variant.mjs\";\nimport { IconValue } from \"../../composables/icons.mjs\";\nimport { LoaderSlot, makeLoaderProps, useLoader } from \"../../composables/loader.mjs\";\nimport { makeBorderProps, useBorder } from \"../../composables/border.mjs\";\nimport { makeDensityProps, useDensity } from \"../../composables/density.mjs\";\nimport { makeDimensionProps, useDimension } from \"../../composables/dimensions.mjs\";\nimport { makeElevationProps, useElevation } from \"../../composables/elevation.mjs\";\nimport { makeLocationProps, useLocation } from \"../../composables/location.mjs\";\nimport { makePositionProps, usePosition } from \"../../composables/position.mjs\";\nimport { makeRoundedProps, useRounded } from \"../../composables/rounded.mjs\";\nimport { makeRouterProps, useLink } from \"../../composables/router.mjs\";\nimport { makeTagProps } from \"../../composables/tag.mjs\";\nimport { makeThemeProps, provideTheme } from \"../../composables/theme.mjs\"; // Utilities\nimport { defineComponent, useRender } from \"../../util/index.mjs\";\nimport { computed } from 'vue';\nexport const VCard = defineComponent({\n  name: 'VCard',\n  directives: {\n    Ripple\n  },\n  props: {\n    appendAvatar: String,\n    appendIcon: IconValue,\n    disabled: Boolean,\n    flat: Boolean,\n    hover: Boolean,\n    image: String,\n    link: {\n      type: Boolean,\n      default: undefined\n    },\n    prependAvatar: String,\n    prependIcon: IconValue,\n    ripple: {\n      type: Boolean,\n      default: true\n    },\n    subtitle: String,\n    text: String,\n    title: String,\n    ...makeThemeProps(),\n    ...makeBorderProps(),\n    ...makeDensityProps(),\n    ...makeDimensionProps(),\n    ...makeElevationProps(),\n    ...makeLoaderProps(),\n    ...makeLocationProps(),\n    ...makePositionProps(),\n    ...makeRoundedProps(),\n    ...makeRouterProps(),\n    ...makeTagProps(),\n    ...makeVariantProps({\n      variant: 'elevated'\n    })\n  },\n  setup(props, _ref) {\n    let {\n      attrs,\n      slots\n    } = _ref;\n    const {\n      themeClasses\n    } = provideTheme(props);\n    const {\n      borderClasses\n    } = useBorder(props);\n    const {\n      colorClasses,\n      colorStyles,\n      variantClasses\n    } = useVariant(props);\n    const {\n      densityClasses\n    } = useDensity(props);\n    const {\n      dimensionStyles\n    } = useDimension(props);\n    const {\n      elevationClasses\n    } = useElevation(props);\n    const {\n      loaderClasses\n    } = useLoader(props);\n    const {\n      locationStyles\n    } = useLocation(props);\n    const {\n      positionClasses\n    } = usePosition(props);\n    const {\n      roundedClasses\n    } = useRounded(props);\n    const link = useLink(props, attrs);\n    const isLink = computed(() => props.link !== false && link.isLink.value);\n    const isClickable = computed(() => !props.disabled && props.link !== false && (props.link || link.isClickable.value));\n    useRender(() => {\n      var _slots$image, _slots$text, _slots$default;\n      const Tag = isLink.value ? 'a' : props.tag;\n      const hasTitle = !!(slots.title || props.title);\n      const hasSubtitle = !!(slots.subtitle || props.subtitle);\n      const hasHeader = hasTitle || hasSubtitle;\n      const hasAppend = !!(slots.append || props.appendAvatar || props.appendIcon);\n      const hasPrepend = !!(slots.prepend || props.prependAvatar || props.prependIcon);\n      const hasImage = !!(slots.image || props.image);\n      const hasCardItem = hasHeader || hasPrepend || hasAppend;\n      const hasText = !!(slots.text || props.text);\n      return _withDirectives(_createVNode(Tag, {\n        \"class\": ['v-card', {\n          'v-card--disabled': props.disabled,\n          'v-card--flat': props.flat,\n          'v-card--hover': props.hover && !(props.disabled || props.flat),\n          'v-card--link': isClickable.value\n        }, themeClasses.value, borderClasses.value, colorClasses.value, densityClasses.value, elevationClasses.value, loaderClasses.value, positionClasses.value, roundedClasses.value, variantClasses.value],\n        \"style\": [colorStyles.value, dimensionStyles.value, locationStyles.value],\n        \"href\": link.href.value,\n        \"onClick\": isClickable.value && link.navigate,\n        \"tabindex\": props.disabled ? -1 : undefined\n      }, {\n        default: () => [hasImage && _createVNode(VDefaultsProvider, {\n          \"key\": \"image\",\n          \"defaults\": {\n            VImg: {\n              cover: true,\n              src: props.image\n            }\n          }\n        }, {\n          default: () => [_createVNode(\"div\", {\n            \"class\": \"v-card__image\"\n          }, [((_slots$image = slots.image) == null ? void 0 : _slots$image.call(slots)) ?? _createVNode(VImg, null, null)])]\n        }), _createVNode(LoaderSlot, {\n          \"name\": \"v-card\",\n          \"active\": !!props.loading,\n          \"color\": typeof props.loading === 'boolean' ? undefined : props.loading\n        }, {\n          default: slots.loader\n        }), hasCardItem && _createVNode(VCardItem, {\n          \"key\": \"item\",\n          \"prependAvatar\": props.prependAvatar,\n          \"prependIcon\": props.prependIcon,\n          \"title\": props.title,\n          \"subtitle\": props.subtitle,\n          \"appendAvatar\": props.appendAvatar,\n          \"appendIcon\": props.appendIcon\n        }, {\n          default: slots.item,\n          prepend: slots.prepend,\n          title: slots.title,\n          subtitle: slots.subtitle,\n          append: slots.append\n        }), hasText && _createVNode(VCardText, {\n          \"key\": \"text\"\n        }, {\n          default: () => [((_slots$text = slots.text) == null ? void 0 : _slots$text.call(slots)) ?? props.text]\n        }), (_slots$default = slots.default) == null ? void 0 : _slots$default.call(slots), slots.actions && _createVNode(VCardActions, null, {\n          default: slots.actions\n        }), genOverlays(isClickable.value, 'v-card')]\n      }), [[_resolveDirective(\"ripple\"), isClickable.value && props.ripple]]);\n    });\n    return {};\n  }\n});\n//# sourceMappingURL=VCard.mjs.map","<template>\n    <div class=\"d-inline-block\">\n        <v-btn size=\"small\" class=\"ticket\" :class=\"{ overflow }\" flat width=\"100\">\n            <v-icon color=\"white\" icon=\"mdi-airplane\" start />\n            <span class=\"text-white\">{{ compactPosition }}</span>\n            <v-overlay\n                open-on-click\n                activator=\"parent\"\n                location-strategy=\"connected\"\n                location=\"bottom center\"\n                origin=\"auto\"\n            >\n                <v-card width=\"400\" title=\"aaa\" subtitle=\"bbb\" text=\"zzz\" />\n            </v-overlay>\n        </v-btn>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from \"vue\";\nimport { usePage } from \"@inertiajs/vue3\";\nimport Ticket from \"@/models/Ticket\";\nimport { useSharedDisplayMode } from \"@/shared\";\n\nconst props = defineProps<{\n    ticket: Ticket;\n}>();\n\nconst mode = useSharedDisplayMode();\n\nconst threshold = computed(() => {\n    return usePage().props?.[`${mode.value}Threshold`] as number;\n});\n\nconst position = computed(() => props.ticket[mode.value]);\n\nconst compactPosition = computed(() => (position.value < 100000 ? position.value : position.value.toExponential(1)));\n\nconst overflow = computed(() => position.value > threshold.value);\n\nconst animation = computed(() => ({\n    delay: -position.value + \"s\",\n    duration: threshold.value + \"s\",\n}));\n</script>\n\n<style scoped>\n.ticket {\n    animation-delay: v-bind(\"animation.delay\");\n    animation-duration: v-bind(\"animation.duration\");\n}\n</style>\n","import { Query as BaseQuery, Repository as BaseRepository, Model } from \"pinia-orm\";\n\nexport class Query<M extends Model = Model> extends BaseQuery<M> {\n    increment(record: Record<keyof M, number>) {\n        return this.incrementOrDecrement(record, true);\n    }\n\n    decrement(record: Record<keyof M, number>) {\n        return this.incrementOrDecrement(record, false);\n    }\n\n    private incrementOrDecrement(record: Record<keyof M, number>, increment: boolean) {\n        const models = this.get(false);\n        if (models.length === 0) return [];\n        const newModels = models.map((model) => {\n            const newRecord = model.$getAttributes();\n            for (const key in record) {\n                if (Object.prototype.hasOwnProperty.call(newRecord, key) && typeof newRecord[key] === \"number\") {\n                    increment ? (newRecord[key] += record[key]) : (newRecord[key] -= record[key]);\n                }\n            }\n            const newModel = this.hydrate(newRecord, { action: \"update\", operation: \"set\" });\n            if (model.$self().updating(model, record) === false) return model;\n            newModel.$self().updated(newModel);\n            return newModel;\n        });\n        this.commit(\"update\", this.compile(newModels));\n        return newModels;\n    }\n}\n\nexport class Repository<M extends Model = Model> extends BaseRepository<M> {\n    query() {\n        return new Query(this.database, this.getModel(), this.queryCache, this.hydratedDataCache, this.pinia);\n    }\n}\n","import { Repository } from \".\";\nimport Ticket from \"@/models/Ticket\";\nimport * as Events from \"@/events\";\n\nexport default class TicketRepository extends Repository<Ticket> {\n    use = Ticket;\n\n    create = ({ uuid, categoryUuid }: Events.Ticket.CreatedPayload) => {\n        this.save({ uuid, category_uuid: categoryUuid, created_at: new Date().toISOString() });\n    };\n\n    close = ({ uuid }: Events.Ticket.ClosedPayload) => {\n        this.destroy(uuid);\n    };\n\n    bind = ({ uuid, operatorUuid }: Events.Ticket.BoundPayload) => {\n        this.where(\"uuid\", uuid).update({ handler_uuid: operatorUuid });\n    };\n\n    unbind = ({ uuid }: Events.Ticket.UnboundPayload) => {\n        this.where(\"uuid\", uuid).update({ handler_uuid: null });\n    };\n\n    changeCategory = ({ uuid, categoryUuid }: Events.Ticket.CategoryChangedPayload) => {\n        this.where(\"uuid\", uuid).update({ category_uuid: categoryUuid });\n    };\n\n    incrementInitialWeight = ({ uuid, weightPoints }: Events.Ticket.InitialWeightIncrementedPayload) => {\n        this.query().where(\"uuid\", uuid).increment({ initial_weight: weightPoints });\n    };\n\n    decrementInitialWeight = ({ uuid, weightPoints }: Events.Ticket.InitialWeightDecrementedPayload) => {\n        this.query().where(\"uuid\", uuid).decrement({ initial_weight: weightPoints });\n    };\n\n    incrementWeightIncrement = ({ uuid, weightPoints }: Events.Ticket.WeightIncrementIncrementedPayload) => {\n        this.query().where(\"uuid\", uuid).increment({ weight_increment: weightPoints });\n    };\n\n    decrementWeightIncrement = ({ uuid, weightPoints }: Events.Ticket.WeightIncrementDecrementedPayload) => {\n        this.query().where(\"uuid\", uuid).decrement({ weight_increment: weightPoints });\n    };\n\n    incrementComplexity = ({ uuid, complexityPoints }: Events.Ticket.ComplexityIncrementedPayload) => {\n        this.query().where(\"uuid\", uuid).increment({ complexity: complexityPoints });\n    };\n\n    decrementComplexity = ({ uuid, complexityPoints }: Events.Ticket.ComplexityDecrementedPayload) => {\n        this.query().where(\"uuid\", uuid).decrement({ complexity: complexityPoints });\n    };\n\n    incrementDelay = ({ uuid, delaySeconds }: Events.Ticket.DelayIncrementedPayload) => {\n        this.query().where(\"uuid\", uuid).increment({ delay: delaySeconds });\n    };\n\n    decrementDelay = ({ uuid, delaySeconds }: Events.Ticket.DelayDecrementedPayload) => {\n        this.query().where(\"uuid\", uuid).decrement({ delay: delaySeconds });\n    };\n\n    unbound() {\n        return this.where(\"handler_uuid\", null);\n    }\n\n    bound(handlerUuid: string) {\n        return this.where(\"handler_uuid\", handlerUuid);\n    }\n}\n","<template>\n    <div ref=\"ticketPool\" @mouseup=\"unlock\">\n        <TransitionGroup name=\"ticket-pool\" :css=\"animationEnabled\">\n            <TicketComponent\n                v-for=\"ticket in tickets\"\n                :key=\"ticket.uuid\"\n                :data-uuid=\"ticket.uuid\"\n                :ticket=\"ticket\"\n                draggable=\"true\"\n                class=\"mr-1 mb-1\"\n                @mousedown.ctrl=\"lock\"\n            />\n        </TransitionGroup>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch, onMounted } from \"vue\";\nimport { useMouse, usePointerLock } from \"@vueuse/core\";\nimport { useDragAndDrop } from \"@/composables\";\nimport { default as TicketComponent } from \"@/Components/Ticket.vue\";\nimport Ticket from \"@/models/Ticket\";\n\nimport { useRepo } from \"pinia-orm\";\nimport TicketRepository from \"@/repositories/TicketRepository\";\n\ndefineProps<{\n    tickets: Ticket[];\n}>();\n\nconst ticketPool = ref<HTMLElement | null>(null);\nuseDragAndDrop(ticketPool, \"uuid\");\n\nconst { lock, unlock, element, triggerElement } = usePointerLock(ticketPool);\nconst { x } = useMouse({ type: \"movement\" });\n\nconst ticketRepo = computed(() => useRepo(TicketRepository));\n\nwatch([element, x], ([element, x]) => {\n    if (!element || !triggerElement.value) return;\n\n    const uuid = triggerElement.value.dataset.uuid as string;\n    //multiplier.value = Math.round(Math.min(Math.max(multiplier.value - y / 10, 1), 100));\n    //correction.value = Math.max(correction.value - x * multiplier.value, correction.value - props.ticket.weight);\n    if (x < 0) {\n        ticketRepo.value.incrementInitialWeight({ uuid, weightPoints: -x * 10 });\n    } else if (x > 0) {\n        ticketRepo.value.decrementInitialWeight({ uuid, weightPoints: x * 10 });\n    }\n});\n\nconst animationEnabled = ref(false);\n\nonMounted(() => {\n    setTimeout(() => (animationEnabled.value = true), 500);\n});\n</script>\n\n<style scoped>\n.ticket-pool-move,\n.ticket-pool-enter-active {\n    transition: all 0.5s ease;\n}\n\n.ticket-pool-enter-from {\n    transform: translateX(300px);\n}\n\n.ticket-pool-leave-active {\n    transition: opacity 0.5s;\n}\n\n.ticket-pool-leave-to {\n    opacity: 0;\n}\n</style>\n","import route from \"ziggy-js\";\n\nexport function useSupervisorApi() {\n    async function ready(operatorUuid: string, ready: boolean) {\n        return await window.axios.patch(route(\"ticket-allocator.api.ready\", operatorUuid), { ready });\n    }\n\n    async function weight(ticketUuid: string, weightPoints: number) {\n        return await window.axios.patch(route(\"ticket-allocator.api.weight\", ticketUuid), {\n            weight_points: weightPoints,\n        });\n    }\n\n    async function handler(ticketUuid: string, operatorUuid?: string | null) {\n        return await window.axios.patch(route(\"ticket-allocator.api.handler\", ticketUuid), {\n            operator_uuid: operatorUuid ?? null,\n        });\n    }\n\n    async function close(ticketUuid: string) {\n        return await window.axios.delete(route(\"ticket-allocator.api.close\", ticketUuid));\n    }\n\n    return { ready, weight, handler, close };\n}\n","<template>\n    <tr ref=\"ticketRow\" class=\"ticket-row\" :class=\"{ dragover: isOverDropZone }\">\n        <td class=\"status\">\n            <slot name=\"status\" />\n        </td>\n\n        <td class=\"name font-weight-bold\">\n            <slot name=\"name\" />\n        </td>\n\n        <td class=\"load text-center\">\n            <slot name=\"load\">{{ tickets.length }}</slot\n            >/<slot name=\"load-max\">&infin;</slot>\n        </td>\n\n        <td class=\"complexity text-center\">\n            <slot name=\"complexity\">{{ complexity }}</slot\n            >/<slot name=\"complexity-max\">&infin;</slot>\n        </td>\n\n        <td class=\"tickets pt-1\" :class=\"{ collapsed }\">\n            <TicketPool :tickets=\"tickets\" />\n        </td>\n\n        <td class=\"more text-center\">\n            <v-btn size=\"x-small\" variant=\"tonal\" :icon=\"moreIcon\" @click=\"collapsed = !collapsed\" />\n        </td>\n    </tr>\n</template>\n\n<script setup lang=\"ts\">\nimport TicketPool from \"@/Components/TicketPool.vue\";\nimport { computed, ref } from \"vue\";\nimport { useSupervisorApi } from \"@/api\";\nimport { useDropZone } from \"@/composables\";\nimport Ticket from \"@/models/Ticket\";\n\nconst props = defineProps<{\n    tickets: Ticket[];\n}>();\n\nlet collapsed = ref(false);\n\nconst complexity = computed(() => props.tickets.reduce((n, { complexity }) => n + complexity, 0));\n\nconst moreIcon = computed(() => (collapsed.value ? \"mdi-chevron-down\" : \"mdi-chevron-up\"));\n\nconst api = useSupervisorApi();\n\nconst ticketRow = ref<HTMLElement | null>(null);\nconst { isOverDropZone } = useDropZone(\n    ticketRow,\n    async (dataTransfer) => {\n        const uuid = dataTransfer?.getData(\"text/plain\");\n        if (!uuid) throw new Error(\"Ticket UUID undefined.\");\n        const operatorUuid = ticketRow.value?.dataset.uuid;\n        return await api.handler(uuid, operatorUuid);\n    },\n    false\n);\n</script>\n\n<style scoped>\n.ticket-row .status {\n    width: 2.2em;\n}\n.ticket-row .name {\n    width: 14em;\n}\n.ticket-row .load {\n    width: 3.9em;\n}\n.ticket-row .complexity {\n    width: 5em;\n}\n.ticket-row .more {\n    width: 4.8em;\n}\n.ticket-row.dragover {\n    background-color: #def2de !important;\n}\n\n.tickets {\n    overflow: hidden;\n}\n.tickets.collapsed {\n    white-space: nowrap;\n    mask-image: linear-gradient(to right, black 85%, transparent);\n}\n</style>\n","<template>\n    <TicketRow :tickets=\"operator.tickets\" :data-uuid=\"operator.uuid\" class=\"operator\" :class=\"status\">\n        <template #status><v-icon icon=\"mdi-account\" @click=\"toggleReadiness\" /></template>\n        <template #load-max>{{ operator.ticket_limit ?? \"&infin;\" }}</template>\n        <template #complexity-max>{{ operator.complexity_limit ?? \"&infin;\" }}</template>\n        <template #name>{{ operator.name }}</template>\n    </TicketRow>\n</template>\n\n<script setup lang=\"ts\">\nimport TicketRow from \"@/Components/TicketRow.vue\";\nimport { computed } from \"vue\";\nimport { useSupervisorApi } from \"@/api\";\nimport Operator from \"@/models/Operator\";\n\nconst props = defineProps<{\n    operator: Operator;\n}>();\n\nconst status = computed(() => ({\n    online: props.operator.online,\n    ready: props.operator.ready,\n    busy: !!props.operator.tickets?.length,\n    full: props.operator.ticket_limit !== null && props.operator.tickets?.length >= props.operator.ticket_limit,\n}));\n\nconst api = useSupervisorApi();\n\nconst toggleReadiness = async () => await api.ready(props.operator.uuid, !props.operator.ready);\n</script>\n\n<style scoped>\n.operator i {\n    color: #999;\n}\n.operator.online i {\n    color: #f44;\n}\n.operator.online.ready i {\n    color: #4f4;\n}\n.operator.online.ready.full i {\n    color: #fe4;\n}\n.operator:not(.online).busy {\n    background-color: #f2dede;\n}\n</style>\n","export const Channel = \"ticket-allocator\";\n\nexport enum Operator {\n    Commented = \".operator.commented\",\n    ComplexityLimitAdjusted = \".operator.complexity-limit-adjusted\",\n    Enrolled = \".operator.enrolled\",\n    JoinedTeam = \".operator.joined-team\",\n    LeftTeam = \".operator.left-team\",\n    NameChanged = \".operator.name-changed\",\n    NotReady = \".operator.not-ready\",\n    Offline = \".operator.offline\",\n    Online = \".operator.online\",\n    Ready = \".operator.ready\",\n    Resigned = \".operator.resigned\",\n    TicketCategoryAttached = \".operator.ticket-category-attached\",\n    TicketCategoryDetached = \".operator.ticket-category-detached\",\n    TicketLimitAdjusted = \".operator.ticket-limit-adjusted\",\n}\n\nexport enum Ticket {\n    Bound = \".ticket.bound\",\n    CategoryChanged = \".ticket.category-changed\",\n    Closed = \".ticket.closed\",\n    ComplexityDecremented = \".ticket.complexity-decremented\",\n    ComplexityIncremented = \".ticket.complexity-incremented\",\n    Created = \".ticket.created\",\n    DelayDecremented = \".ticket.delay-decremented\",\n    DelayIncremented = \".ticket.delay-incremented\",\n    InitialWeightDecremented = \".ticket.initial-weight-decremented\",\n    InitialWeightIncremented = \".ticket.initial-weight-incremented\",\n    Tagged = \".ticket.tagged\",\n    Unbound = \".ticket.unbound\",\n    WeightIncrementDecremented = \".ticket.weight-increment-decremented\",\n    WeightIncrementIncremented = \".ticket.weight-increment-incremented\",\n}\n\nnamespace Operator {\n    export interface CommentedPayload {\n        uuid: string;\n        orderId: number;\n    }\n\n    export interface ComplexityLimitAdjustedPayload {\n        uuid: string;\n        complexityLimit: number | null;\n    }\n\n    export interface EnrolledPayload {\n        uuid: string;\n        origin?: any;\n    }\n\n    export interface JoinedTeamPayload {\n        uuid: string;\n        operatorTeamUuid: string;\n    }\n\n    export interface LeftTeamPayload {\n        uuid: string;\n        operatorTeamUuid: string;\n    }\n\n    export interface NameChangedPayload {\n        uuid: string;\n        name: string;\n    }\n\n    export interface NotReadyPayload {\n        uuid: string;\n    }\n\n    export interface OfflinePayload {\n        uuid: string;\n    }\n\n    export interface OnlinePayload {\n        uuid: string;\n    }\n\n    export interface ReadyPayload {\n        uuid: string;\n    }\n\n    export interface ResignedPayload {\n        uuid: string;\n    }\n\n    export interface TicketCategoryAttachedPayload {\n        uuid: string;\n        ticketCategoryUuid: string;\n    }\n\n    export interface TicketCategoryDetachedPayload {\n        uuid: string;\n        ticketCategoryUuid: string;\n    }\n\n    export interface TicketLimitAdjustedPayload {\n        uuid: string;\n        ticketLimit: number | null;\n    }\n}\n\nnamespace Ticket {\n    export interface BoundPayload {\n        uuid: string;\n        operatorUuid: string;\n    }\n\n    export interface CategoryChangedPayload {\n        uuid: string;\n        categoryUuid: string;\n    }\n\n    export interface ClosedPayload {\n        uuid: string;\n    }\n\n    export interface ComplexityDecrementedPayload {\n        uuid: string;\n        complexityPoints: number;\n    }\n\n    export interface ComplexityIncrementedPayload {\n        uuid: string;\n        complexityPoints: number;\n    }\n\n    export interface CreatedPayload {\n        uuid: string;\n        categoryUuid: string;\n        origin?: any;\n    }\n\n    export interface DelayDecrementedPayload {\n        uuid: string;\n        delaySeconds: number;\n    }\n\n    export interface DelayIncrementedPayload {\n        uuid: string;\n        delaySeconds: number;\n    }\n\n    export interface InitialWeightDecrementedPayload {\n        uuid: string;\n        weightPoints: number;\n    }\n\n    export interface InitialWeightIncrementedPayload {\n        uuid: string;\n        weightPoints: number;\n    }\n\n    export interface TaggedPayload {\n        uuid: string;\n        tags: string[];\n    }\n\n    export interface UnboundPayload {\n        uuid: string;\n    }\n\n    export interface WeightIncrementDecrementedPayload {\n        uuid: string;\n        weightPoints: number;\n    }\n\n    export interface WeightIncrementIncrementedPayload {\n        uuid: string;\n        weightPoints: number;\n    }\n}\n","import { k as getValue, o as orderBy } from './shared/pinia-orm.1cd11660.mjs';\n\nfunction useSum(models, field) {\n  return models.reduce((sum, item) => {\n    if (typeof item[field] === \"number\")\n      sum += item[field];\n    return sum;\n  }, 0);\n}\n\nfunction usePluck(models, field) {\n  return models.map((model) => getValue(model, field)).filter((item) => item);\n}\n\nfunction useMax(models, field) {\n  const numbers = usePluck(models, field).filter((item) => typeof item === \"number\");\n  return numbers.length === 0 ? 0 : Math.max(...numbers);\n}\n\nfunction useMin(models, field) {\n  const numbers = usePluck(models, field).filter((item) => typeof item === \"number\");\n  return numbers.length === 0 ? 0 : Math.min(...numbers);\n}\n\nfunction useKeys(models) {\n  return models.map((model) => model[model.$getLocalKey()]);\n}\n\nfunction useGroupBy(models, fields) {\n  const grouped = {};\n  const props = Array.isArray(fields) ? fields : [fields];\n  models.forEach((model) => {\n    const key = props.length === 1 ? model[props[0]] : `[${props.map((field) => model[field]).toString()}]`;\n    grouped[key] = (grouped[key] || []).concat(model);\n  });\n  return grouped;\n}\n\nfunction useSortBy(collection, sort, flags) {\n  const directions = [];\n  const iteratees = [];\n  typeof sort === \"function\" && iteratees.push(sort) && directions.push(\"asc\");\n  Array.isArray(sort) && sort.forEach((item) => iteratees.push(item[0]) && directions.push(item[1]));\n  iteratees.length === 0 && iteratees.push(sort);\n  return orderBy(collection, iteratees, directions, flags);\n}\n\nfunction useCollect(models) {\n  return {\n    sum: (field) => useSum(models, field),\n    min: (field) => useMin(models, field),\n    max: (field) => useMax(models, field),\n    pluck: (field) => usePluck(models, field),\n    groupBy: (fields) => useGroupBy(models, fields),\n    sortBy: (sort, flags = \"SORT_REGULAR\") => useSortBy(models, sort, flags),\n    keys: () => useKeys(models)\n  };\n}\n\nexport { useCollect, useGroupBy, useKeys, useMax, useMin, usePluck, useSum };\n","import { Repository } from \"pinia-orm\";\nimport Operator from \"@/models/Operator\";\nimport * as Events from \"@/events\";\n\nexport default class OperatorRepository extends Repository<Operator> {\n    use = Operator;\n\n    enroll = ({ uuid }: Events.Operator.EnrolledPayload) => {\n        this.save({ uuid });\n    };\n\n    resign = ({ uuid }: Events.Operator.ResignedPayload) => {\n        this.destroy(uuid);\n    };\n\n    changeName = ({ uuid, name }: Events.Operator.NameChangedPayload) => {\n        this.where(\"uuid\", uuid).update({ name });\n    };\n\n    setOnline = ({ uuid }: Events.Operator.OnlinePayload) => {\n        this.where(\"uuid\", uuid).update({ online: true });\n    };\n\n    setOffline = ({ uuid }: Events.Operator.OfflinePayload) => {\n        this.where(\"uuid\", uuid).update({ online: false });\n    };\n\n    setReady = ({ uuid }: Events.Operator.ReadyPayload) => {\n        this.where(\"uuid\", uuid).update({ ready: true });\n    };\n\n    setNotReady = ({ uuid }: Events.Operator.NotReadyPayload) => {\n        this.where(\"uuid\", uuid).update({ ready: false });\n    };\n\n    adjustTicketLimit = ({ uuid, ticketLimit }: Events.Operator.TicketLimitAdjustedPayload) => {\n        this.where(\"uuid\", uuid).update({ ticket_limit: ticketLimit });\n    };\n\n    adjustComplexityLimit = ({ uuid, complexityLimit }: Events.Operator.ComplexityLimitAdjustedPayload) => {\n        this.where(\"uuid\", uuid).update({ complexity_limit: complexityLimit });\n    };\n}\n","import { createVNode as _createVNode, resolveDirective as _resolveDirective } from \"vue\";\n// Styles\nimport \"./VGrid.css\";\n\n// Composables\nimport { makeTagProps } from \"../../composables/tag.mjs\"; // Utilities\nimport { defineComponent, useRender } from \"../../util/index.mjs\";\nexport const VContainer = defineComponent({\n  name: 'VContainer',\n  props: {\n    fluid: {\n      type: Boolean,\n      default: false\n    },\n    ...makeTagProps()\n  },\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    useRender(() => _createVNode(props.tag, {\n      \"class\": ['v-container', {\n        'v-container--fluid': props.fluid\n      }]\n    }, slots));\n    return {};\n  }\n});\n//# sourceMappingURL=VContainer.mjs.map","// Styles\nimport \"./VGrid.css\";\n\n// Composables\nimport { makeTagProps } from \"../../composables/tag.mjs\"; // Utilities\nimport { capitalize, computed, h } from 'vue';\nimport { defineComponent } from \"../../util/index.mjs\"; // Types\nconst breakpoints = ['sm', 'md', 'lg', 'xl', 'xxl']; // no xs\n\nconst breakpointProps = (() => {\n  return breakpoints.reduce((props, val) => {\n    props[val] = {\n      type: [Boolean, String, Number],\n      default: false\n    };\n    return props;\n  }, {});\n})();\nconst offsetProps = (() => {\n  return breakpoints.reduce((props, val) => {\n    props['offset' + capitalize(val)] = {\n      type: [String, Number],\n      default: null\n    };\n    return props;\n  }, {});\n})();\nconst orderProps = (() => {\n  return breakpoints.reduce((props, val) => {\n    props['order' + capitalize(val)] = {\n      type: [String, Number],\n      default: null\n    };\n    return props;\n  }, {});\n})();\nconst propMap = {\n  col: Object.keys(breakpointProps),\n  offset: Object.keys(offsetProps),\n  order: Object.keys(orderProps)\n};\nfunction breakpointClass(type, prop, val) {\n  let className = type;\n  if (val == null || val === false) {\n    return undefined;\n  }\n  if (prop) {\n    const breakpoint = prop.replace(type, '');\n    className += `-${breakpoint}`;\n  }\n  if (type === 'col') {\n    className = 'v-' + className;\n  }\n  // Handling the boolean style prop when accepting [Boolean, String, Number]\n  // means Vue will not convert <v-col sm></v-col> to sm: true for us.\n  // Since the default is false, an empty string indicates the prop's presence.\n  if (type === 'col' && (val === '' || val === true)) {\n    // .v-col-md\n    return className.toLowerCase();\n  }\n  // .order-md-6\n  className += `-${val}`;\n  return className.toLowerCase();\n}\nconst ALIGN_SELF_VALUES = ['auto', 'start', 'end', 'center', 'baseline', 'stretch'];\nexport const VCol = defineComponent({\n  name: 'VCol',\n  props: {\n    cols: {\n      type: [Boolean, String, Number],\n      default: false\n    },\n    ...breakpointProps,\n    offset: {\n      type: [String, Number],\n      default: null\n    },\n    ...offsetProps,\n    order: {\n      type: [String, Number],\n      default: null\n    },\n    ...orderProps,\n    alignSelf: {\n      type: String,\n      default: null,\n      validator: str => ALIGN_SELF_VALUES.includes(str)\n    },\n    ...makeTagProps()\n  },\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const classes = computed(() => {\n      const classList = [];\n\n      // Loop through `col`, `offset`, `order` breakpoint props\n      let type;\n      for (type in propMap) {\n        propMap[type].forEach(prop => {\n          const value = props[prop];\n          const className = breakpointClass(type, prop, value);\n          if (className) classList.push(className);\n        });\n      }\n      const hasColClasses = classList.some(className => className.startsWith('v-col-'));\n      classList.push({\n        // Default to .v-col if no other col-{bp}-* classes generated nor `cols` specified.\n        'v-col': !hasColClasses || !props.cols,\n        [`v-col-${props.cols}`]: props.cols,\n        [`offset-${props.offset}`]: props.offset,\n        [`order-${props.order}`]: props.order,\n        [`align-self-${props.alignSelf}`]: props.alignSelf\n      });\n      return classList;\n    });\n    return () => {\n      var _slots$default;\n      return h(props.tag, {\n        class: classes.value\n      }, (_slots$default = slots.default) == null ? void 0 : _slots$default.call(slots));\n    };\n  }\n});\n//# sourceMappingURL=VCol.mjs.map","// Styles\nimport \"./VGrid.css\";\n\n// Composables\nimport { makeTagProps } from \"../../composables/tag.mjs\"; // Utilities\nimport { capitalize, computed, h } from 'vue';\nimport { defineComponent } from \"../../util/index.mjs\"; // Types\nconst breakpoints = ['sm', 'md', 'lg', 'xl', 'xxl']; // no xs\n\nconst ALIGNMENT = ['start', 'end', 'center'];\nconst SPACE = ['space-between', 'space-around', 'space-evenly'];\nfunction makeRowProps(prefix, def) {\n  return breakpoints.reduce((props, val) => {\n    props[prefix + capitalize(val)] = def();\n    return props;\n  }, {});\n}\nconst ALIGN_VALUES = [...ALIGNMENT, 'baseline', 'stretch'];\nconst alignValidator = str => ALIGN_VALUES.includes(str);\nconst alignProps = makeRowProps('align', () => ({\n  type: String,\n  default: null,\n  validator: alignValidator\n}));\nconst JUSTIFY_VALUES = [...ALIGNMENT, ...SPACE];\nconst justifyValidator = str => JUSTIFY_VALUES.includes(str);\nconst justifyProps = makeRowProps('justify', () => ({\n  type: String,\n  default: null,\n  validator: justifyValidator\n}));\nconst ALIGN_CONTENT_VALUES = [...ALIGNMENT, ...SPACE, 'stretch'];\nconst alignContentValidator = str => ALIGN_CONTENT_VALUES.includes(str);\nconst alignContentProps = makeRowProps('alignContent', () => ({\n  type: String,\n  default: null,\n  validator: alignContentValidator\n}));\nconst propMap = {\n  align: Object.keys(alignProps),\n  justify: Object.keys(justifyProps),\n  alignContent: Object.keys(alignContentProps)\n};\nconst classMap = {\n  align: 'align',\n  justify: 'justify',\n  alignContent: 'align-content'\n};\nfunction breakpointClass(type, prop, val) {\n  let className = classMap[type];\n  if (val == null) {\n    return undefined;\n  }\n  if (prop) {\n    // alignSm -> Sm\n    const breakpoint = prop.replace(type, '');\n    className += `-${breakpoint}`;\n  }\n  // .align-items-sm-center\n  className += `-${val}`;\n  return className.toLowerCase();\n}\nexport const VRow = defineComponent({\n  name: 'VRow',\n  props: {\n    dense: Boolean,\n    noGutters: Boolean,\n    align: {\n      type: String,\n      default: null,\n      validator: alignValidator\n    },\n    ...alignProps,\n    justify: {\n      type: String,\n      default: null,\n      validator: justifyValidator\n    },\n    ...justifyProps,\n    alignContent: {\n      type: String,\n      default: null,\n      validator: alignContentValidator\n    },\n    ...alignContentProps,\n    ...makeTagProps()\n  },\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const classes = computed(() => {\n      const classList = [];\n\n      // Loop through `align`, `justify`, `alignContent` breakpoint props\n      let type;\n      for (type in propMap) {\n        propMap[type].forEach(prop => {\n          const value = props[prop];\n          const className = breakpointClass(type, prop, value);\n          if (className) classList.push(className);\n        });\n      }\n      classList.push({\n        'v-row--no-gutters': props.noGutters,\n        'v-row--dense': props.dense,\n        [`align-${props.align}`]: props.align,\n        [`justify-${props.justify}`]: props.justify,\n        [`align-content-${props.alignContent}`]: props.alignContent\n      });\n      return classList;\n    });\n    return () => {\n      var _slots$default;\n      return h(props.tag, {\n        class: ['v-row', classes.value]\n      }, (_slots$default = slots.default) == null ? void 0 : _slots$default.call(slots));\n    };\n  }\n});\n//# sourceMappingURL=VRow.mjs.map","import { mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\";\n// Styles\nimport \"./VSwitch.css\";\n\n// Components\nimport { filterControlProps, makeSelectionControlProps, VSelectionControl } from \"../VSelectionControl/VSelectionControl.mjs\";\nimport { filterInputProps, makeVInputProps, VInput } from \"../VInput/VInput.mjs\";\nimport { VProgressCircular } from \"../VProgressCircular/index.mjs\"; // Composables\nimport { LoaderSlot, useLoader } from \"../../composables/loader.mjs\";\nimport { useFocus } from \"../../composables/focus.mjs\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.mjs\"; // Utility\nimport { computed, ref } from 'vue';\nimport { defineComponent, filterInputAttrs, getUid, useRender } from \"../../util/index.mjs\";\nexport const VSwitch = defineComponent({\n  name: 'VSwitch',\n  inheritAttrs: false,\n  props: {\n    indeterminate: Boolean,\n    inset: Boolean,\n    flat: Boolean,\n    loading: {\n      type: [Boolean, String],\n      default: false\n    },\n    ...makeVInputProps(),\n    ...makeSelectionControlProps()\n  },\n  emits: {\n    'update:focused': focused => true,\n    'update:modelValue': () => true,\n    'update:indeterminate': val => true\n  },\n  setup(props, _ref) {\n    let {\n      attrs,\n      slots\n    } = _ref;\n    const indeterminate = useProxiedModel(props, 'indeterminate');\n    const model = useProxiedModel(props, 'modelValue');\n    const {\n      loaderClasses\n    } = useLoader(props);\n    const {\n      isFocused,\n      focus,\n      blur\n    } = useFocus(props);\n    const loaderColor = computed(() => {\n      return typeof props.loading === 'string' && props.loading !== '' ? props.loading : props.color;\n    });\n    const uid = getUid();\n    const id = computed(() => props.id || `switch-${uid}`);\n    function onChange() {\n      if (indeterminate.value) {\n        indeterminate.value = false;\n      }\n    }\n    useRender(() => {\n      const [inputAttrs, controlAttrs] = filterInputAttrs(attrs);\n      const [inputProps, _1] = filterInputProps(props);\n      const [controlProps, _2] = filterControlProps(props);\n      const control = ref();\n      function onClick() {\n        var _control$value, _control$value$input;\n        (_control$value = control.value) == null ? void 0 : (_control$value$input = _control$value.input) == null ? void 0 : _control$value$input.click();\n      }\n      return _createVNode(VInput, _mergeProps({\n        \"class\": ['v-switch', {\n          'v-switch--inset': props.inset\n        }, {\n          'v-switch--indeterminate': indeterminate.value\n        }, loaderClasses.value]\n      }, inputAttrs, inputProps, {\n        \"id\": id.value,\n        \"focused\": isFocused.value\n      }), {\n        ...slots,\n        default: _ref2 => {\n          let {\n            id,\n            messagesId,\n            isDisabled,\n            isReadonly,\n            isValid\n          } = _ref2;\n          return _createVNode(VSelectionControl, _mergeProps({\n            \"ref\": control\n          }, controlProps, {\n            \"modelValue\": model.value,\n            \"onUpdate:modelValue\": [$event => model.value = $event, onChange],\n            \"id\": id.value,\n            \"aria-describedby\": messagesId.value,\n            \"type\": \"checkbox\",\n            \"aria-checked\": indeterminate.value ? 'mixed' : undefined,\n            \"disabled\": isDisabled.value,\n            \"readonly\": isReadonly.value,\n            \"onFocus\": focus,\n            \"onBlur\": blur\n          }, controlAttrs), {\n            ...slots,\n            default: () => _createVNode(\"div\", {\n              \"class\": \"v-switch__track\",\n              \"onClick\": onClick\n            }, null),\n            input: _ref3 => {\n              let {\n                textColorClasses,\n                textColorStyles\n              } = _ref3;\n              return _createVNode(\"div\", {\n                \"class\": ['v-switch__thumb', textColorClasses.value],\n                \"style\": textColorStyles.value\n              }, [props.loading && _createVNode(LoaderSlot, {\n                \"name\": \"v-switch\",\n                \"active\": true,\n                \"color\": isValid.value === false ? undefined : loaderColor.value\n              }, {\n                default: slotProps => slots.loader ? slots.loader(slotProps) : _createVNode(VProgressCircular, {\n                  \"active\": slotProps.isActive,\n                  \"color\": slotProps.color,\n                  \"indeterminate\": true,\n                  \"size\": \"16\",\n                  \"width\": \"2\"\n                }, null)\n              })]);\n            }\n          });\n        }\n      });\n    });\n    return {};\n  }\n});\n//# sourceMappingURL=VSwitch.mjs.map","<script setup lang=\"ts\">\nimport DefaultLayout from \"@/Layouts/Default.vue\";\nimport TicketRow from \"@/Components/TicketRow.vue\";\nimport OperatorRow from \"@/Components/OperatorRow.vue\";\nimport { Head } from \"@inertiajs/vue3\";\nimport { computed, ref, onMounted } from \"vue\";\nimport { refThrottled } from \"@vueuse/core\";\nimport { useSupervisorApi } from \"@/api\";\nimport { useDropZone } from \"@/composables\";\nimport type { Operator, Ticket } from \"@/types\";\nimport { useSharedOptions, useSharedDisplayMode, useSharedOperatorSorting } from \"@/shared\";\nimport * as Events from \"@/events.d\";\nimport { PusherChannel } from \"laravel-echo/dist/channel\";\n\nimport { useRepo } from \"pinia-orm\";\nimport { useCollect } from \"pinia-orm/dist/helpers\";\nimport OperatorRepository from \"@/repositories/OperatorRepository\";\nimport TicketRepository from \"@/repositories/TicketRepository\";\n\nconst props = defineProps<{\n    operators: Operator[];\n    tickets: Ticket[];\n}>();\n\nconst options = useSharedOptions();\nconst mode = useSharedDisplayMode();\nconst oprSort = useSharedOperatorSorting();\n\nconst operatorRepo = computed(() => useRepo(OperatorRepository));\nconst ticketRepo = computed(() => useRepo(TicketRepository));\n\nconst sortedOperators = refThrottled(\n    computed(() =>\n        useCollect(\n            operatorRepo.value\n                .with(\"tickets\", (query) => {\n                    query.orderBy(mode.value, \"desc\");\n                })\n                .get()\n        ).sortBy([\n            [\"online\", \"desc\"],\n            [\"ready\", \"desc\"],\n            [\"free_slots\", \"desc\"],\n            [\"ticket_count\", \"asc\"],\n            [\"name\", \"asc\"],\n        ])\n    ),\n    750\n);\n\nconst sortedTickets = refThrottled(\n    computed(() => ticketRepo.value.unbound().orderBy(mode.value, \"desc\").get()),\n    750\n);\n\nconst api = useSupervisorApi();\n\nconst closeTicket = ref<HTMLElement | null>(null);\nconst { isOverDropZone } = useDropZone(\n    closeTicket,\n    async (dataTransfer) => {\n        const uuid = dataTransfer?.getData(\"text/plain\");\n        if (!uuid) throw new Error(\"Ticket UUID undefined.\");\n        return await api.close(uuid);\n    },\n    false\n);\n\nonMounted(() => {\n    operatorRepo.value.fresh(props.operators);\n    ticketRepo.value.fresh(props.tickets);\n\n    window.ticketAllocatorChannel = <PusherChannel>window.Echo.channel(Events.Channel);\n\n    window.ticketAllocatorChannel.listenToAll((event: string, data: any) => {\n        console.log(event, data);\n    });\n\n    window.ticketAllocatorChannel\n        .listen(Events.Operator.Enrolled, operatorRepo.value.enroll)\n        .listen(Events.Operator.Resigned, operatorRepo.value.resign)\n        .listen(Events.Operator.NameChanged, operatorRepo.value.changeName)\n        .listen(Events.Operator.Online, operatorRepo.value.setOnline)\n        .listen(Events.Operator.Offline, operatorRepo.value.setOffline)\n        .listen(Events.Operator.Ready, operatorRepo.value.setReady)\n        .listen(Events.Operator.NotReady, operatorRepo.value.setNotReady)\n        .listen(Events.Operator.TicketLimitAdjusted, operatorRepo.value.adjustTicketLimit)\n        .listen(Events.Operator.ComplexityLimitAdjusted, operatorRepo.value.adjustComplexityLimit)\n        .listen(Events.Ticket.Created, ticketRepo.value.create)\n        .listen(Events.Ticket.Closed, ticketRepo.value.close)\n        .listen(Events.Ticket.Bound, ticketRepo.value.bind)\n        .listen(Events.Ticket.Unbound, ticketRepo.value.unbind)\n        .listen(Events.Ticket.CategoryChanged, ticketRepo.value.changeCategory)\n        .listen(Events.Ticket.InitialWeightIncremented, ticketRepo.value.incrementInitialWeight)\n        .listen(Events.Ticket.InitialWeightDecremented, ticketRepo.value.decrementInitialWeight)\n        .listen(Events.Ticket.WeightIncrementIncremented, ticketRepo.value.incrementWeightIncrement)\n        .listen(Events.Ticket.WeightIncrementDecremented, ticketRepo.value.decrementWeightIncrement)\n        .listen(Events.Ticket.ComplexityIncremented, ticketRepo.value.incrementComplexity)\n        .listen(Events.Ticket.ComplexityDecremented, ticketRepo.value.decrementComplexity)\n        .listen(Events.Ticket.DelayIncremented, ticketRepo.value.incrementDelay)\n        .listen(Events.Ticket.DelayDecremented, ticketRepo.value.decrementDelay);\n});\n</script>\n\n<template>\n    <Head title=\"Dashboard\" />\n\n    <DefaultLayout>\n        <template #header>\n            <h2 class=\"font-semibold text-xl text-gray-800 leading-tight\">Dashboard</h2>\n        </template>\n\n        <div>\n            <v-container fluid>\n                <v-row>\n                    <v-col>\n                        <v-btn-toggle v-model=\"options.all\" variant=\"plain\" multiple>\n                            <v-btn\n                                value=\"hide-empty\"\n                                :icon=\"options.hideEmpty ? 'mdi-eye-off-outline' : 'mdi-eye-outline'\"\n                            />\n                            <v-btn\n                                value=\"alt-info\"\n                                :icon=\"options.altInfo ? 'mdi-magnify-plus-outline' : 'mdi-magnify'\"\n                            />\n                            <v-btn\n                                value=\"unlocked\"\n                                :icon=\"options.unlocked ? 'mdi-lock-open-variant' : 'mdi-lock'\"\n                                color=\"red\"\n                                :variant=\"options.unlocked ? 'text' : 'plain'\"\n                            />\n                        </v-btn-toggle>\n                        <v-btn-group v-if=\"options.unlocked\" variant=\"plain\">\n                            <v-btn ref=\"closeTicket\" :icon=\"isOverDropZone ? 'mdi-delete-empty' : 'mdi-delete'\" />\n                            <v-btn icon=\"mdi-refresh\" />\n                        </v-btn-group>\n                    </v-col>\n                    <v-col cols=\"2\">\n                        <v-switch\n                            v-model=\"oprSort\"\n                            false-value=\"asc\"\n                            true-value=\"desc\"\n                            prepend-icon=\"mdi-sort-ascending\"\n                            append-icon=\"mdi-sort-descending\"\n                            class=\"d-flex justify-end\"\n                        />\n                    </v-col>\n                    <v-col cols=\"2\">\n                        <v-switch\n                            v-model=\"mode\"\n                            false-value=\"weight\"\n                            true-value=\"duration\"\n                            prepend-icon=\"mdi-weight\"\n                            append-icon=\"mdi-clock\"\n                            class=\"d-flex justify-end\"\n                        />\n                    </v-col>\n                </v-row>\n            </v-container>\n            <v-table class=\"ticket-monitor\">\n                <tbody class=\"align-text-top\">\n                    <TicketRow :tickets=\"sortedTickets\">\n                        <template #name>Очередь заявок</template>\n                    </TicketRow>\n                    <TransitionGroup name=\"operator-pool\">\n                        <OperatorRow v-for=\"operator in sortedOperators\" :key=\"operator.uuid\" :operator=\"operator\" />\n                    </TransitionGroup>\n                </tbody>\n            </v-table>\n        </div>\n    </DefaultLayout>\n</template>\n\n<style scoped>\n.ticket-monitor:deep(table) {\n    table-layout: fixed;\n}\n.operator-pool-move {\n    transition: all 0.5s ease;\n}\n</style>\n"],"names":["useDragAndDrop","target","onDragStart","element","ref","useEventListener","event","entry","dataTransfer","useDropZone","onDrop","filesOnly","isOverDropZone","counter","isClient","files","_a","VCardActions","defineComponent","_","_ref","slots","provideDefaults","useRender","_slots$default","_createVNode","VCardSubtitle","createSimpleFunctional","VCardTitle","VCardItem","IconValue","makeDensityProps","props","_slots$prepend","_slots$title","_slots$subtitle","_slots$append","hasPrepend","hasAppend","hasTitle","hasSubtitle","VDefaultsProvider","VAvatar","VCardText","VCard","Ripple","makeThemeProps","makeBorderProps","makeDimensionProps","makeElevationProps","makeLoaderProps","makeLocationProps","makePositionProps","makeRoundedProps","makeRouterProps","makeTagProps","makeVariantProps","attrs","themeClasses","provideTheme","borderClasses","useBorder","colorClasses","colorStyles","variantClasses","useVariant","densityClasses","useDensity","dimensionStyles","useDimension","elevationClasses","useElevation","loaderClasses","useLoader","locationStyles","useLocation","positionClasses","usePosition","roundedClasses","useRounded","link","useLink","isLink","computed","isClickable","_slots$image","_slots$text","Tag","hasHeader","hasImage","hasCardItem","hasText","_withDirectives","VImg","LoaderSlot","genOverlays","_resolveDirective","mode","useSharedDisplayMode","threshold","usePage","position","compactPosition","overflow","animation","Query","BaseQuery","record","increment","models","newModels","model","newRecord","key","newModel","Repository","BaseRepository","TicketRepository","__publicField","Ticket","uuid","categoryUuid","operatorUuid","weightPoints","complexityPoints","delaySeconds","handlerUuid","ticketPool","lock","unlock","triggerElement","usePointerLock","x","useMouse","ticketRepo","useRepo","watch","animationEnabled","onMounted","useSupervisorApi","ready","route","weight","ticketUuid","handler","close","collapsed","complexity","n","moreIcon","api","ticketRow","status","_b","toggleReadiness","Channel","Operator","useSum","field","sum","item","usePluck","getValue","useMax","numbers","useMin","useKeys","useGroupBy","fields","grouped","useSortBy","collection","sort","flags","directions","iteratees","orderBy","useCollect","OperatorRepository","name","ticketLimit","complexityLimit","VContainer","breakpoints","breakpointProps","val","offsetProps","capitalize","orderProps","propMap","breakpointClass","type","prop","className","breakpoint","ALIGN_SELF_VALUES","VCol","str","classes","classList","value","hasColClasses","h","ALIGNMENT","SPACE","makeRowProps","prefix","def","ALIGN_VALUES","alignValidator","alignProps","JUSTIFY_VALUES","justifyValidator","justifyProps","ALIGN_CONTENT_VALUES","alignContentValidator","alignContentProps","classMap","VRow","VSwitch","makeVInputProps","makeSelectionControlProps","focused","indeterminate","useProxiedModel","isFocused","focus","blur","useFocus","loaderColor","uid","getUid","id","onChange","inputAttrs","controlAttrs","filterInputAttrs","inputProps","_1","filterInputProps","controlProps","_2","filterControlProps","control","onClick","_control$value","_control$value$input","VInput","_mergeProps","_ref2","messagesId","isDisabled","isReadonly","isValid","VSelectionControl","$event","_ref3","textColorClasses","textColorStyles","slotProps","VProgressCircular","options","useSharedOptions","oprSort","useSharedOperatorSorting","operatorRepo","sortedOperators","refThrottled","query","sortedTickets","closeTicket","Events.Channel","data","Events.Operator","Events.Ticket"],"mappings":"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"}