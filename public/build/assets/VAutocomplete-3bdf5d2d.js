import{t as Y,bn as Z,bo as ee,aa as le,bp as ae,bq as te,am as ne,r as y,ah as M,c as g,br as ue,bs as oe,bt as se,w as E,n as L,l as ie,b7 as N,m as u,aJ as O,bu as re,ae as C,bv as ce,bw as U,bd as ve,bx as de,x as fe,aH as me,bl as pe,by as he}from"./app-62779fc8.js";function ye(e,v,a){if(v==null)return e;if(Array.isArray(v))throw new Error("Multiple matches is not implemented");return typeof v=="number"&&~v?u(O,null,[u("span",{class:"v-autocomplete__unmask"},[e.substr(0,v)]),u("span",{class:"v-autocomplete__mask"},[e.substr(v,a)]),u("span",{class:"v-autocomplete__unmask"},[e.substr(v+a)])]):e}const be=Y()({name:"VAutocomplete",props:{search:String,...Z({filterKeys:["title"]}),...ee(),...le(ae({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...te({transition:!1})},emits:{"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,v){let{slots:a}=v;const{t:K}=ne(),F=y(),m=y(!1),f=y(!0),R=y(),I=M(e,"menu"),s=g({get:()=>I.value,set:l=>{var t;I.value&&!l&&((t=R.value)!=null&&t.Î¨openChildren)||(I.value=l)}}),{items:A,transformIn:z,transformOut:B}=ue(e),i=M(e,"search",""),d=M(e,"modelValue",[],l=>z(he(l)),l=>{const t=B(l);return e.multiple?t:t[0]??null}),p=oe(),{filteredItems:P,getMatches:H}=se(e,A,g(()=>f.value?void 0:i.value)),V=g(()=>d.value.map(l=>A.value.find(t=>e.valueComparator(t.value,l.value))||l)),D=g(()=>e.hideSelected?P.value.filter(l=>!V.value.some(t=>t.value===l.value)):P.value),S=g(()=>V.value.map(l=>l.props.value)),T=y();function $(l){e.openOnClear&&(s.value=!0),i.value=""}function q(){e.hideNoData&&!A.value.length||e.readonly||p!=null&&p.isReadonly.value||(s.value=!0)}function J(l){var t,r;e.readonly||p!=null&&p.isReadonly.value||(["Enter","ArrowDown","ArrowUp"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"].includes(l.key)&&(s.value=!0),["Escape"].includes(l.key)&&(s.value=!1),["Enter","Escape","Tab"].includes(l.key)&&(f.value=!0),l.key==="ArrowDown"?(t=T.value)==null||t.focus("next"):l.key==="ArrowUp"&&((r=T.value)==null||r.focus("prev")))}function j(l){i.value=l.target.value}function G(){m.value&&(f.value=!0)}function Q(l){m.value=!0}function W(l){var t;l.relatedTarget==null&&((t=F.value)==null||t.focus())}const b=y(!1);function w(l){if(e.multiple){const t=S.value.findIndex(r=>e.valueComparator(r,l.value));if(t===-1)d.value=[...d.value,l],i.value="";else{const r=[...d.value];r.splice(t,1),d.value=r}}else d.value=[l],b.value=!0,a.selection||(i.value=l.title),s.value=!1,f.value=!0,L(()=>b.value=!1)}return E(m,l=>{var t;l?(b.value=!0,i.value=e.multiple||a.selection?"":String(((t=V.value.at(-1))==null?void 0:t.props.title)??""),f.value=!0,L(()=>b.value=!1)):(s.value=!1,i.value="")}),E(i,l=>{!m.value||b.value||(l&&(s.value=!0),f.value=!l)}),ie(()=>{const l=!!(e.chips||a.chip),t=!!(!e.hideNoData||D.value.length||a.prepend||a.append||a["no-data"]),r=d.value.length>0,[X]=N.filterProps(e);return u(N,C({ref:F},X,{modelValue:i.value,"onUpdate:modelValue":n=>{n==null&&(d.value=[])},validationValue:d.externalValue,dirty:r,onInput:j,class:["v-autocomplete",{"v-autocomplete--active-menu":s.value,"v-autocomplete--chips":!!e.chips,[`v-autocomplete--${e.multiple?"multiple":"single"}`]:!0,"v-autocomplete--selection-slot":!!a.selection}],appendInnerIcon:e.menuIcon,readonly:e.readonly,placeholder:r?void 0:e.placeholder,"onClick:clear":$,"onMousedown:control":q,onFocus:()=>m.value=!0,onBlur:()=>m.value=!1,onKeydown:J}),{...a,default:()=>u(O,null,[u(re,C({ref:R,modelValue:s.value,"onUpdate:modelValue":n=>s.value=n,activator:"parent",contentClass:"v-autocomplete__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:G},e.menuProps),{default:()=>[t&&u(ce,{ref:T,selected:S.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),onFocusin:Q,onFocusout:W},{default:()=>{var n,h,x;return[!D.value.length&&!e.hideNoData&&(((n=a["no-data"])==null?void 0:n.call(a))??u(U,{title:K(e.noDataText)},null)),(h=a["prepend-item"])==null?void 0:h.call(a),D.value.map(o=>{var k;return((k=a.item)==null?void 0:k.call(a,{item:o,props:C(o.props,{onClick:()=>w(o)})}))??u(U,C({key:o.value},o.props,{onClick:()=>w(o)}),{prepend:c=>{let{isSelected:_}=c;return e.multiple&&!e.hideSelected?u(ve,{modelValue:_,ripple:!1,tabindex:"-1"},null):void 0},title:()=>{var c,_;return f.value?o.title:ye(o.title,(c=H(o))==null?void 0:c.title,((_=i.value)==null?void 0:_.length)??0)}})}),(x=a["append-item"])==null?void 0:x.call(a)]}})]}),V.value.map((n,h)=>{var k;function x(c){c.stopPropagation(),c.preventDefault(),w(n)}const o={"onClick:close":x,modelValue:!0,"onUpdate:modelValue":void 0};return u("div",{key:n.value,class:"v-autocomplete__selection"},[l?a.chip?u(fe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>{var c;return[(c=a.chip)==null?void 0:c.call(a,{item:n,index:h,props:o})]}}):u(de,C({key:"chip",closable:e.closableChips,size:"small",text:n.title},o),null):((k=a.selection)==null?void 0:k.call(a,{item:n,index:h}))??u("span",{class:"v-autocomplete__selection-text"},[n.title,e.multiple&&h<V.value.length-1&&u("span",{class:"v-autocomplete__selection-comma"},[me(",")])])])})])})}),pe({isFocused:m,isPristine:f,menu:s,search:i,filteredItems:P,select:w},F)}});export{be as V};
//# sourceMappingURL=VAutocomplete-3bdf5d2d.js.map
