import{_ as S}from"./Default.vue_vue_type_script_setup_true_lang-C8blLa2J.js";import{L as x,f as i,N as L,a2 as U,aa as p,ab as N,R as C,i as a,_ as r,ac as P,S as s,F as $,a1 as f,P as d,X as _,Y as j,ad as A,V as D,a6 as E,T as y,aU as F,$ as H,U as O,W}from"./app-DSFzeZeV.js";import{b as X,c as Y,f as Z,M as q,a as z,C as G,g as t,h as J,j as K,T as Q,k as ee,V as ae}from"./OperatorRepository-Dxce9RVs.js";import{V as te}from"./VContainer-dEM_WWoZ.js";import{V as se,a as M}from"./VRow-HhpqjjDT.js";import{V as oe}from"./VDataTable-CC8OngbG.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./scopeId-CAX6vcQf.js";import"./VGrid-CS5TCx7T.js";import"./VTextField-BpnyFglz.js";import"./VCheckboxBtn-D2tDtIYq.js";import"./filter-CTbcrsBh.js";import"./VTable-DPenuOxv.js";const le={class:"font-semibold text-xl text-gray-800 leading-tight"},re=["innerHTML"],ie=x({__name:"Personal",props:{operator:{},ticketCategories:{},ticketColumns:{}},setup(w){const c=w,m=X(),u=Y(),v=i(()=>f(K)),e=i(()=>f(Q)),R=i(()=>f(ee)),b=Z(J);L();const T=new q({linkify:!0}).use(z),V=i(()=>c.ticketColumns.map(({key:o,...n})=>({key:o,...n,sortable:!1}))),g=i(()=>v.value.with("tickets",o=>o.with("category").orderBy(u.value,"desc")).first());U(()=>{b.listen(G.PropsInvalidated,()=>p.reload()).listen(t.Created,e.value.create).listen(t.Closed,e.value.close).listen(t.Bound,e.value.bind).listen(t.Accepted,e.value.accept).listen(t.Unbound,e.value.unbind).listen(t.CategoryChanged,e.value.changeCategory).listen(t.MetaValueSet,e.value.setMetaValue).listen(t.MetaValuesMerged,e.value.mergeMetaValues).listen(t.MetricsAdjusted,e.value.adjustMetrics)});function h(){v.value.save(c.operator),R.value.fresh(c.ticketCategories)}const B=p.on("navigate",h),I=p.on("success",h);return N(()=>{B(),I()}),(o,n)=>(d(),C($,null,[a(r(P),{title:o.$t("personal")},null,8,["title"]),a(S,null,{header:s(()=>[_("h2",le,j(o.$t("personal")),1)]),default:s(()=>[_("div",null,[a(te,{fluid:""},{default:s(()=>[a(se,null,{default:s(()=>[a(M,null,{default:s(()=>[a(A,{modelValue:r(m).all,"onUpdate:modelValue":n[0]||(n[0]=l=>r(m).all=l),variant:"plain",multiple:""},{default:s(()=>[a(D,{value:"alt-info",icon:r(m).altInfo?"mdi-magnify-plus-outline":"mdi-magnify"},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),a(M,{cols:"2"},{default:s(()=>[a(ae,{modelValue:r(u),"onUpdate:modelValue":n[1]||(n[1]=l=>E(u)?u.value=l:null),"false-value":"weight","true-value":"duration","prepend-icon":"mdi-weight","append-icon":"mdi-clock",class:"d-flex justify-end"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),g.value?(d(),y(oe,{key:0,density:"comfortable","hide-default-footer":"",class:"personal-monitor",headers:V.value,items:g.value.tickets},F({_:2},[H(V.value,({key:l})=>({name:`item.${l}`,fn:s(({value:k})=>[l==="meta.icon"?(d(),y(O,{key:0,icon:k},null,8,["icon"])):(d(),C("span",{key:1,innerHTML:r(T).renderInline(k)},null,8,re))])}))]),1032,["headers","items"])):W("",!0)])]),_:1})],64))}}),ye=ne(ie,[["__scopeId","data-v-dde909e4"]]);export{ye as default};
//# sourceMappingURL=Personal-CcSeYekq.js.map
