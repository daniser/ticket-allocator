import{ax as B,b3 as u,b4 as M,aB as E,q as e,u as n,aC as a,aJ as F,aA as S,a$ as N,aF as x,aG as s,aR as q,b5 as c,aI as V,b6 as A,ae as b,b7 as D,b8 as R}from"./app-6f2acc16.js";import{a as z,P as v}from"./Default.vue_vue_type_script_setup_true_lang-68995868.js";import{V as G}from"./VForm-f0542969.js";import{V as I,a as f,b as p}from"./VRow-e34282f5.js";import{V as J,a as P}from"./VTextarea-220caeb2.js";import{V as Z,a as j,b as H}from"./VToolbar-3c584ed8.js";import{V as K}from"./VAutocomplete-5ca3d39b.js";const L={class:"font-semibold text-xl text-gray-800 leading-tight"},le=B({__name:"CreateEdit",props:{factor:null,ticketCategories:null,errors:null},setup(m){var w,h,_,k;const d=m,C=[{title:u("value"),key:"value"},{title:u("initial_weight"),key:"initial_weight"},{title:u("weight_increment"),key:"weight_increment"},{title:u("complexity"),key:"complexity"},{title:u("delay"),key:"delay"},{title:u("actions"),key:"actions",sortable:!1}],i=M({active:!((w=d.factor)!=null&&w.deleted_at),name:((h=d.factor)==null?void 0:h.name)??"",description:((_=d.factor)==null?void 0:_.description)??"",config:((k=d.factor)==null?void 0:k.config)??[]});function y(t){return d.ticketCategories.filter(o=>o.uuid===t||!i.config.map(g=>g.value).includes(o.uuid))}function U(){var t;i.config.push({value:((t=y()[0])==null?void 0:t.uuid)??"",initial_weight:null,weight_increment:null,complexity:null,delay:null})}function $(t){i.config=i.config.filter(o=>o.value!==t)}function T(){d.factor?i.put(v("ticket-allocator.factors.update",d.factor.uuid)):i.post(v("ticket-allocator.factors.store"))}return(t,o)=>{const g=R("v-data-table");return S(),E(F,null,[e(n(N),{title:t.$t(m.factor?"edit_factor":"new_factor")},null,8,["title"]),e(z,null,{header:a(()=>[x("h2",L,s(t.$t(m.factor?"edit_factor":"new_factor")),1)]),default:a(()=>[x("div",null,[e(G,{onSubmit:q(T,["prevent"])},{default:a(()=>[e(I,null,{default:a(()=>[e(f,null,{default:a(()=>[e(p,{cols:"12",md:"12"},{default:a(()=>[e(J,{modelValue:n(i).active,"onUpdate:modelValue":o[0]||(o[0]=l=>n(i).active=l),label:t.$t("active")},null,8,["modelValue","label"])]),_:1})]),_:1}),e(f,null,{default:a(()=>[e(p,{cols:"12",md:"12"},{default:a(()=>[e(c,{modelValue:n(i).name,"onUpdate:modelValue":o[1]||(o[1]=l=>n(i).name=l),required:"",maxlength:"255",label:t.$t("name"),"error-messages":m.errors.name},null,8,["modelValue","label","error-messages"])]),_:1})]),_:1}),e(f,null,{default:a(()=>[e(p,{cols:"12",md:"12"},{default:a(()=>[e(P,{modelValue:n(i).description,"onUpdate:modelValue":o[2]||(o[2]=l=>n(i).description=l),label:t.$t("description"),"error-messages":m.errors.description},null,8,["modelValue","label","error-messages"])]),_:1})]),_:1}),e(f,null,{default:a(()=>[e(p,{cols:"12",md:"12"},{default:a(()=>[e(g,{headers:C,items:n(i).config,density:"compact"},{top:a(()=>[e(Z,{flat:""},{default:a(()=>[e(j,null,{default:a(()=>[V(s(t.$t("entries")),1)]),_:1}),e(A,{class:"mx-4",inset:"",vertical:""}),e(H),e(b,{color:"primary",dark:"",disabled:y().length===0,onClick:U},{default:a(()=>[V(s(t.$t("new_entry")),1)]),_:1},8,["disabled"])]),_:1})]),["item.value"]:a(({item:l})=>[e(K,{modelValue:l.raw.value,"onUpdate:modelValue":r=>l.raw.value=r,items:y(l.raw.value),"item-title":"name","item-value":"uuid",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue","items"])]),["item.initial_weight"]:a(({item:l})=>[e(c,{modelValue:l.raw.initial_weight,"onUpdate:modelValue":r=>l.raw.initial_weight=r,modelModifiers:{number:!0},type:"number",min:"0",max:"9999999",placeholder:"0",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.weight_increment"]:a(({item:l})=>[e(c,{modelValue:l.raw.weight_increment,"onUpdate:modelValue":r=>l.raw.weight_increment=r,modelModifiers:{number:!0},type:"number",min:"0",max:"99999",placeholder:"0",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.complexity"]:a(({item:l})=>[e(c,{modelValue:l.raw.complexity,"onUpdate:modelValue":r=>l.raw.complexity=r,modelModifiers:{number:!0},type:"number",min:"0",max:"9999",placeholder:"0",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.delay"]:a(({item:l})=>[e(c,{modelValue:l.raw.delay,"onUpdate:modelValue":r=>l.raw.delay=r,modelModifiers:{number:!0},type:"number",min:"0",max:"99999",placeholder:"0",variant:"plain",density:"compact","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),["item.actions"]:a(({item:l})=>[e(b,{icon:"mdi-delete",title:t.$t("remove"),size:"small",variant:"plain",onClick:r=>$(l.raw.value)},null,8,["title","onClick"])]),_:2},1032,["items"])]),_:1})]),_:1}),e(f,null,{default:a(()=>[e(p,{cols:"12",md:"12"},{default:a(()=>[e(b,{type:"submit",color:"primary",class:"mr-3",disabled:n(i).processing},{default:a(()=>[V(s(t.$t("save")),1)]),_:1},8,["disabled"]),e(n(D),{href:n(v)("ticket-allocator.factors.index"),class:"mr-3"},{default:a(()=>[e(b,null,{default:a(()=>[V(s(t.$t("cancel")),1)]),_:1})]),_:1},8,["href"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])]),_:1})],64)}}});export{le as default};
//# sourceMappingURL=CreateEdit-c1641148.js.map
